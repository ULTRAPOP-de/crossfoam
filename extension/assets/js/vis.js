!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=98)}([function(t,e,n){"use strict";n.r(e),n.d(e,"dispatch",(function(){return c}));var r={value:function(){}};function i(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new o(r)}function o(t){this._=t}function a(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function s(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function u(t,e,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===e){t[i]=r,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}o.prototype=i.prototype={constructor:o,on:function(t,e){var n,r=this._,i=a(t+"",r),o=-1,c=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<c;)if(n=(t=i[o]).type)r[n]=u(r[n],t.name,e);else if(null==e)for(n in r)r[n]=u(r[n],t.name,null);return this}for(;++o<c;)if((n=(t=i[o]).type)&&(n=s(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new o(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var c=i},function(t,e,n){(function(e){var n;t.exports=(n=n||function(t,n){var r;"undefined"!=typeof window&&window.crypto&&(r=window.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==e&&e.crypto&&(r=e.crypto);var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),a={},s=a.lib={},u=s.Base={extend:function(t){var e=o(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},c=s.WordArray=u.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=a<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)e[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=u.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(i());return new c.init(e,t)}}),f=a.enc={},l=f.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new c.init(n,e/2)}},h=f.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new c.init(n,e)}},d=f.Utf8={stringify:function(t){try{return decodeURIComponent(escape(h.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return h.parse(unescape(encodeURIComponent(t)))}},p=s.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,r=this._data,i=r.words,o=r.sigBytes,a=this.blockSize,s=o/(4*a),u=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*a,f=t.min(4*u,o);if(u){for(var l=0;l<u;l+=a)this._doProcessBlock(i,l);n=i.splice(0,u),r.sigBytes-=f}return new c.init(n,f)},clone:function(){var t=u.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),g=(s.Hasher=p.extend({cfg:u.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new g.HMAC.init(t,n).finalize(e)}}}),a.algo={});return a}(Math),n)}).call(this,n(23))},function(t,e,n){"use strict";n.r(e),n.d(e,"version",(function(){return r})),n.d(e,"bisect",(function(){return c})),n.d(e,"bisectRight",(function(){return s})),n.d(e,"bisectLeft",(function(){return u})),n.d(e,"ascending",(function(){return i})),n.d(e,"bisector",(function(){return o})),n.d(e,"cross",(function(){return h})),n.d(e,"descending",(function(){return d})),n.d(e,"deviation",(function(){return v})),n.d(e,"extent",(function(){return m})),n.d(e,"histogram",(function(){return P})),n.d(e,"thresholdFreedmanDiaconis",(function(){return B})),n.d(e,"thresholdScott",(function(){return D})),n.d(e,"thresholdSturges",(function(){return O})),n.d(e,"max",(function(){return z})),n.d(e,"mean",(function(){return R})),n.d(e,"median",(function(){return L})),n.d(e,"merge",(function(){return I})),n.d(e,"min",(function(){return j})),n.d(e,"pairs",(function(){return f})),n.d(e,"permute",(function(){return U})),n.d(e,"quantile",(function(){return N})),n.d(e,"range",(function(){return M})),n.d(e,"scan",(function(){return F})),n.d(e,"shuffle",(function(){return H})),n.d(e,"sum",(function(){return q})),n.d(e,"ticks",(function(){return E})),n.d(e,"tickIncrement",(function(){return T})),n.d(e,"tickStep",(function(){return C})),n.d(e,"transpose",(function(){return V})),n.d(e,"variance",(function(){return g})),n.d(e,"zip",(function(){return W})),n.d(e,"axisTop",(function(){return et})),n.d(e,"axisRight",(function(){return nt})),n.d(e,"axisBottom",(function(){return rt})),n.d(e,"axisLeft",(function(){return it})),n.d(e,"brush",(function(){return _i})),n.d(e,"brushX",(function(){return yi})),n.d(e,"brushY",(function(){return bi})),n.d(e,"brushSelection",(function(){return mi})),n.d(e,"chord",(function(){return Ci})),n.d(e,"ribbon",(function(){return qi})),n.d(e,"nest",(function(){return Gi})),n.d(e,"set",(function(){return eo})),n.d(e,"map",(function(){return Wi})),n.d(e,"keys",(function(){return no})),n.d(e,"values",(function(){return ro})),n.d(e,"entries",(function(){return io})),n.d(e,"color",(function(){return Ie})),n.d(e,"rgb",(function(){return He})),n.d(e,"hsl",(function(){return Ke})),n.d(e,"lab",(function(){return co})),n.d(e,"hcl",(function(){return yo})),n.d(e,"lch",(function(){return mo})),n.d(e,"gray",(function(){return uo})),n.d(e,"cubehelix",(function(){return So})),n.d(e,"contours",(function(){return Ro})),n.d(e,"contourDensity",(function(){return Ho})),n.d(e,"dispatch",(function(){return ot.dispatch})),n.d(e,"drag",(function(){return Ko})),n.d(e,"dragDisable",(function(){return _e})),n.d(e,"dragEnable",(function(){return xe})),n.d(e,"dsvFormat",(function(){return na})),n.d(e,"csvParse",(function(){return ia})),n.d(e,"csvParseRows",(function(){return oa})),n.d(e,"csvFormat",(function(){return aa})),n.d(e,"csvFormatBody",(function(){return sa})),n.d(e,"csvFormatRows",(function(){return ua})),n.d(e,"csvFormatRow",(function(){return ca})),n.d(e,"csvFormatValue",(function(){return fa})),n.d(e,"tsvParse",(function(){return ha})),n.d(e,"tsvParseRows",(function(){return da})),n.d(e,"tsvFormat",(function(){return pa})),n.d(e,"tsvFormatBody",(function(){return ga})),n.d(e,"tsvFormatRows",(function(){return va})),n.d(e,"tsvFormatRow",(function(){return ma})),n.d(e,"tsvFormatValue",(function(){return ya})),n.d(e,"autoType",(function(){return ba})),n.d(e,"easeLinear",(function(){return xa})),n.d(e,"easeQuad",(function(){return ka})),n.d(e,"easeQuadIn",(function(){return wa})),n.d(e,"easeQuadOut",(function(){return Ma})),n.d(e,"easeQuadInOut",(function(){return ka})),n.d(e,"easeCubic",(function(){return Fr})),n.d(e,"easeCubicIn",(function(){return jr})),n.d(e,"easeCubicOut",(function(){return Ur})),n.d(e,"easeCubicInOut",(function(){return Fr})),n.d(e,"easePoly",(function(){return Ea})),n.d(e,"easePolyIn",(function(){return Aa})),n.d(e,"easePolyOut",(function(){return Sa})),n.d(e,"easePolyInOut",(function(){return Ea})),n.d(e,"easeSin",(function(){return Na})),n.d(e,"easeSinIn",(function(){return Oa})),n.d(e,"easeSinOut",(function(){return Pa})),n.d(e,"easeSinInOut",(function(){return Na})),n.d(e,"easeExp",(function(){return za})),n.d(e,"easeExpIn",(function(){return Ba})),n.d(e,"easeExpOut",(function(){return Da})),n.d(e,"easeExpInOut",(function(){return za})),n.d(e,"easeCircle",(function(){return Ia})),n.d(e,"easeCircleIn",(function(){return Ra})),n.d(e,"easeCircleOut",(function(){return La})),n.d(e,"easeCircleInOut",(function(){return Ia})),n.d(e,"easeBounce",(function(){return Ua})),n.d(e,"easeBounceIn",(function(){return ja})),n.d(e,"easeBounceOut",(function(){return Ua})),n.d(e,"easeBounceInOut",(function(){return Fa})),n.d(e,"easeBack",(function(){return Va})),n.d(e,"easeBackIn",(function(){return Ha})),n.d(e,"easeBackOut",(function(){return qa})),n.d(e,"easeBackInOut",(function(){return Va})),n.d(e,"easeElastic",(function(){return Ga})),n.d(e,"easeElasticIn",(function(){return Wa})),n.d(e,"easeElasticOut",(function(){return Ga})),n.d(e,"easeElasticInOut",(function(){return Xa})),n.d(e,"blob",(function(){return Qa})),n.d(e,"buffer",(function(){return Za})),n.d(e,"dsv",(function(){return ns})),n.d(e,"csv",(function(){return rs})),n.d(e,"tsv",(function(){return is})),n.d(e,"image",(function(){return os})),n.d(e,"json",(function(){return ss})),n.d(e,"text",(function(){return ts})),n.d(e,"xml",(function(){return cs})),n.d(e,"html",(function(){return fs})),n.d(e,"svg",(function(){return ls})),n.d(e,"forceCenter",(function(){return hs})),n.d(e,"forceCollide",(function(){return As})),n.d(e,"forceLink",(function(){return Ts})),n.d(e,"forceManyBody",(function(){return Bs})),n.d(e,"forceRadial",(function(){return Ds})),n.d(e,"forceSimulation",(function(){return Ns})),n.d(e,"forceX",(function(){return zs})),n.d(e,"forceY",(function(){return Rs})),n.d(e,"formatDefaultLocale",(function(){return Zs})),n.d(e,"format",(function(){return Vs})),n.d(e,"formatPrefix",(function(){return Ys})),n.d(e,"formatLocale",(function(){return $s})),n.d(e,"formatSpecifier",(function(){return Us})),n.d(e,"FormatSpecifier",(function(){return Fs})),n.d(e,"precisionFixed",(function(){return Js})),n.d(e,"precisionPrefix",(function(){return tu})),n.d(e,"precisionRound",(function(){return eu})),n.d(e,"geoArea",(function(){return Wu})),n.d(e,"geoBounds",(function(){return Ic})),n.d(e,"geoCentroid",(function(){return Qc})),n.d(e,"geoCircle",(function(){return uf})),n.d(e,"geoClipAntimeridian",(function(){return _f})),n.d(e,"geoClipCircle",(function(){return xf})),n.d(e,"geoClipExtent",(function(){return Sf})),n.d(e,"geoClipRectangle",(function(){return wf})),n.d(e,"geoContains",(function(){return Vf})),n.d(e,"geoDistance",(function(){return zf})),n.d(e,"geoGraticule",(function(){return Gf})),n.d(e,"geoGraticule10",(function(){return Xf})),n.d(e,"geoInterpolate",(function(){return Jf})),n.d(e,"geoLength",(function(){return Nf})),n.d(e,"geoPath",(function(){return $l})),n.d(e,"geoAlbers",(function(){return vh})),n.d(e,"geoAlbersUsa",(function(){return mh})),n.d(e,"geoAzimuthalEqualArea",(function(){return xh})),n.d(e,"geoAzimuthalEqualAreaRaw",(function(){return _h})),n.d(e,"geoAzimuthalEquidistant",(function(){return Mh})),n.d(e,"geoAzimuthalEquidistantRaw",(function(){return wh})),n.d(e,"geoConicConformal",(function(){return Ch})),n.d(e,"geoConicConformalRaw",(function(){return Th})),n.d(e,"geoConicEqualArea",(function(){return gh})),n.d(e,"geoConicEqualAreaRaw",(function(){return ph})),n.d(e,"geoConicEquidistant",(function(){return Bh})),n.d(e,"geoConicEquidistantRaw",(function(){return Nh})),n.d(e,"geoEqualEarth",(function(){return Uh})),n.d(e,"geoEqualEarthRaw",(function(){return jh})),n.d(e,"geoEquirectangular",(function(){return Ph})),n.d(e,"geoEquirectangularRaw",(function(){return Oh})),n.d(e,"geoGnomonic",(function(){return Hh})),n.d(e,"geoGnomonicRaw",(function(){return Fh})),n.d(e,"geoIdentity",(function(){return qh})),n.d(e,"geoProjection",(function(){return lh})),n.d(e,"geoProjectionMutator",(function(){return hh})),n.d(e,"geoMercator",(function(){return Ah})),n.d(e,"geoMercatorRaw",(function(){return kh})),n.d(e,"geoNaturalEarth1",(function(){return Yh})),n.d(e,"geoNaturalEarth1Raw",(function(){return Vh})),n.d(e,"geoOrthographic",(function(){return Gh})),n.d(e,"geoOrthographicRaw",(function(){return Wh})),n.d(e,"geoStereographic",(function(){return Kh})),n.d(e,"geoStereographicRaw",(function(){return Xh})),n.d(e,"geoTransverseMercator",(function(){return $h})),n.d(e,"geoTransverseMercatorRaw",(function(){return Qh})),n.d(e,"geoRotation",(function(){return of})),n.d(e,"geoStream",(function(){return Iu})),n.d(e,"geoTransform",(function(){return Zl})),n.d(e,"cluster",(function(){return ed})),n.d(e,"hierarchy",(function(){return rd})),n.d(e,"pack",(function(){return Td})),n.d(e,"packSiblings",(function(){return wd})),n.d(e,"packEnclose",(function(){return cd})),n.d(e,"partition",(function(){return Dd})),n.d(e,"stratify",(function(){return jd})),n.d(e,"tree",(function(){return Wd})),n.d(e,"treemap",(function(){return $d})),n.d(e,"treemapBinary",(function(){return Zd})),n.d(e,"treemapDice",(function(){return Bd})),n.d(e,"treemapSlice",(function(){return Gd})),n.d(e,"treemapSliceDice",(function(){return Jd})),n.d(e,"treemapSquarify",(function(){return Qd})),n.d(e,"treemapResquarify",(function(){return tp})),n.d(e,"interpolate",(function(){return Mn})),n.d(e,"interpolateArray",(function(){return dn})),n.d(e,"interpolateBasis",(function(){return Je})),n.d(e,"interpolateBasisClosed",(function(){return tn})),n.d(e,"interpolateDate",(function(){return gn})),n.d(e,"interpolateDiscrete",(function(){return ep})),n.d(e,"interpolateHue",(function(){return np})),n.d(e,"interpolateNumber",(function(){return vn})),n.d(e,"interpolateNumberArray",(function(){return ln})),n.d(e,"interpolateObject",(function(){return mn})),n.d(e,"interpolateRound",(function(){return rp})),n.d(e,"interpolateString",(function(){return wn})),n.d(e,"interpolateTransformCss",(function(){return ar})),n.d(e,"interpolateTransformSvg",(function(){return sr})),n.d(e,"interpolateZoom",(function(){return ap})),n.d(e,"interpolateRgb",(function(){return sn})),n.d(e,"interpolateRgbBasis",(function(){return cn})),n.d(e,"interpolateRgbBasisClosed",(function(){return fn})),n.d(e,"interpolateHsl",(function(){return up})),n.d(e,"interpolateHslLong",(function(){return cp})),n.d(e,"interpolateLab",(function(){return fp})),n.d(e,"interpolateHcl",(function(){return hp})),n.d(e,"interpolateHclLong",(function(){return dp})),n.d(e,"interpolateCubehelix",(function(){return gp})),n.d(e,"interpolateCubehelixLong",(function(){return vp})),n.d(e,"piecewise",(function(){return mp})),n.d(e,"quantize",(function(){return yp})),n.d(e,"path",(function(){return Li})),n.d(e,"polygonArea",(function(){return bp})),n.d(e,"polygonCentroid",(function(){return _p})),n.d(e,"polygonHull",(function(){return Mp})),n.d(e,"polygonContains",(function(){return kp})),n.d(e,"polygonLength",(function(){return Ap})),n.d(e,"quadtree",(function(){return bs})),n.d(e,"randomUniform",(function(){return Ep})),n.d(e,"randomNormal",(function(){return Tp})),n.d(e,"randomLogNormal",(function(){return Cp})),n.d(e,"randomBates",(function(){return Pp})),n.d(e,"randomIrwinHall",(function(){return Op})),n.d(e,"randomExponential",(function(){return Np})),n.d(e,"scaleBand",(function(){return Up})),n.d(e,"scalePoint",(function(){return Hp})),n.d(e,"scaleIdentity",(function(){return ng})),n.d(e,"scaleLinear",(function(){return eg})),n.d(e,"scaleLog",(function(){return lg})),n.d(e,"scaleSymlog",(function(){return gg})),n.d(e,"scaleOrdinal",(function(){return jp})),n.d(e,"scaleImplicit",(function(){return Ip})),n.d(e,"scalePow",(function(){return _g})),n.d(e,"scaleSqrt",(function(){return xg})),n.d(e,"scaleQuantile",(function(){return wg})),n.d(e,"scaleQuantize",(function(){return Mg})),n.d(e,"scaleThreshold",(function(){return kg})),n.d(e,"scaleTime",(function(){return ey})),n.d(e,"scaleUtc",(function(){return ly})),n.d(e,"scaleSequential",(function(){return py})),n.d(e,"scaleSequentialLog",(function(){return gy})),n.d(e,"scaleSequentialPow",(function(){return my})),n.d(e,"scaleSequentialSqrt",(function(){return yy})),n.d(e,"scaleSequentialSymlog",(function(){return vy})),n.d(e,"scaleSequentialQuantile",(function(){return by})),n.d(e,"scaleDiverging",(function(){return xy})),n.d(e,"scaleDivergingLog",(function(){return wy})),n.d(e,"scaleDivergingPow",(function(){return ky})),n.d(e,"scaleDivergingSqrt",(function(){return Ay})),n.d(e,"scaleDivergingSymlog",(function(){return My})),n.d(e,"tickFormat",(function(){return Jp})),n.d(e,"schemeCategory10",(function(){return Ey})),n.d(e,"schemeAccent",(function(){return Ty})),n.d(e,"schemeDark2",(function(){return Cy})),n.d(e,"schemePaired",(function(){return Oy})),n.d(e,"schemePastel1",(function(){return Py})),n.d(e,"schemePastel2",(function(){return Ny})),n.d(e,"schemeSet1",(function(){return By})),n.d(e,"schemeSet2",(function(){return Dy})),n.d(e,"schemeSet3",(function(){return zy})),n.d(e,"schemeTableau10",(function(){return Ry})),n.d(e,"interpolateBrBG",(function(){return jy})),n.d(e,"schemeBrBG",(function(){return Iy})),n.d(e,"interpolatePRGn",(function(){return Fy})),n.d(e,"schemePRGn",(function(){return Uy})),n.d(e,"interpolatePiYG",(function(){return qy})),n.d(e,"schemePiYG",(function(){return Hy})),n.d(e,"interpolatePuOr",(function(){return Yy})),n.d(e,"schemePuOr",(function(){return Vy})),n.d(e,"interpolateRdBu",(function(){return Gy})),n.d(e,"schemeRdBu",(function(){return Wy})),n.d(e,"interpolateRdGy",(function(){return Ky})),n.d(e,"schemeRdGy",(function(){return Xy})),n.d(e,"interpolateRdYlBu",(function(){return $y})),n.d(e,"schemeRdYlBu",(function(){return Qy})),n.d(e,"interpolateRdYlGn",(function(){return Jy})),n.d(e,"schemeRdYlGn",(function(){return Zy})),n.d(e,"interpolateSpectral",(function(){return eb})),n.d(e,"schemeSpectral",(function(){return tb})),n.d(e,"interpolateBuGn",(function(){return rb})),n.d(e,"schemeBuGn",(function(){return nb})),n.d(e,"interpolateBuPu",(function(){return ob})),n.d(e,"schemeBuPu",(function(){return ib})),n.d(e,"interpolateGnBu",(function(){return sb})),n.d(e,"schemeGnBu",(function(){return ab})),n.d(e,"interpolateOrRd",(function(){return cb})),n.d(e,"schemeOrRd",(function(){return ub})),n.d(e,"interpolatePuBuGn",(function(){return lb})),n.d(e,"schemePuBuGn",(function(){return fb})),n.d(e,"interpolatePuBu",(function(){return db})),n.d(e,"schemePuBu",(function(){return hb})),n.d(e,"interpolatePuRd",(function(){return gb})),n.d(e,"schemePuRd",(function(){return pb})),n.d(e,"interpolateRdPu",(function(){return mb})),n.d(e,"schemeRdPu",(function(){return vb})),n.d(e,"interpolateYlGnBu",(function(){return bb})),n.d(e,"schemeYlGnBu",(function(){return yb})),n.d(e,"interpolateYlGn",(function(){return xb})),n.d(e,"schemeYlGn",(function(){return _b})),n.d(e,"interpolateYlOrBr",(function(){return Mb})),n.d(e,"schemeYlOrBr",(function(){return wb})),n.d(e,"interpolateYlOrRd",(function(){return Ab})),n.d(e,"schemeYlOrRd",(function(){return kb})),n.d(e,"interpolateBlues",(function(){return Eb})),n.d(e,"schemeBlues",(function(){return Sb})),n.d(e,"interpolateGreens",(function(){return Cb})),n.d(e,"schemeGreens",(function(){return Tb})),n.d(e,"interpolateGreys",(function(){return Pb})),n.d(e,"schemeGreys",(function(){return Ob})),n.d(e,"interpolatePurples",(function(){return Bb})),n.d(e,"schemePurples",(function(){return Nb})),n.d(e,"interpolateReds",(function(){return zb})),n.d(e,"schemeReds",(function(){return Db})),n.d(e,"interpolateOranges",(function(){return Lb})),n.d(e,"schemeOranges",(function(){return Rb})),n.d(e,"interpolateCividis",(function(){return Ib})),n.d(e,"interpolateCubehelixDefault",(function(){return jb})),n.d(e,"interpolateRainbow",(function(){return qb})),n.d(e,"interpolateWarm",(function(){return Ub})),n.d(e,"interpolateCool",(function(){return Fb})),n.d(e,"interpolateSinebow",(function(){return Gb})),n.d(e,"interpolateTurbo",(function(){return Xb})),n.d(e,"interpolateViridis",(function(){return Qb})),n.d(e,"interpolateMagma",(function(){return $b})),n.d(e,"interpolateInferno",(function(){return Zb})),n.d(e,"interpolatePlasma",(function(){return Jb})),n.d(e,"create",(function(){return t_})),n.d(e,"creator",(function(){return $t})),n.d(e,"local",(function(){return n_})),n.d(e,"matcher",(function(){return ft})),n.d(e,"mouse",(function(){return En})),n.d(e,"namespace",(function(){return yt})),n.d(e,"namespaces",(function(){return mt})),n.d(e,"clientPoint",(function(){return An})),n.d(e,"select",(function(){return me})),n.d(e,"selectAll",(function(){return i_})),n.d(e,"selection",(function(){return ve})),n.d(e,"selector",(function(){return st})),n.d(e,"selectorAll",(function(){return ct})),n.d(e,"style",(function(){return Ct})),n.d(e,"touch",(function(){return Sn})),n.d(e,"touches",(function(){return o_})),n.d(e,"window",(function(){return At})),n.d(e,"event",(function(){return re})),n.d(e,"customEvent",(function(){return ce})),n.d(e,"arc",(function(){return S_})),n.d(e,"area",(function(){return N_})),n.d(e,"line",(function(){return P_})),n.d(e,"pie",(function(){return z_})),n.d(e,"areaRadial",(function(){return F_})),n.d(e,"radialArea",(function(){return F_})),n.d(e,"lineRadial",(function(){return U_})),n.d(e,"radialLine",(function(){return U_})),n.d(e,"pointRadial",(function(){return H_})),n.d(e,"linkHorizontal",(function(){return Q_})),n.d(e,"linkVertical",(function(){return $_})),n.d(e,"linkRadial",(function(){return Z_})),n.d(e,"symbol",(function(){return vx})),n.d(e,"symbols",(function(){return gx})),n.d(e,"symbolCircle",(function(){return J_})),n.d(e,"symbolCross",(function(){return tx})),n.d(e,"symbolDiamond",(function(){return rx})),n.d(e,"symbolSquare",(function(){return ux})),n.d(e,"symbolStar",(function(){return sx})),n.d(e,"symbolTriangle",(function(){return fx})),n.d(e,"symbolWye",(function(){return px})),n.d(e,"curveBasisClosed",(function(){return wx})),n.d(e,"curveBasisOpen",(function(){return kx})),n.d(e,"curveBasis",(function(){return _x})),n.d(e,"curveBundle",(function(){return Sx})),n.d(e,"curveCardinalClosed",(function(){return Px})),n.d(e,"curveCardinalOpen",(function(){return Bx})),n.d(e,"curveCardinal",(function(){return Cx})),n.d(e,"curveCatmullRomClosed",(function(){return Ix})),n.d(e,"curveCatmullRomOpen",(function(){return Ux})),n.d(e,"curveCatmullRom",(function(){return Rx})),n.d(e,"curveLinearClosed",(function(){return Hx})),n.d(e,"curveLinear",(function(){return T_})),n.d(e,"curveMonotoneX",(function(){return Qx})),n.d(e,"curveMonotoneY",(function(){return $x})),n.d(e,"curveNatural",(function(){return tw})),n.d(e,"curveStep",(function(){return nw})),n.d(e,"curveStepAfter",(function(){return iw})),n.d(e,"curveStepBefore",(function(){return rw})),n.d(e,"stack",(function(){return uw})),n.d(e,"stackOffsetExpand",(function(){return cw})),n.d(e,"stackOffsetDiverging",(function(){return fw})),n.d(e,"stackOffsetNone",(function(){return ow})),n.d(e,"stackOffsetSilhouette",(function(){return lw})),n.d(e,"stackOffsetWiggle",(function(){return hw})),n.d(e,"stackOrderAppearance",(function(){return dw})),n.d(e,"stackOrderAscending",(function(){return gw})),n.d(e,"stackOrderDescending",(function(){return mw})),n.d(e,"stackOrderInsideOut",(function(){return yw})),n.d(e,"stackOrderNone",(function(){return aw})),n.d(e,"stackOrderReverse",(function(){return bw})),n.d(e,"timeInterval",(function(){return Eg})),n.d(e,"timeMillisecond",(function(){return uv})),n.d(e,"timeMilliseconds",(function(){return cv})),n.d(e,"utcMillisecond",(function(){return uv})),n.d(e,"utcMilliseconds",(function(){return cv})),n.d(e,"timeSecond",(function(){return ov})),n.d(e,"timeSeconds",(function(){return av})),n.d(e,"utcSecond",(function(){return ov})),n.d(e,"utcSeconds",(function(){return av})),n.d(e,"timeMinute",(function(){return nv})),n.d(e,"timeMinutes",(function(){return rv})),n.d(e,"timeHour",(function(){return Jg})),n.d(e,"timeHours",(function(){return tv})),n.d(e,"timeDay",(function(){return Qg})),n.d(e,"timeDays",(function(){return $g})),n.d(e,"timeWeek",(function(){return zg})),n.d(e,"timeWeeks",(function(){return Hg})),n.d(e,"timeSunday",(function(){return zg})),n.d(e,"timeSundays",(function(){return Hg})),n.d(e,"timeMonday",(function(){return Rg})),n.d(e,"timeMondays",(function(){return qg})),n.d(e,"timeTuesday",(function(){return Lg})),n.d(e,"timeTuesdays",(function(){return Vg})),n.d(e,"timeWednesday",(function(){return Ig})),n.d(e,"timeWednesdays",(function(){return Yg})),n.d(e,"timeThursday",(function(){return jg})),n.d(e,"timeThursdays",(function(){return Wg})),n.d(e,"timeFriday",(function(){return Ug})),n.d(e,"timeFridays",(function(){return Gg})),n.d(e,"timeSaturday",(function(){return Fg})),n.d(e,"timeSaturdays",(function(){return Xg})),n.d(e,"timeMonth",(function(){return Ng})),n.d(e,"timeMonths",(function(){return Bg})),n.d(e,"timeYear",(function(){return Cg})),n.d(e,"timeYears",(function(){return Og})),n.d(e,"utcMinute",(function(){return cy})),n.d(e,"utcMinutes",(function(){return fy})),n.d(e,"utcHour",(function(){return ay})),n.d(e,"utcHours",(function(){return sy})),n.d(e,"utcDay",(function(){return Sv})),n.d(e,"utcDays",(function(){return Ev})),n.d(e,"utcWeek",(function(){return lv})),n.d(e,"utcWeeks",(function(){return yv})),n.d(e,"utcSunday",(function(){return lv})),n.d(e,"utcSundays",(function(){return yv})),n.d(e,"utcMonday",(function(){return hv})),n.d(e,"utcMondays",(function(){return bv})),n.d(e,"utcTuesday",(function(){return dv})),n.d(e,"utcTuesdays",(function(){return _v})),n.d(e,"utcWednesday",(function(){return pv})),n.d(e,"utcWednesdays",(function(){return xv})),n.d(e,"utcThursday",(function(){return gv})),n.d(e,"utcThursdays",(function(){return wv})),n.d(e,"utcFriday",(function(){return vv})),n.d(e,"utcFridays",(function(){return Mv})),n.d(e,"utcSaturday",(function(){return mv})),n.d(e,"utcSaturdays",(function(){return kv})),n.d(e,"utcMonth",(function(){return ry})),n.d(e,"utcMonths",(function(){return iy})),n.d(e,"utcYear",(function(){return Cv})),n.d(e,"utcYears",(function(){return Ov})),n.d(e,"timeFormatDefaultLocale",(function(){return $m})),n.d(e,"timeFormat",(function(){return Rv})),n.d(e,"timeParse",(function(){return Lv})),n.d(e,"utcFormat",(function(){return Iv})),n.d(e,"utcParse",(function(){return jv})),n.d(e,"timeFormatLocale",(function(){return Dv})),n.d(e,"isoFormat",(function(){return _w})),n.d(e,"isoParse",(function(){return xw})),n.d(e,"now",(function(){return Rn})),n.d(e,"timer",(function(){return jn})),n.d(e,"timerFlush",(function(){return Un})),n.d(e,"timeout",(function(){return Vn})),n.d(e,"interval",(function(){return ww})),n.d(e,"transition",(function(){return Rr})),n.d(e,"active",(function(){return Yr})),n.d(e,"interrupt",(function(){return er})),n.d(e,"voronoi",(function(){return sM})),n.d(e,"zoom",(function(){return xM})),n.d(e,"zoomTransform",(function(){return hM})),n.d(e,"zoomIdentity",(function(){return lM}));var r="5.16.0",i=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},o=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return i(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};var a=o(i),s=a.right,u=a.left,c=s,f=function(t,e){null==e&&(e=l);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return o};function l(t,e){return[t,e]}var h=function(t,e,n){var r,i,o,a,s=t.length,u=e.length,c=new Array(s*u);for(null==n&&(n=l),r=o=0;r<s;++r)for(a=t[r],i=0;i<u;++i,++o)c[o]=n(a,e[i]);return c},d=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},p=function(t){return null===t?NaN:+t},g=function(t,e){var n,r,i=t.length,o=0,a=-1,s=0,u=0;if(null==e)for(;++a<i;)isNaN(n=p(t[a]))||(u+=(r=n-s)*(n-(s+=r/++o)));else for(;++a<i;)isNaN(n=p(e(t[a],a,t)))||(u+=(r=n-s)*(n-(s+=r/++o)));if(o>1)return u/(o-1)},v=function(t,e){var n=g(t,e);return n?Math.sqrt(n):n},m=function(t,e){var n,r,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=i=n;++a<o;)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},y=Array.prototype,b=y.slice,_=y.map,x=function(t){return function(){return t}},w=function(t){return t},M=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o},k=Math.sqrt(50),A=Math.sqrt(10),S=Math.sqrt(2),E=function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=T(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o};function T(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=k?10:o>=A?5:o>=S?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=k?10:o>=A?5:o>=S?2:1)}function C(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=k?i*=10:o>=A?i*=5:o>=S&&(i*=2),e<t?-i:i}var O=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},P=function(){var t=w,e=m,n=O;function r(r){var i,o,a=r.length,s=new Array(a);for(i=0;i<a;++i)s[i]=t(r[i],i,r);var u=e(s),f=u[0],l=u[1],h=n(s,f,l);Array.isArray(h)||(h=C(f,l,h),h=M(Math.ceil(f/h)*h,l,h));for(var d=h.length;h[0]<=f;)h.shift(),--d;for(;h[d-1]>l;)h.pop(),--d;var p,g=new Array(d+1);for(i=0;i<=d;++i)(p=g[i]=[]).x0=i>0?h[i-1]:f,p.x1=i<d?h[i]:l;for(i=0;i<a;++i)f<=(o=s[i])&&o<=l&&g[c(h,o,0,d)].push(r[i]);return g}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:x(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:x([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?x(b.call(t)):x(t),r):n},r},N=function(t,e,n){if(null==n&&(n=p),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}},B=function(t,e,n){return t=_.call(t,p).sort(i),Math.ceil((n-e)/(2*(N(t,.75)-N(t,.25))*Math.pow(t.length,-1/3)))},D=function(t,e,n){return Math.ceil((n-e)/(3.5*v(t)*Math.pow(t.length,-1/3)))},z=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r},R=function(t,e){var n,r=t.length,i=r,o=-1,a=0;if(null==e)for(;++o<r;)isNaN(n=p(t[o]))?--i:a+=n;else for(;++o<r;)isNaN(n=p(e(t[o],o,t)))?--i:a+=n;if(i)return a/i},L=function(t,e){var n,r=t.length,o=-1,a=[];if(null==e)for(;++o<r;)isNaN(n=p(t[o]))||a.push(n);else for(;++o<r;)isNaN(n=p(e(t[o],o,t)))||a.push(n);return N(a.sort(i),.5)},I=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n},j=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r},U=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},F=function(t,e){if(n=t.length){var n,r,o=0,a=0,s=t[a];for(null==e&&(e=i);++o<n;)(e(r=t[o],s)<0||0!==e(s,s))&&(s=r,a=o);return 0===e(s,s)?a:void 0}},H=function(t,e,n){for(var r,i,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},q=function(t,e){var n,r=t.length,i=-1,o=0;if(null==e)for(;++i<r;)(n=+t[i])&&(o+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(o+=n);return o},V=function(t){if(!(i=t.length))return[];for(var e=-1,n=j(t,Y),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r};function Y(t){return t.length}var W=function(){return V(arguments)},G=Array.prototype.slice,X=function(t){return t};function K(t){return"translate("+(t+.5)+",0)"}function Q(t){return"translate(0,"+(t+.5)+")"}function $(t){return function(e){return+t(e)}}function Z(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function J(){return!this.__axis}function tt(t,e){var n=[],r=null,i=null,o=6,a=6,s=3,u=1===t||4===t?-1:1,c=4===t||2===t?"x":"y",f=1===t||3===t?K:Q;function l(l){var h=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,d=null==i?e.tickFormat?e.tickFormat.apply(e,n):X:i,p=Math.max(o,0)+s,g=e.range(),v=+g[0]+.5,m=+g[g.length-1]+.5,y=(e.bandwidth?Z:$)(e.copy()),b=l.selection?l.selection():l,_=b.selectAll(".domain").data([null]),x=b.selectAll(".tick").data(h,e).order(),w=x.exit(),M=x.enter().append("g").attr("class","tick"),k=x.select("line"),A=x.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(M),k=k.merge(M.append("line").attr("stroke","currentColor").attr(c+"2",u*o)),A=A.merge(M.append("text").attr("fill","currentColor").attr(c,u*p).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),l!==b&&(_=_.transition(l),x=x.transition(l),k=k.transition(l),A=A.transition(l),w=w.transition(l).attr("opacity",1e-6).attr("transform",(function(t){return isFinite(t=y(t))?f(t):this.getAttribute("transform")})),M.attr("opacity",1e-6).attr("transform",(function(t){var e=this.parentNode.__axis;return f(e&&isFinite(e=e(t))?e:y(t))}))),w.remove(),_.attr("d",4===t||2==t?a?"M"+u*a+","+v+"H0.5V"+m+"H"+u*a:"M0.5,"+v+"V"+m:a?"M"+v+","+u*a+"V0.5H"+m+"V"+u*a:"M"+v+",0.5H"+m),x.attr("opacity",1).attr("transform",(function(t){return f(y(t))})),k.attr(c+"2",u*o),A.attr(c,u*p).text(d),b.filter(J).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),b.each((function(){this.__axis=y}))}return l.scale=function(t){return arguments.length?(e=t,l):e},l.ticks=function(){return n=G.call(arguments),l},l.tickArguments=function(t){return arguments.length?(n=null==t?[]:G.call(t),l):n.slice()},l.tickValues=function(t){return arguments.length?(r=null==t?null:G.call(t),l):r&&r.slice()},l.tickFormat=function(t){return arguments.length?(i=t,l):i},l.tickSize=function(t){return arguments.length?(o=a=+t,l):o},l.tickSizeInner=function(t){return arguments.length?(o=+t,l):o},l.tickSizeOuter=function(t){return arguments.length?(a=+t,l):a},l.tickPadding=function(t){return arguments.length?(s=+t,l):s},l}function et(t){return tt(1,t)}function nt(t){return tt(2,t)}function rt(t){return tt(3,t)}function it(t){return tt(4,t)}var ot=n(0);function at(){}var st=function(t){return null==t?at:function(){return this.querySelector(t)}};function ut(){return[]}var ct=function(t){return null==t?ut:function(){return this.querySelectorAll(t)}},ft=function(t){return function(){return this.matches(t)}},lt=function(t){return new Array(t.length)};function ht(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ht.prototype={constructor:ht,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function dt(t,e,n,r,i,o){for(var a,s=0,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new ht(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function pt(t,e,n,r,i,o,a){var s,u,c,f={},l=e.length,h=o.length,d=new Array(l);for(s=0;s<l;++s)(u=e[s])&&(d[s]=c="$"+a.call(u,u.__data__,s,e),c in f?i[s]=u:f[c]=u);for(s=0;s<h;++s)(u=f[c="$"+a.call(t,o[s],s,o)])?(r[s]=u,u.__data__=o[s],f[c]=null):n[s]=new ht(t,o[s]);for(s=0;s<l;++s)(u=e[s])&&f[d[s]]===u&&(i[s]=u)}function gt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var vt="http://www.w3.org/1999/xhtml",mt={svg:"http://www.w3.org/2000/svg",xhtml:vt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},yt=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),mt.hasOwnProperty(e)?{space:mt[e],local:t}:t};function bt(t){return function(){this.removeAttribute(t)}}function _t(t){return function(){this.removeAttributeNS(t.space,t.local)}}function xt(t,e){return function(){this.setAttribute(t,e)}}function wt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Mt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function kt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var At=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function St(t){return function(){this.style.removeProperty(t)}}function Et(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Tt(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ct(t,e){return t.style.getPropertyValue(e)||At(t).getComputedStyle(t,null).getPropertyValue(e)}function Ot(t){return function(){delete this[t]}}function Pt(t,e){return function(){this[t]=e}}function Nt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Bt(t){return t.trim().split(/^|\s+/)}function Dt(t){return t.classList||new zt(t)}function zt(t){this._node=t,this._names=Bt(t.getAttribute("class")||"")}function Rt(t,e){for(var n=Dt(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Lt(t,e){for(var n=Dt(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function It(t){return function(){Rt(this,t)}}function jt(t){return function(){Lt(this,t)}}function Ut(t,e){return function(){(e.apply(this,arguments)?Rt:Lt)(this,t)}}zt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ft(){this.textContent=""}function Ht(t){return function(){this.textContent=t}}function qt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Vt(){this.innerHTML=""}function Yt(t){return function(){var e=this;this.textContent="";var n=(new DOMParser).parseFromString(t,"text/html");Array.from(n.getElementsByTagName("body")[0].childNodes).forEach((function(t){e.append(t)}))}}function Wt(t){return function(){var e=t.apply(this,arguments),n=this;if(this.textContent="",null!=e){var r=new DOMParser,i=r.parseFromString(e,"text/html"),o=Array.from(i.getElementsByTagName("body")[0].childNodes);o.forEach((function(t){n.append(t)}))}}}function Gt(){this.nextSibling&&this.parentNode.appendChild(this)}function Xt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Kt(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===vt&&e.documentElement.namespaceURI===vt?e.createElement(t):e.createElementNS(n,t)}}function Qt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var $t=function(t){var e=yt(t);return(e.local?Qt:Kt)(e)};function Zt(){return null}function Jt(){var t=this.parentNode;t&&t.removeChild(this)}function te(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ee(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var ne={},re=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(ne={mouseenter:"mouseover",mouseleave:"mouseout"}));function ie(t,e,n){return t=oe(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function oe(t,e,n){return function(r){var i=re;re=r;try{t.call(this,this.__data__,e,n)}finally{re=i}}}function ae(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function se(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function ue(t,e,n){var r=ne.hasOwnProperty(t.type)?ie:oe;return function(i,o,a){var s,u=this.__on,c=r(e,o,a);if(u)for(var f=0,l=u.length;f<l;++f)if((s=u[f]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(s):this.__on=[s]}}function ce(t,e,n,r){var i=re;t.sourceEvent=re,re=t;try{return e.apply(n,r)}finally{re=i}}function fe(t,e,n){var r=At(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function le(t,e){return function(){return fe(this,t,e)}}function he(t,e){return function(){return fe(this,t,e.apply(this,arguments))}}var de=[null];function pe(t,e){this._groups=t,this._parents=e}function ge(){return new pe([[document.documentElement]],de)}pe.prototype=ge.prototype={constructor:pe,select:function(t){"function"!=typeof t&&(t=st(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,c=r[i]=new Array(u),f=0;f<u;++f)(o=s[f])&&(a=t.call(o,o.__data__,f,s))&&("__data__"in o&&(a.__data__=o.__data__),c[f]=a);return new pe(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=ct(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new pe(r,i)},filter:function(t){"function"!=typeof t&&(t=ft(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new pe(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),f=-1,this.each((function(t){p[++f]=t})),p;var n,r=e?pt:dt,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,s=new Array(a),u=new Array(a),c=new Array(a),f=0;f<a;++f){var l=i[f],h=o[f],d=h.length,p=t.call(l,l&&l.__data__,f,i),g=p.length,v=u[f]=new Array(g),m=s[f]=new Array(g);r(l,h,v,m,c[f]=new Array(d),p,e);for(var y,b,_=0,x=0;_<g;++_)if(y=v[_]){for(_>=x&&(x=_+1);!(b=m[x])&&++x<g;);y._next=b||null}}return(s=new pe(s,i))._enter=u,s._exit=c,s},enter:function(){return new pe(this._enter||this._groups.map(lt),this._parents)},exit:function(){return new pe(this._exit||this._groups.map(lt),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],f=n[s],l=c.length,h=a[s]=new Array(l),d=0;d<l;++d)(u=c[d]||f[d])&&(h[d]=u);for(;s<r;++s)a[s]=e[s];return new pe(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=gt);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,c=i[o]=new Array(u),f=0;f<u;++f)(a=s[f])&&(c[f]=a);c.sort(e)}return new pe(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=yt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?_t:bt:"function"==typeof e?n.local?kt:Mt:n.local?wt:xt)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?St:"function"==typeof e?Tt:Et)(t,e,null==n?"":n)):Ct(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Ot:"function"==typeof e?Nt:Pt)(t,e)):this.node()[t]},classed:function(t,e){var n=Bt(t+"");if(arguments.length<2){for(var r=Dt(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Ut:e?It:jt)(n,e))},text:function(t){return arguments.length?this.each(null==t?Ft:("function"==typeof t?qt:Ht)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Vt:("function"==typeof t?Wt:Yt)(t)):this.node().innerHTML},raise:function(){return this.each(Gt)},lower:function(){return this.each(Xt)},append:function(t){var e="function"==typeof t?t:$t(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:$t(t),r=null==e?Zt:"function"==typeof e?e:st(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Jt)},clone:function(t){return this.select(t?ee:te)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=ae(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?ue:se,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,f=s.length;c<f;++c)for(r=0,u=s[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?he:le)(t,e))}};var ve=ge,me=function(t){return"string"==typeof t?new pe([[document.querySelector(t)]],[document.documentElement]):new pe([[t]],de)};function ye(){re.stopImmediatePropagation()}var be=function(){re.preventDefault(),re.stopImmediatePropagation()},_e=function(t){var e=t.document.documentElement,n=me(t).on("dragstart.drag",be,!0);"onselectstart"in e?n.on("selectstart.drag",be,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function xe(t,e){var n=t.document.documentElement,r=me(t).on("dragstart.drag",null);e&&(r.on("click.drag",be,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var we=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function Me(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ke(){}var Ae="\\s*([+-]?\\d+)\\s*",Se="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ee="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Te=/^#([0-9a-f]{3,8})$/,Ce=new RegExp("^rgb\\("+[Ae,Ae,Ae]+"\\)$"),Oe=new RegExp("^rgb\\("+[Ee,Ee,Ee]+"\\)$"),Pe=new RegExp("^rgba\\("+[Ae,Ae,Ae,Se]+"\\)$"),Ne=new RegExp("^rgba\\("+[Ee,Ee,Ee,Se]+"\\)$"),Be=new RegExp("^hsl\\("+[Se,Ee,Ee]+"\\)$"),De=new RegExp("^hsla\\("+[Se,Ee,Ee,Se]+"\\)$"),ze={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Re(){return this.rgb().formatHex()}function Le(){return this.rgb().formatRgb()}function Ie(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Te.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?je(e):3===n?new qe(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Ue(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Ue(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Ce.exec(t))?new qe(e[1],e[2],e[3],1):(e=Oe.exec(t))?new qe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Pe.exec(t))?Ue(e[1],e[2],e[3],e[4]):(e=Ne.exec(t))?Ue(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Be.exec(t))?Ge(e[1],e[2]/100,e[3]/100,1):(e=De.exec(t))?Ge(e[1],e[2]/100,e[3]/100,e[4]):ze.hasOwnProperty(t)?je(ze[t]):"transparent"===t?new qe(NaN,NaN,NaN,0):null}function je(t){return new qe(t>>16&255,t>>8&255,255&t,1)}function Ue(t,e,n,r){return r<=0&&(t=e=n=NaN),new qe(t,e,n,r)}function Fe(t){return t instanceof ke||(t=Ie(t)),t?new qe((t=t.rgb()).r,t.g,t.b,t.opacity):new qe}function He(t,e,n,r){return 1===arguments.length?Fe(t):new qe(t,e,n,null==r?1:r)}function qe(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Ve(){return"#"+We(this.r)+We(this.g)+We(this.b)}function Ye(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function We(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Ge(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Qe(t,e,n,r)}function Xe(t){if(t instanceof Qe)return new Qe(t.h,t.s,t.l,t.opacity);if(t instanceof ke||(t=Ie(t)),!t)return new Qe;if(t instanceof Qe)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new Qe(a,s,u,t.opacity)}function Ke(t,e,n,r){return 1===arguments.length?Xe(t):new Qe(t,e,n,null==r?1:r)}function Qe(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function $e(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Ze(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}we(ke,Ie,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Re,formatHex:Re,formatHsl:function(){return Xe(this).formatHsl()},formatRgb:Le,toString:Le}),we(qe,He,Me(ke,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new qe(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new qe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ve,formatHex:Ve,formatRgb:Ye,toString:Ye})),we(Qe,Ke,Me(ke,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Qe(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Qe(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new qe($e(t>=240?t-240:t+120,i,r),$e(t,i,r),$e(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Je=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return Ze((n-r/e)*e,a,i,o,s)}},tn=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return Ze((n-r/e)*e,i,o,a,s)}},en=function(t){return function(){return t}};function nn(t,e){return function(n){return t+n*e}}function rn(t,e){var n=e-t;return n?nn(t,n>180||n<-180?n-360*Math.round(n/360):n):en(isNaN(t)?e:t)}function on(t){return 1==(t=+t)?an:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):en(isNaN(e)?n:e)}}function an(t,e){var n=e-t;return n?nn(t,n):en(isNaN(t)?e:t)}var sn=function t(e){var n=on(e);function r(t,e){var r=n((t=He(t)).r,(e=He(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=an(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function un(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=He(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}var cn=un(Je),fn=un(tn),ln=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}};function hn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var dn=function(t,e){return(hn(e)?ln:pn)(t,e)};function pn(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Mn(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}var gn=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},vn=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},mn=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Mn(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},yn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bn=new RegExp(yn.source,"g");var _n,xn,wn=function(t,e){var n,r,i,o=yn.lastIndex=bn.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=yn.exec(t))&&(r=bn.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:vn(n,r)})),o=bn.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},Mn=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?en(e):("number"===r?vn:"string"===r?(n=Ie(e))?(e=n,sn):wn:e instanceof Ie?sn:e instanceof Date?gn:hn(e)?ln:Array.isArray(e)?pn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?mn:vn)(t,e)},kn=function(){for(var t,e=re;t=e.sourceEvent;)e=t;return e},An=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},Sn=function(t,e,n){arguments.length<3&&(n=e,e=kn().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return An(t,r);return null},En=function(t){var e=kn();return e.changedTouches&&(e=e.changedTouches[0]),An(t,e)},Tn=0,Cn=0,On=0,Pn=0,Nn=0,Bn=0,Dn="object"==typeof performance&&performance.now?performance:Date,zn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Rn(){return Nn||(zn(Ln),Nn=Dn.now()+Bn)}function Ln(){Nn=0}function In(){this._call=this._time=this._next=null}function jn(t,e,n){var r=new In;return r.restart(t,e,n),r}function Un(){Rn(),++Tn;for(var t,e=_n;e;)(t=Nn-e._time)>=0&&e._call.call(null,t),e=e._next;--Tn}function Fn(){Nn=(Pn=Dn.now())+Bn,Tn=Cn=0;try{Un()}finally{Tn=0,function(){var t,e,n=_n,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:_n=e);xn=t,qn(r)}(),Nn=0}}function Hn(){var t=Dn.now(),e=t-Pn;e>1e3&&(Bn-=e,Pn=t)}function qn(t){Tn||(Cn&&(Cn=clearTimeout(Cn)),t-Nn>24?(t<1/0&&(Cn=setTimeout(Fn,t-Dn.now()-Bn)),On&&(On=clearInterval(On))):(On||(Pn=Dn.now(),On=setInterval(Hn,1e3)),Tn=1,zn(Fn)))}In.prototype=jn.prototype={constructor:In,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Rn():+n)+(null==e?0:+e),this._next||xn===this||(xn?xn._next=this:_n=this,xn=this),this._call=t,this._time=n,qn()},stop:function(){this._call&&(this._call=null,this._time=1/0,qn())}};var Vn=function(t,e,n){var r=new In;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r},Yn=Object(ot.dispatch)("start","end","cancel","interrupt"),Wn=[],Gn=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(u){var c,f,l,h;if(1!==n.state)return s();for(c in i)if((h=i[c]).name===n.name){if(3===h.state)return Vn(o);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[c]):+c<e&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[c])}if(Vn((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(l=n.tween.length),c=0,f=-1;c<l;++c)(h=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++f]=h);r.length=f+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=jn((function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:Yn,tween:Wn,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})};function Xn(t,e){var n=Qn(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Kn(t,e){var n=Qn(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Qn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var $n,Zn,Jn,tr,er=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}},nr=180/Math.PI,rr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},ir=function(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*nr,skewX:Math.atan(u)*nr,scaleX:a,scaleY:s}};function or(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:vn(t,i)},{i:u-2,x:vn(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:vn(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:vn(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,u),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:vn(t,n)},{i:s-2,x:vn(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var ar=or((function(t){return"none"===t?rr:($n||($n=document.createElement("DIV"),Zn=document.documentElement,Jn=document.defaultView),$n.style.transform=t,t=Jn.getComputedStyle(Zn.appendChild($n),null).getPropertyValue("transform"),Zn.removeChild($n),t=t.slice(7,-1).split(","),ir(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),sr=or((function(t){return null==t?rr:(tr||(tr=document.createElementNS("http://www.w3.org/2000/svg","g")),tr.setAttribute("transform",t),(t=tr.transform.baseVal.consolidate())?(t=t.matrix,ir(t.a,t.b,t.c,t.d,t.e,t.f)):rr)}),", ",")",")");function ur(t,e){var n,r;return function(){var i=Kn(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function cr(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Kn(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=s;break}u===c&&i.push(s)}o.tween=i}}function fr(t,e,n){var r=t._id;return t.each((function(){var t=Kn(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Qn(t,r).value[e]}}var lr=function(t,e){var n;return("number"==typeof e?vn:e instanceof Ie?sn:(n=Ie(e))?(e=n,sn):wn)(t,e)};function hr(t){return function(){this.removeAttribute(t)}}function dr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function pr(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function gr(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function vr(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(t))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttribute(t)}}function mr(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttributeNS(t.space,t.local)}}function yr(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function br(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function _r(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&br(t,i)),n}return i._value=e,i}function xr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&yr(t,i)),n}return i._value=e,i}function wr(t,e){return function(){Xn(this,t).delay=+e.apply(this,arguments)}}function Mr(t,e){return e=+e,function(){Xn(this,t).delay=e}}function kr(t,e){return function(){Kn(this,t).duration=+e.apply(this,arguments)}}function Ar(t,e){return e=+e,function(){Kn(this,t).duration=e}}function Sr(t,e){if("function"!=typeof e)throw new Error;return function(){Kn(this,t).ease=e}}function Er(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Xn:Kn;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}var Tr=ve.prototype.constructor;function Cr(t){return function(){this.style.removeProperty(t)}}function Or(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Pr(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Or(t,o,n)),r}return o._value=e,o}function Nr(t){return function(e){this.textContent=t.call(this,e)}}function Br(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Nr(r)),e}return r._value=t,r}var Dr=0;function zr(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Rr(t){return ve().transition(t)}function Lr(){return++Dr}var Ir=ve.prototype;function jr(t){return t*t*t}function Ur(t){return--t*t*t+1}function Fr(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}zr.prototype=Rr.prototype={constructor:zr,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=st(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,c=r[a],f=c.length,l=o[a]=new Array(f),h=0;h<f;++h)(s=c[h])&&(u=t.call(s,s.__data__,h,c))&&("__data__"in s&&(u.__data__=s.__data__),l[h]=u,Gn(l[h],e,n,h,l,Qn(s,n)));return new zr(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ct(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,c=r[s],f=c.length,l=0;l<f;++l)if(u=c[l]){for(var h,d=t.call(u,u.__data__,l,c),p=Qn(u,n),g=0,v=d.length;g<v;++g)(h=d[g])&&Gn(h,e,n,g,d,p);o.push(d),a.push(u)}return new zr(o,a,e,n)},filter:function(t){"function"!=typeof t&&(t=ft(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new zr(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],f=n[s],l=c.length,h=a[s]=new Array(l),d=0;d<l;++d)(u=c[d]||f[d])&&(h[d]=u);for(;s<r;++s)a[s]=e[s];return new zr(a,this._parents,this._name,this._id)},selection:function(){return new Tr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Lr(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)if(a=s[c]){var f=Qn(a,e);Gn(a,t,n,c,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new zr(r,this._parents,t,n)},call:Ir.call,nodes:Ir.nodes,node:Ir.node,size:Ir.size,empty:Ir.empty,each:Ir.each,on:function(t,e){var n=this._id;return arguments.length<2?Qn(this.node(),n).on.on(t):this.each(Er(n,t,e))},attr:function(t,e){var n=yt(t),r="transform"===n?sr:lr;return this.attrTween(t,"function"==typeof e?(n.local?mr:vr)(n,r,fr(this,"attr."+t,e)):null==e?(n.local?dr:hr)(n):(n.local?gr:pr)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=yt(t);return this.tween(n,(r.local?_r:xr)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?ar:lr;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=Ct(this,t),a=(this.style.removeProperty(t),Ct(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,Cr(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=Ct(this,t),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=Ct(this,t)),a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,s))}}(t,r,fr(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,s="end."+a;return function(){var u=Kn(this,t),c=u.on,f=null==u.value[a]?o||(o=Cr(e)):void 0;c===n&&i===f||(r=(n=c).copy()).on(s,i=f),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=Ct(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Pr(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(fr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Br(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Qn(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?ur:cr)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?wr:Mr)(e,t)):Qn(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?kr:Ar)(e,t)):Qn(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Sr(e,t)):Qn(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};n.each((function(){var n=Kn(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),n.on=e}))}))}};var Hr={time:null,delay:0,duration:250,ease:Fr};function qr(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Hr.time=Rn(),Hr;return n}ve.prototype.interrupt=function(t){return this.each((function(){er(this,t)}))},ve.prototype.transition=function(t){var e,n;t instanceof zr?(e=t._id,t=t._name):(e=Lr(),(n=Hr).time=Rn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)(a=s[c])&&Gn(a,t,e,c,s,n||qr(a,e));return new zr(r,this._parents,t,e)};var Vr=[null],Yr=function(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if((n=i[r]).state>1&&n.name===e)return new zr([[t]],Vr,e,+r);return null},Wr=function(t){return function(){return t}},Gr=function(t,e,n){this.target=t,this.type=e,this.selection=n};function Xr(){re.stopImmediatePropagation()}var Kr=function(){re.preventDefault(),re.stopImmediatePropagation()},Qr={name:"drag"},$r={name:"space"},Zr={name:"handle"},Jr={name:"center"};function ti(t){return[+t[0],+t[1]]}function ei(t){return[ti(t[0]),ti(t[1])]}function ni(t){return function(e){return Sn(e,re.touches,t)}}var ri={name:"x",handles:["w","e"].map(li),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},ii={name:"y",handles:["n","s"].map(li),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},oi={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(li),input:function(t){return null==t?null:ei(t)},output:function(t){return t}},ai={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},si={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ui={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ci={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},fi={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function li(t){return{type:t}}function hi(){return!re.ctrlKey&&!re.button}function di(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function pi(){return navigator.maxTouchPoints||"ontouchstart"in this}function gi(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function vi(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function mi(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function yi(){return xi(ri)}function bi(){return xi(ii)}var _i=function(){return xi(oi)};function xi(t){var e,n=di,r=hi,i=pi,o=!0,a=Object(ot.dispatch)("start","brush","end"),s=6;function u(e){var n=e.property("__brush",g).selectAll(".overlay").data([li("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ai.overlay).merge(n).each((function(){var t=gi(this).extent;me(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([li("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ai.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return ai[t.type]})),e.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(i).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var t=me(this),e=gi(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+s:s})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+s:s}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(t,e,n){return!n&&t.__brush.emitter||new l(t,e)}function l(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function h(){if((!e||re.touches)&&r.apply(this,arguments)){var n,i,a,s,u,l,h,d,p,g,v,m=this,y=re.target.__data__.type,b="selection"===(o&&re.metaKey?y="overlay":y)?Qr:o&&re.altKey?Jr:Zr,_=t===ii?null:ci[y],x=t===ri?null:fi[y],w=gi(m),M=w.extent,k=w.selection,A=M[0][0],S=M[0][1],E=M[1][0],T=M[1][1],C=0,O=0,P=_&&x&&o&&re.shiftKey,N=re.touches?ni(re.changedTouches[0].identifier):En,B=N(m),D=B,z=f(m,arguments,!0).beforestart();"overlay"===y?(k&&(p=!0),w.selection=k=[[n=t===ii?A:B[0],a=t===ri?S:B[1]],[u=t===ii?E:n,h=t===ri?T:a]]):(n=k[0][0],a=k[0][1],u=k[1][0],h=k[1][1]),i=n,s=a,l=u,d=h;var R=me(m).attr("pointer-events","none"),L=R.selectAll(".overlay").attr("cursor",ai[y]);if(re.touches)z.moved=j,z.ended=F;else{var I=me(re.view).on("mousemove.brush",j,!0).on("mouseup.brush",F,!0);o&&I.on("keydown.brush",H,!0).on("keyup.brush",q,!0),_e(re.view)}Xr(),er(m),c.call(m),z.start()}function j(){var t=N(m);!P||g||v||(Math.abs(t[0]-D[0])>Math.abs(t[1]-D[1])?v=!0:g=!0),D=t,p=!0,Kr(),U()}function U(){var t;switch(C=D[0]-B[0],O=D[1]-B[1],b){case $r:case Qr:_&&(C=Math.max(A-n,Math.min(E-u,C)),i=n+C,l=u+C),x&&(O=Math.max(S-a,Math.min(T-h,O)),s=a+O,d=h+O);break;case Zr:_<0?(C=Math.max(A-n,Math.min(E-n,C)),i=n+C,l=u):_>0&&(C=Math.max(A-u,Math.min(E-u,C)),i=n,l=u+C),x<0?(O=Math.max(S-a,Math.min(T-a,O)),s=a+O,d=h):x>0&&(O=Math.max(S-h,Math.min(T-h,O)),s=a,d=h+O);break;case Jr:_&&(i=Math.max(A,Math.min(E,n-C*_)),l=Math.max(A,Math.min(E,u+C*_))),x&&(s=Math.max(S,Math.min(T,a-O*x)),d=Math.max(S,Math.min(T,h+O*x)))}l<i&&(_*=-1,t=n,n=u,u=t,t=i,i=l,l=t,y in si&&L.attr("cursor",ai[y=si[y]])),d<s&&(x*=-1,t=a,a=h,h=t,t=s,s=d,d=t,y in ui&&L.attr("cursor",ai[y=ui[y]])),w.selection&&(k=w.selection),g&&(i=k[0][0],l=k[1][0]),v&&(s=k[0][1],d=k[1][1]),k[0][0]===i&&k[0][1]===s&&k[1][0]===l&&k[1][1]===d||(w.selection=[[i,s],[l,d]],c.call(m),z.brush())}function F(){if(Xr(),re.touches){if(re.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else xe(re.view,p),I.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);R.attr("pointer-events","all"),L.attr("cursor",ai.overlay),w.selection&&(k=w.selection),vi(k)&&(w.selection=null,c.call(m)),z.end()}function H(){switch(re.keyCode){case 16:P=_&&x;break;case 18:b===Zr&&(_&&(u=l-C*_,n=i+C*_),x&&(h=d-O*x,a=s+O*x),b=Jr,U());break;case 32:b!==Zr&&b!==Jr||(_<0?u=l-C:_>0&&(n=i-C),x<0?h=d-O:x>0&&(a=s-O),b=$r,L.attr("cursor",ai.selection),U());break;default:return}Kr()}function q(){switch(re.keyCode){case 16:P&&(g=v=P=!1,U());break;case 18:b===Jr&&(_<0?u=l:_>0&&(n=i),x<0?h=d:x>0&&(a=s),b=Zr,U());break;case 32:b===$r&&(re.altKey?(_&&(u=l-C*_,n=i+C*_),x&&(h=d-O*x,a=s+O*x),b=Jr):(_<0?u=l:_>0&&(n=i),x<0?h=d:x>0&&(a=s),b=Zr),L.attr("cursor",ai[y]),U());break;default:return}Kr()}}function d(){f(this,arguments).moved()}function p(){f(this,arguments).ended()}function g(){var e=this.__brush||{selection:null};return e.extent=ei(n.apply(this,arguments)),e.dim=t,e}return u.move=function(e,n){e.selection?e.on("start.brush",(function(){f(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){f(this,arguments).end()})).tween("brush",(function(){var e=this,r=e.__brush,i=f(e,arguments),o=r.selection,a=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=Mn(o,a);function u(t){r.selection=1===t&&null===a?null:s(t),c.call(e),i.brush()}return null!==o&&null!==a?u:u(1)})):e.each((function(){var e=this,r=arguments,i=e.__brush,o=t.input("function"==typeof n?n.apply(e,r):n,i.extent),a=f(e,r).beforestart();er(e),i.selection=null===o?null:o,c.call(e),a.start().brush().end()}))},u.clear=function(t){u.move(t,null)},l.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){ce(new Gr(u,e,t.output(this.state.selection)),a.apply,a,[e,this.that,this.args])}},u.extent=function(t){return arguments.length?(n="function"==typeof t?t:Wr(ei(t)),u):n},u.filter=function(t){return arguments.length?(r="function"==typeof t?t:Wr(!!t),u):r},u.touchable=function(t){return arguments.length?(i="function"==typeof t?t:Wr(!!t),u):i},u.handleSize=function(t){return arguments.length?(s=+t,u):s},u.keyModifiers=function(t){return arguments.length?(o=!!t,u):o},u.on=function(){var t=a.on.apply(a,arguments);return t===a?u:t},u}var wi=Math.cos,Mi=Math.sin,ki=Math.PI,Ai=ki/2,Si=2*ki,Ei=Math.max;function Ti(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}var Ci=function(){var t=0,e=null,n=null,r=null;function i(i){var o,a,s,u,c,f,l=i.length,h=[],d=M(l),p=[],g=[],v=g.groups=new Array(l),m=new Array(l*l);for(o=0,c=-1;++c<l;){for(a=0,f=-1;++f<l;)a+=i[c][f];h.push(a),p.push(M(l)),o+=a}for(e&&d.sort((function(t,n){return e(h[t],h[n])})),n&&p.forEach((function(t,e){t.sort((function(t,r){return n(i[e][t],i[e][r])}))})),u=(o=Ei(0,Si-t*l)/o)?t:Si/l,a=0,c=-1;++c<l;){for(s=a,f=-1;++f<l;){var y=d[c],b=p[y][f],_=i[y][b],x=a,w=a+=_*o;m[b*l+y]={index:y,subindex:b,startAngle:x,endAngle:w,value:_}}v[y]={index:y,startAngle:s,endAngle:a,value:h[y]},a+=u}for(c=-1;++c<l;)for(f=c-1;++f<l;){var k=m[f*l+c],A=m[c*l+f];(k.value||A.value)&&g.push(k.value<A.value?{source:A,target:k}:{source:k,target:A})}return r?g.sort(r):g}return i.padAngle=function(e){return arguments.length?(t=Ei(0,e),i):t},i.sortGroups=function(t){return arguments.length?(e=t,i):e},i.sortSubgroups=function(t){return arguments.length?(n=t,i):n},i.sortChords=function(t){return arguments.length?(null==t?r=null:(r=Ti(t))._=t,i):r&&r._},i},Oi=Array.prototype.slice,Pi=function(t){return function(){return t}},Ni=Math.PI,Bi=2*Ni,Di=Bi-1e-6;function zi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ri(){return new zi}zi.prototype=Ri.prototype={constructor:zi,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,c=o-t,f=a-e,l=c*c+f*f;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(l>1e-6)if(Math.abs(f*s-u*c)>1e-6&&i){var h=n-o,d=r-a,p=s*s+u*u,g=h*h+d*d,v=Math.sqrt(p),m=Math.sqrt(l),y=i*Math.tan((Ni-Math.acos((p+l-g)/(2*v*m)))/2),b=y/m,_=y/v;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*c)+","+(e+b*f)),this._+="A"+i+","+i+",0,0,"+ +(f*h>c*d)+","+(this._x1=t+_*s)+","+(this._y1=e+_*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+a,c=e+s,f=1^o,l=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+u+","+c),n&&(l<0&&(l=l%Bi+Bi),l>Di?this._+="A"+n+","+n+",0,1,"+f+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+f+","+(this._x1=u)+","+(this._y1=c):l>1e-6&&(this._+="A"+n+","+n+",0,"+ +(l>=Ni)+","+f+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Li=Ri;function Ii(t){return t.source}function ji(t){return t.target}function Ui(t){return t.radius}function Fi(t){return t.startAngle}function Hi(t){return t.endAngle}var qi=function(){var t=Ii,e=ji,n=Ui,r=Fi,i=Hi,o=null;function a(){var a,s=Oi.call(arguments),u=t.apply(this,s),c=e.apply(this,s),f=+n.apply(this,(s[0]=u,s)),l=r.apply(this,s)-Ai,h=i.apply(this,s)-Ai,d=f*wi(l),p=f*Mi(l),g=+n.apply(this,(s[0]=c,s)),v=r.apply(this,s)-Ai,m=i.apply(this,s)-Ai;if(o||(o=a=Li()),o.moveTo(d,p),o.arc(0,0,f,l,h),l===v&&h===m||(o.quadraticCurveTo(0,0,g*wi(v),g*Mi(v)),o.arc(0,0,g,v,m)),o.quadraticCurveTo(0,0,d,p),o.closePath(),a)return o=null,a+""||null}return a.radius=function(t){return arguments.length?(n="function"==typeof t?t:Pi(+t),a):n},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Pi(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Pi(+t),a):i},a.source=function(e){return arguments.length?(t=e,a):t},a.target=function(t){return arguments.length?(e=t,a):e},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a};function Vi(){}function Yi(t,e){var n=new Vi;if(t instanceof Vi)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}Vi.prototype=Yi.prototype={constructor:Vi,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Wi=Yi,Gi=function(){var t,e,n,r=[],i=[];function o(n,i,a,s){if(i>=r.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var u,c,f,l=-1,h=n.length,d=r[i++],p=Wi(),g=a();++l<h;)(f=p.get(u=d(c=n[l])+""))?f.push(c):p.set(u,[c]);return p.each((function(t,e){s(g,e,o(t,i,a,s))})),g}return n={object:function(t){return o(t,0,Xi,Ki)},map:function(t){return o(t,0,Qi,$i)},entries:function(t){return function t(n,o){if(++o>r.length)return n;var a,s=i[o-1];return null!=e&&o>=r.length?a=n.entries():(a=[],n.each((function(e,n){a.push({key:n,values:t(e,o)})}))),null!=s?a.sort((function(t,e){return s(t.key,e.key)})):a}(o(t,0,Qi,$i),0)},key:function(t){return r.push(t),n},sortKeys:function(t){return i[r.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}};function Xi(){return{}}function Ki(t,e,n){t[e]=n}function Qi(){return Wi()}function $i(t,e,n){t.set(e,n)}function Zi(){}var Ji=Wi.prototype;function to(t,e){var n=new Zi;if(t instanceof Zi)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}Zi.prototype=to.prototype={constructor:Zi,has:Ji.has,add:function(t){return this["$"+(t+="")]=t,this},remove:Ji.remove,clear:Ji.clear,values:Ji.keys,size:Ji.size,empty:Ji.empty,each:Ji.each};var eo=to,no=function(t){var e=[];for(var n in t)e.push(n);return e},ro=function(t){var e=[];for(var n in t)e.push(t[n]);return e},io=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},oo=Math.PI/180,ao=180/Math.PI;function so(t){if(t instanceof fo)return new fo(t.l,t.a,t.b,t.opacity);if(t instanceof bo)return _o(t);t instanceof qe||(t=Fe(t));var e,n,r=go(t.r),i=go(t.g),o=go(t.b),a=lo((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?e=n=a:(e=lo((.4360747*r+.3850649*i+.1430804*o)/.96422),n=lo((.0139322*r+.0971045*i+.7141733*o)/.82521)),new fo(116*a-16,500*(e-a),200*(a-n),t.opacity)}function uo(t,e){return new fo(t,0,0,null==e?1:e)}function co(t,e,n,r){return 1===arguments.length?so(t):new fo(t,e,n,null==r?1:r)}function fo(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function lo(t){return t>6/29*(6/29)*(6/29)?Math.pow(t,1/3):t/(6/29*3*(6/29))+4/29}function ho(t){return t>6/29?t*t*t:6/29*3*(6/29)*(t-4/29)}function po(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function go(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function vo(t){if(t instanceof bo)return new bo(t.h,t.c,t.l,t.opacity);if(t instanceof fo||(t=so(t)),0===t.a&&0===t.b)return new bo(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*ao;return new bo(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function mo(t,e,n,r){return 1===arguments.length?vo(t):new bo(n,e,t,null==r?1:r)}function yo(t,e,n,r){return 1===arguments.length?vo(t):new bo(t,e,n,null==r?1:r)}function bo(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function _o(t){if(isNaN(t.h))return new fo(t.l,0,0,t.opacity);var e=t.h*oo;return new fo(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}we(fo,co,Me(ke,{brighter:function(t){return new fo(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new fo(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new qe(po(3.1338561*(e=.96422*ho(e))-1.6168667*(t=1*ho(t))-.4906146*(n=.82521*ho(n))),po(-.9787684*e+1.9161415*t+.033454*n),po(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),we(bo,yo,Me(ke,{brighter:function(t){return new bo(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new bo(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return _o(this).rgb()}}));var xo=-.29227,wo=-1.7884503806,Mo=3.5172982438,ko=-.6557636667999999;function Ao(t){if(t instanceof Eo)return new Eo(t.h,t.s,t.l,t.opacity);t instanceof qe||(t=Fe(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(ko*r+wo*e-Mo*n)/(ko+wo-Mo),o=r-i,a=(1.97294*(n-i)-xo*o)/-.90649,s=Math.sqrt(a*a+o*o)/(1.97294*i*(1-i)),u=s?Math.atan2(a,o)*ao-120:NaN;return new Eo(u<0?u+360:u,s,i,t.opacity)}function So(t,e,n,r){return 1===arguments.length?Ao(t):new Eo(t,e,n,null==r?1:r)}function Eo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}we(Eo,So,Me(ke,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Eo(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Eo(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*oo,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new qe(255*(e+n*(-.14861*r+1.78277*i)),255*(e+n*(xo*r+-.90649*i)),255*(e+n*(1.97294*r)),this.opacity)}}));var To=Array.prototype.slice,Co=function(t,e){return t-e},Oo=function(t){return function(){return t}},Po=function(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=No(t,e[r]))return n;return 0};function No(t,e){for(var n=e[0],r=e[1],i=-1,o=0,a=t.length,s=a-1;o<a;s=o++){var u=t[o],c=u[0],f=u[1],l=t[s],h=l[0],d=l[1];if(Bo(u,l,e))return 0;f>r!=d>r&&n<(h-c)*(r-f)/(d-f)+c&&(i=-i)}return i}function Bo(t,e,n){var r,i,o,a;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(i=t[r=+(t[0]===e[0])],o=n[r],a=e[r],i<=o&&o<=a||a<=o&&o<=i)}var Do=function(){},zo=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],Ro=function(){var t=1,e=1,n=O,r=s;function i(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(Co);else{var r=m(t),i=r[0],a=r[1];e=C(i,a,e),e=M(Math.floor(i/e)*e,Math.floor(a/e)*e,e)}return e.map((function(e){return o(t,e)}))}function o(n,i){var o=[],s=[];return function(n,r,i){var o,s,u,c,f,l,h=new Array,d=new Array;o=s=-1,c=n[0]>=r,zo[c<<1].forEach(p);for(;++o<t-1;)u=c,c=n[o+1]>=r,zo[u|c<<1].forEach(p);zo[c<<0].forEach(p);for(;++s<e-1;){for(o=-1,c=n[s*t+t]>=r,f=n[s*t]>=r,zo[c<<1|f<<2].forEach(p);++o<t-1;)u=c,c=n[s*t+t+o+1]>=r,l=f,f=n[s*t+o+1]>=r,zo[u|c<<1|f<<2|l<<3].forEach(p);zo[c|f<<3].forEach(p)}o=-1,f=n[s*t]>=r,zo[f<<2].forEach(p);for(;++o<t-1;)l=f,f=n[s*t+o+1]>=r,zo[f<<2|l<<3].forEach(p);function p(t){var e,n,r=[t[0][0]+o,t[0][1]+s],u=[t[1][0]+o,t[1][1]+s],c=a(r),f=a(u);(e=d[c])?(n=h[f])?(delete d[e.end],delete h[n.start],e===n?(e.ring.push(u),i(e.ring)):h[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete d[e.end],e.ring.push(u),d[e.end=f]=e):(e=h[f])?(n=d[c])?(delete h[e.start],delete d[n.end],e===n?(e.ring.push(u),i(e.ring)):h[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete h[e.start],e.ring.unshift(r),h[e.start=c]=e):h[c]=d[f]={start:c,end:f,ring:[r,u]}}zo[f<<3].forEach(p)}(n,i,(function(t){r(t,n,i),function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}(t)>0?o.push([t]):s.push(t)})),s.forEach((function(t){for(var e,n=0,r=o.length;n<r;++n)if(-1!==Po((e=o[n])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:i,coordinates:o}}function a(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,r,i){n.forEach((function(n){var o,a=n[0],s=n[1],u=0|a,c=0|s,f=r[c*t+u];a>0&&a<t&&u===a&&(o=r[c*t+u-1],n[0]=a+(i-o)/(f-o)-.5),s>0&&s<e&&c===s&&(o=r[(c-1)*t+u],n[1]=s+(i-o)/(f-o)-.5)}))}return i.contour=o,i.size=function(n){if(!arguments.length)return[t,e];var r=Math.ceil(n[0]),o=Math.ceil(n[1]);if(!(r>0&&o>0))throw new Error("invalid size");return t=r,e=o,i},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?Oo(To.call(t)):Oo(t),i):n},i.smooth=function(t){return arguments.length?(r=t?s:Do,i):r===s},i};function Lo(t,e,n){for(var r=t.width,i=t.height,o=1+(n<<1),a=0;a<i;++a)for(var s=0,u=0;s<r+n;++s)s<r&&(u+=t.data[s+a*r]),s>=n&&(s>=o&&(u-=t.data[s-o+a*r]),e.data[s-n+a*r]=u/Math.min(s+1,r-1+o-s,o))}function Io(t,e,n){for(var r=t.width,i=t.height,o=1+(n<<1),a=0;a<r;++a)for(var s=0,u=0;s<i+n;++s)s<i&&(u+=t.data[a+s*r]),s>=n&&(s>=o&&(u-=t.data[a+(s-o)*r]),e.data[a+(s-n)*r]=u/Math.min(s+1,i-1+o-s,o))}function jo(t){return t[0]}function Uo(t){return t[1]}function Fo(){return 1}var Ho=function(){var t=jo,e=Uo,n=Fo,r=960,i=500,o=20,a=2,s=3*o,u=r+2*s>>a,c=i+2*s>>a,f=Oo(20);function l(r){var i=new Float32Array(u*c),l=new Float32Array(u*c);r.forEach((function(r,o,f){var l=+t(r,o,f)+s>>a,h=+e(r,o,f)+s>>a,d=+n(r,o,f);l>=0&&l<u&&h>=0&&h<c&&(i[l+h*u]+=d)})),Lo({width:u,height:c,data:i},{width:u,height:c,data:l},o>>a),Io({width:u,height:c,data:l},{width:u,height:c,data:i},o>>a),Lo({width:u,height:c,data:i},{width:u,height:c,data:l},o>>a),Io({width:u,height:c,data:l},{width:u,height:c,data:i},o>>a),Lo({width:u,height:c,data:i},{width:u,height:c,data:l},o>>a),Io({width:u,height:c,data:l},{width:u,height:c,data:i},o>>a);var d=f(i);if(!Array.isArray(d)){var p=z(i);d=C(0,p,d),(d=M(0,Math.floor(p/d)*d,d)).shift()}return Ro().thresholds(d).size([u,c])(i).map(h)}function h(t){return t.value*=Math.pow(2,-2*a),t.coordinates.forEach(d),t}function d(t){t.forEach(p)}function p(t){t.forEach(g)}function g(t){t[0]=t[0]*Math.pow(2,a)-s,t[1]=t[1]*Math.pow(2,a)-s}function v(){return u=r+2*(s=3*o)>>a,c=i+2*s>>a,l}return l.x=function(e){return arguments.length?(t="function"==typeof e?e:Oo(+e),l):t},l.y=function(t){return arguments.length?(e="function"==typeof t?t:Oo(+t),l):e},l.weight=function(t){return arguments.length?(n="function"==typeof t?t:Oo(+t),l):n},l.size=function(t){if(!arguments.length)return[r,i];var e=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(e>=0||e>=0))throw new Error("invalid size");return r=e,i=n,v()},l.cellSize=function(t){if(!arguments.length)return 1<<a;if(!((t=+t)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(t)/Math.LN2),v()},l.thresholds=function(t){return arguments.length?(f="function"==typeof t?t:Array.isArray(t)?Oo(To.call(t)):Oo(t),l):f},l.bandwidth=function(t){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return o=Math.round((Math.sqrt(4*t*t+1)-1)/2),v()},l},qo=function(t){return function(){return t}};function Vo(t,e,n,r,i,o,a,s,u,c){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=s,this.dy=u,this._=c}function Yo(){return!re.ctrlKey&&!re.button}function Wo(){return this.parentNode}function Go(t){return null==t?{x:re.x,y:re.y}:t}function Xo(){return navigator.maxTouchPoints||"ontouchstart"in this}Vo.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Ko=function(){var t,e,n,r,i=Yo,o=Wo,a=Go,s=Xo,u={},c=Object(ot.dispatch)("start","drag","end"),f=0,l=0;function h(t){t.on("mousedown.drag",d).filter(s).on("touchstart.drag",v).on("touchmove.drag",m).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!r&&i.apply(this,arguments)){var a=b("mouse",o.apply(this,arguments),En,this,arguments);a&&(me(re.view).on("mousemove.drag",p,!0).on("mouseup.drag",g,!0),_e(re.view),ye(),n=!1,t=re.clientX,e=re.clientY,a("start"))}}function p(){if(be(),!n){var r=re.clientX-t,i=re.clientY-e;n=r*r+i*i>l}u.mouse("drag")}function g(){me(re.view).on("mousemove.drag mouseup.drag",null),xe(re.view,n),be(),u.mouse("end")}function v(){if(i.apply(this,arguments)){var t,e,n=re.changedTouches,r=o.apply(this,arguments),a=n.length;for(t=0;t<a;++t)(e=b(n[t].identifier,r,Sn,this,arguments))&&(ye(),e("start"))}}function m(){var t,e,n=re.changedTouches,r=n.length;for(t=0;t<r;++t)(e=u[n[t].identifier])&&(be(),e("drag"))}function y(){var t,e,n=re.changedTouches,i=n.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<i;++t)(e=u[n[t].identifier])&&(ye(),e("end"))}function b(t,e,n,r,i){var o,s,l,d=n(e,t),p=c.copy();if(ce(new Vo(h,"beforestart",o,t,f,d[0],d[1],0,0,p),(function(){return null!=(re.subject=o=a.apply(r,i))&&(s=o.x-d[0]||0,l=o.y-d[1]||0,!0)})))return function a(c){var g,v=d;switch(c){case"start":u[t]=a,g=f++;break;case"end":delete u[t],--f;case"drag":d=n(e,t),g=f}ce(new Vo(h,c,o,t,g,d[0]+s,d[1]+l,d[0]-v[0],d[1]-v[1],p),p.apply,p,[c,r,i])}}return h.filter=function(t){return arguments.length?(i="function"==typeof t?t:qo(!!t),h):i},h.container=function(t){return arguments.length?(o="function"==typeof t?t:qo(t),h):o},h.subject=function(t){return arguments.length?(a="function"==typeof t?t:qo(t),h):a},h.touchable=function(t){return arguments.length?(s="function"==typeof t?t:qo(!!t),h):s},h.on=function(){var t=c.on.apply(c,arguments);return t===c?h:t},h.clickDistance=function(t){return arguments.length?(l=(t=+t)*t,h):Math.sqrt(l)},h},Qo={},$o={};function Zo(t){return function(e){var n={};return t.forEach((function(t,r){n[JSON.stringify(t)]=e[r]||""})),n}}function Jo(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function ta(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function ea(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+ta(-e,6):e>9999?"+"+ta(e,6):ta(e,4))+"-"+ta(t.getUTCMonth()+1,2)+"-"+ta(t.getUTCDate(),2)+(o?"T"+ta(n,2)+":"+ta(r,2)+":"+ta(i,2)+"."+ta(o,3)+"Z":i?"T"+ta(n,2)+":"+ta(r,2)+":"+ta(i,2)+"Z":r||n?"T"+ta(n,2)+":"+ta(r,2)+"Z":"")}var na=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,u=o<=0,c=!1;function f(){if(u)return $o;if(c)return c=!1,Qo;var e,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(e=a)>=o?u=!0:10===(r=t.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(e=a++)))c=!0;else if(13===r)c=!0,10===t.charCodeAt(a)&&++a;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=f())!==$o;){for(var l=[];r!==Qo&&r!==$o;)l.push(r),r=f();e&&null==(l=e(l,s++))||i.push(l)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return a(e[t])})).join(t)}))}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?ea(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=Zo(t);return function(r,i){return e(n(r),i,t)}}(t,e):Zo(t)}));return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=Jo(e)),[n.map(a).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Jo(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}},ra=na(","),ia=ra.parse,oa=ra.parseRows,aa=ra.format,sa=ra.formatBody,ua=ra.formatRows,ca=ra.formatRow,fa=ra.formatValue,la=na("\t"),ha=la.parse,da=la.parseRows,pa=la.format,ga=la.formatBody,va=la.formatRows,ma=la.formatRow,ya=la.formatValue;function ba(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;_a&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}var _a=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function xa(t){return+t}function wa(t){return t*t}function Ma(t){return t*(2-t)}function ka(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}var Aa=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),Sa=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Ea=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Ta=Math.PI,Ca=Ta/2;function Oa(t){return 1-Math.cos(t*Ca)}function Pa(t){return Math.sin(t*Ca)}function Na(t){return(1-Math.cos(Ta*t))/2}function Ba(t){return Math.pow(2,10*t-10)}function Da(t){return 1-Math.pow(2,-10*t)}function za(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function Ra(t){return 1-Math.sqrt(1-t*t)}function La(t){return Math.sqrt(1- --t*t)}function Ia(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function ja(t){return 1-Ua(1-t)}function Ua(t){return(t=+t)<4/11?7.5625*t*t:t<8/11?7.5625*(t-=6/11)*t+3/4:t<10/11?7.5625*(t-=9/11)*t+15/16:7.5625*(t-=21/22)*t+63/64}function Fa(t){return((t*=2)<=1?1-Ua(1-t):Ua(t-1)+1)/2}var Ha=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),qa=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),Va=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),Ya=2*Math.PI,Wa=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Ya);function i(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*Ya)},i.period=function(n){return t(e,n)},i}(1,.3),Ga=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Ya);function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*Ya)},i.period=function(n){return t(e,n)},i}(1,.3),Xa=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Ya);function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*Ya)},i.period=function(n){return t(e,n)},i}(1,.3);function Ka(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}var Qa=function(t,e){return fetch(t,e).then(Ka)};function $a(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}var Za=function(t,e){return fetch(t,e).then($a)};function Ja(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var ts=function(t,e){return fetch(t,e).then(Ja)};function es(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),ts(e,n).then((function(e){return t(e,r)}))}}function ns(t,e,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=na(t);return ts(e,n).then((function(t){return i.parse(t,r)}))}var rs=es(ia),is=es(ha),os=function(t,e){return new Promise((function(n,r){var i=new Image;for(var o in e)i[o]=e[o];i.onerror=r,i.onload=function(){n(i)},i.src=t}))};function as(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}var ss=function(t,e){return fetch(t,e).then(as)};function us(t){return function(e,n){return ts(e,n).then((function(e){return(new DOMParser).parseFromString(e,t)}))}}var cs=us("application/xml"),fs=us("text/html"),ls=us("image/svg+xml"),hs=function(t,e){var n;function r(){var r,i,o=n.length,a=0,s=0;for(r=0;r<o;++r)a+=(i=n[r]).x,s+=i.y;for(a=a/o-t,s=s/o-e,r=0;r<o;++r)(i=n[r]).x-=a,i.y-=s}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r},ds=function(t){return function(){return t}},ps=function(){return 1e-6*(Math.random()-.5)};function gs(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,f,l,h,d=t._root,p={data:r},g=t._x0,v=t._y0,m=t._x1,y=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(o=(g+m)/2))?g=o:m=o,(f=n>=(a=(v+y)/2))?v=a:y=a,i=d,!(d=d[l=f<<1|c]))return i[l]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)return p.next=d,i?i[l]=p:t._root=p,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(c=e>=(o=(g+m)/2))?g=o:m=o,(f=n>=(a=(v+y)/2))?v=a:y=a}while((l=f<<1|c)==(h=(u>=a)<<1|s>=o));return i[h]=d,i[l]=p,t}var vs=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function ms(t){return t[0]}function ys(t){return t[1]}function bs(t,e,n){var r=new _s(null==e?ms:e,null==n?ys:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function _s(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function xs(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var ws=bs.prototype=_s.prototype;function Ms(t){return t.x+t.vx}function ks(t){return t.y+t.vy}ws.copy=function(){var t,e,n=new _s(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=xs(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=xs(e));return n},ws.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return gs(this.cover(e,n),e,n,t)},ws.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,c=1/0,f=-1/0,l=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<u&&(u=r),r>f&&(f=r),i<c&&(c=i),i>l&&(l=i));if(u>f||c>l)return this;for(this.cover(u,c).cover(f,l),n=0;n<o;++n)gs(this,a[n],s[n],t[n]);return this},ws.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,u=i-n,c=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=c,c=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},ws.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},ws.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},ws.find=function(t,e,n){var r,i,o,a,s,u,c,f=this._x0,l=this._y0,h=this._x1,d=this._y1,p=[],g=this._root;for(g&&p.push(new vs(g,f,l,h,d)),null==n?n=1/0:(f=t-n,l=e-n,h=t+n,d=e+n,n*=n);u=p.pop();)if(!(!(g=u.node)||(i=u.x0)>h||(o=u.y0)>d||(a=u.x1)<f||(s=u.y1)<l))if(g.length){var v=(i+a)/2,m=(o+s)/2;p.push(new vs(g[3],v,m,a,s),new vs(g[2],i,m,v,s),new vs(g[1],v,o,a,m),new vs(g[0],i,o,v,m)),(c=(e>=m)<<1|t>=v)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=u)}else{var y=t-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),_=y*y+b*b;if(_<n){var x=Math.sqrt(n=_);f=t-x,l=e-x,h=t+x,d=e+x,r=g.data}}return r},ws.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,f,l,h,d=this._root,p=this._x0,g=this._y0,v=this._x1,m=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(s=(p+v)/2))?p=s:v=s,(f=a>=(u=(g+m)/2))?g=u:m=u,e=d,!(d=d[l=f<<1|c]))return this;if(!d.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,h=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[l]=i:delete e[l],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=i,this)},ws.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},ws.root=function(){return this._root},ws.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},ws.visit=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new vs(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var c=(r+o)/2,f=(i+a)/2;(n=u[3])&&s.push(new vs(n,c,f,o,a)),(n=u[2])&&s.push(new vs(n,r,f,c,a)),(n=u[1])&&s.push(new vs(n,c,i,o,f)),(n=u[0])&&s.push(new vs(n,r,i,c,f))}return this},ws.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new vs(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,c=e.y1,f=(a+u)/2,l=(s+c)/2;(o=i[0])&&n.push(new vs(o,a,s,f,l)),(o=i[1])&&n.push(new vs(o,f,s,u,l)),(o=i[2])&&n.push(new vs(o,a,l,f,c)),(o=i[3])&&n.push(new vs(o,f,l,u,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},ws.x=function(t){return arguments.length?(this._x=t,this):this._x},ws.y=function(t){return arguments.length?(this._y=t,this):this._y};var As=function(t){var e,n,r=1,i=1;function o(){for(var t,o,s,u,c,f,l,h=e.length,d=0;d<i;++d)for(o=bs(e,Ms,ks).visitAfter(a),t=0;t<h;++t)s=e[t],f=n[s.index],l=f*f,u=s.x+s.vx,c=s.y+s.vy,o.visit(p);function p(t,e,n,i,o){var a=t.data,h=t.r,d=f+h;if(!a)return e>u+d||i<u-d||n>c+d||o<c-d;if(a.index>s.index){var p=u-a.x-a.vx,g=c-a.y-a.vy,v=p*p+g*g;v<d*d&&(0===p&&(v+=(p=ps())*p),0===g&&(v+=(g=ps())*g),v=(d-(v=Math.sqrt(v)))/v*r,s.vx+=(p*=v)*(d=(h*=h)/(l+h)),s.vy+=(g*=v)*d,a.vx-=p*(d=1-d),a.vy-=g*d)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=ds(null==t?1:+t)),o.initialize=function(t){e=t,s()},o.iterations=function(t){return arguments.length?(i=+t,o):i},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:ds(+e),s(),o):t},o};function Ss(t){return t.index}function Es(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var Ts=function(t){var e,n,r,i,o,a=Ss,s=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=ds(30),c=1;function f(r){for(var i=0,a=t.length;i<c;++i)for(var s,u,f,l,h,d,p,g=0;g<a;++g)u=(s=t[g]).source,l=(f=s.target).x+f.vx-u.x-u.vx||ps(),h=f.y+f.vy-u.y-u.vy||ps(),l*=d=((d=Math.sqrt(l*l+h*h))-n[g])/d*r*e[g],h*=d,f.vx-=l*(p=o[g]),f.vy-=h*p,u.vx+=l*(p=1-p),u.vy+=h*p}function l(){if(r){var s,u,c=r.length,f=t.length,l=Wi(r,a);for(s=0,i=new Array(c);s<f;++s)(u=t[s]).index=s,"object"!=typeof u.source&&(u.source=Es(l,u.source)),"object"!=typeof u.target&&(u.target=Es(l,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(s=0,o=new Array(f);s<f;++s)u=t[s],o[s]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(f),h(),n=new Array(f),d()}}function h(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+s(t[n],n,t)}function d(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),f.initialize=function(t){r=t,l()},f.links=function(e){return arguments.length?(t=e,l(),f):t},f.id=function(t){return arguments.length?(a=t,f):a},f.iterations=function(t){return arguments.length?(c=+t,f):c},f.strength=function(t){return arguments.length?(s="function"==typeof t?t:ds(+t),h(),f):s},f.distance=function(t){return arguments.length?(u="function"==typeof t?t:ds(+t),d(),f):u},f};function Cs(t){return t.x}function Os(t){return t.y}var Ps=Math.PI*(3-Math.sqrt(5)),Ns=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=Wi(),u=jn(f),c=Object(ot.dispatch)("tick","end");function f(){l(),c.call("tick",e),n<r&&(u.stop(),c.call("end",e))}function l(r){var u,c,f=t.length;void 0===r&&(r=1);for(var l=0;l<r;++l)for(n+=(o-n)*i,s.each((function(t){t(n)})),u=0;u<f;++u)null==(c=t[u]).fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return e}function h(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(n),o=n*Ps;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),h(),e={tick:l,restart:function(){return u.restart(f),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,h(),s.each(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},force:function(t,n){return arguments.length>1?(null==n?s.remove(t):s.set(t,d(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,u,c=0,f=t.length;for(null==r?r=1/0:r*=r,c=0;c<f;++c)(a=(i=e-(s=t[c]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}},Bs=function(){var t,e,n,r,i=ds(-30),o=1,a=1/0,s=.81;function u(r){var i,o=t.length,a=bs(t,Cs,Os).visitAfter(f);for(n=r,i=0;i<o;++i)e=t[i],a.visit(l)}function c(){if(t){var e,n,o=t.length;for(r=new Array(o),e=0;e<o;++e)n=t[e],r[n.index]=+i(n,e,t)}}function f(t){var e,n,i,o,a,s=0,u=0;if(t.length){for(i=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,i+=n*e.x,o+=n*e.y);t.x=i/u,t.y=o/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=r[e.data.index]}while(e=e.next)}t.value=s}function l(t,i,u,c){if(!t.value)return!0;var f=t.x-e.x,l=t.y-e.y,h=c-i,d=f*f+l*l;if(h*h/s<d)return d<a&&(0===f&&(d+=(f=ps())*f),0===l&&(d+=(l=ps())*l),d<o&&(d=Math.sqrt(o*d)),e.vx+=f*t.value*n/d,e.vy+=l*t.value*n/d),!0;if(!(t.length||d>=a)){(t.data!==e||t.next)&&(0===f&&(d+=(f=ps())*f),0===l&&(d+=(l=ps())*l),d<o&&(d=Math.sqrt(o*d)));do{t.data!==e&&(h=r[t.data.index]*n/d,e.vx+=f*h,e.vy+=l*h)}while(t=t.next)}}return u.initialize=function(e){t=e,c()},u.strength=function(t){return arguments.length?(i="function"==typeof t?t:ds(+t),c(),u):i},u.distanceMin=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.distanceMax=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.theta=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u},Ds=function(t,e,n){var r,i,o,a=ds(.1);function s(t){for(var a=0,s=r.length;a<s;++a){var u=r[a],c=u.x-e||1e-6,f=u.y-n||1e-6,l=Math.sqrt(c*c+f*f),h=(o[a]-l)*i[a]*t/l;u.vx+=c*h,u.vy+=f*h}}function u(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)o[e]=+t(r[e],e,r),i[e]=isNaN(o[e])?0:+a(r[e],e,r)}}return"function"!=typeof t&&(t=ds(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){r=t,u()},s.strength=function(t){return arguments.length?(a="function"==typeof t?t:ds(+t),u(),s):a},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:ds(+e),u(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s},zs=function(t){var e,n,r,i=ds(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=ds(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:ds(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"==typeof e?e:ds(+e),a(),o):t},o},Rs=function(t){var e,n,r,i=ds(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=ds(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:ds(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"==typeof e?e:ds(+e),a(),o):t},o},Ls=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},Is=function(t){return(t=Ls(Math.abs(t)))?t[1]:NaN},js=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Us(t){if(!(e=js.exec(t)))throw new Error("invalid format: "+t);var e;return new Fs({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Fs(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}Us.prototype=Fs.prototype,Fs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Hs,qs,Vs,Ys,Ws=function(t,e){var n=Ls(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Gs={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Ws(100*t,e)},r:Ws,s:function(t,e){var n=Ls(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Hs=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Ls(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Xs=function(t){return t},Ks=Array.prototype.map,Qs=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],$s=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Xs:(e=Ks.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Xs:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Ks.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"-":t.minus+"",f=void 0===t.nan?"NaN":t.nan+"";function l(t){var e=(t=Us(t)).fill,n=t.align,l=t.sign,h=t.symbol,d=t.zero,p=t.width,g=t.comma,v=t.precision,m=t.trim,y=t.type;"n"===y?(g=!0,y="g"):Gs[y]||(void 0===v&&(v=12),m=!0,y="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===h?o:/[%p]/.test(y)?u:"",x=Gs[y],w=/[defgprs%]/.test(y);function M(t){var i,o,u,h=b,M=_;if("c"===y)M=x(t)+M,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?f:x(Math.abs(t),v),m&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),k&&0==+t&&"+"!==l&&(k=!1),h=(k?"("===l?l:c:"-"===l||"("===l?"":l)+h,M=("s"===y?Qs[8+Hs/3]:"")+M+(k&&"("===l?")":""),w)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){M=(46===u?a+t.slice(i+1):t.slice(i))+M,t=t.slice(0,i);break}}g&&!d&&(t=r(t,1/0));var A=h.length+t.length+M.length,S=A<p?new Array(p-A+1).join(e):"";switch(g&&d&&(t=r(S+t,S.length?p-M.length:1/0),S=""),n){case"<":t=h+t+M+S;break;case"=":t=h+S+t+M;break;case"^":t=S.slice(0,A=S.length>>1)+h+t+M+S.slice(A);break;default:t=S+h+t+M}return s(t)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),M.toString=function(){return t+""},M}return{format:l,formatPrefix:function(t,e){var n=l(((t=Us(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Is(e)/3))),i=Math.pow(10,-r),o=Qs[8+r/3];return function(t){return n(i*t)+o}}}};function Zs(t){return qs=$s(t),Vs=qs.format,Ys=qs.formatPrefix,qs}Zs({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var Js=function(t){return Math.max(0,-Is(Math.abs(t)))},tu=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Is(e)/3)))-Is(Math.abs(t)))},eu=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Is(e)-Is(t))+1},nu=function(){return new ru};function ru(){this.reset()}ru.prototype={constructor:ru,reset:function(){this.s=this.t=0},add:function(t){ou(iu,t,this.t),ou(this,iu.s,this.s),this.s?this.t+=iu.t:this.s=iu.t},valueOf:function(){return this.s}};var iu=new ru;function ou(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var au=Math.PI,su=au/2,uu=au/4,cu=2*au,fu=180/au,lu=au/180,hu=Math.abs,du=Math.atan,pu=Math.atan2,gu=Math.cos,vu=Math.ceil,mu=Math.exp,yu=(Math.floor,Math.log),bu=Math.pow,_u=Math.sin,xu=Math.sign||function(t){return t>0?1:t<0?-1:0},wu=Math.sqrt,Mu=Math.tan;function ku(t){return t>1?0:t<-1?au:Math.acos(t)}function Au(t){return t>1?su:t<-1?-su:Math.asin(t)}function Su(t){return(t=_u(t/2))*t}function Eu(){}function Tu(t,e){t&&Ou.hasOwnProperty(t.type)&&Ou[t.type](t,e)}var Cu={Feature:function(t,e){Tu(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Tu(n[r].geometry,e)}},Ou={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Pu(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Pu(n[r],e,0)},Polygon:function(t,e){Nu(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Nu(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Tu(n[r],e)}};function Pu(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Nu(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Pu(t[n],e,1);e.polygonEnd()}var Bu,Du,zu,Ru,Lu,Iu=function(t,e){t&&Cu.hasOwnProperty(t.type)?Cu[t.type](t,e):Tu(t,e)},ju=nu(),Uu=nu(),Fu={point:Eu,lineStart:Eu,lineEnd:Eu,polygonStart:function(){ju.reset(),Fu.lineStart=Hu,Fu.lineEnd=qu},polygonEnd:function(){var t=+ju;Uu.add(t<0?cu+t:t),this.lineStart=this.lineEnd=this.point=Eu},sphere:function(){Uu.add(cu)}};function Hu(){Fu.point=Vu}function qu(){Yu(Bu,Du)}function Vu(t,e){Fu.point=Yu,Bu=t,Du=e,zu=t*=lu,Ru=gu(e=(e*=lu)/2+uu),Lu=_u(e)}function Yu(t,e){var n=(t*=lu)-zu,r=n>=0?1:-1,i=r*n,o=gu(e=(e*=lu)/2+uu),a=_u(e),s=Lu*a,u=Ru*o+s*gu(i),c=s*r*_u(i);ju.add(pu(c,u)),zu=t,Ru=o,Lu=a}var Wu=function(t){return Uu.reset(),Iu(t,Fu),2*Uu};function Gu(t){return[pu(t[1],t[0]),Au(t[2])]}function Xu(t){var e=t[0],n=t[1],r=gu(n);return[r*gu(e),r*_u(e),_u(n)]}function Ku(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Qu(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function $u(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Zu(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Ju(t){var e=wu(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var tc,ec,nc,rc,ic,oc,ac,sc,uc,cc,fc=nu(),lc={point:hc,lineStart:pc,lineEnd:gc,polygonStart:function(){lc.point=vc,lc.lineStart=mc,lc.lineEnd=yc,fc.reset(),Fu.polygonStart()},polygonEnd:function(){Fu.polygonEnd(),lc.point=hc,lc.lineStart=pc,lc.lineEnd=gc,ju<0?(tc=-(nc=180),ec=-(rc=90)):fc>1e-6?rc=90:fc<-1e-6&&(ec=-90),cc[0]=tc,cc[1]=nc},sphere:function(){tc=-(nc=180),ec=-(rc=90)}};function hc(t,e){uc.push(cc=[tc=t,nc=t]),e<ec&&(ec=e),e>rc&&(rc=e)}function dc(t,e){var n=Xu([t*lu,e*lu]);if(sc){var r=Qu(sc,n),i=Qu([r[1],-r[0],0],r);Ju(i),i=Gu(i);var o,a=t-ic,s=a>0?1:-1,u=i[0]*fu*s,c=hu(a)>180;c^(s*ic<u&&u<s*t)?(o=i[1]*fu)>rc&&(rc=o):c^(s*ic<(u=(u+360)%360-180)&&u<s*t)?(o=-i[1]*fu)<ec&&(ec=o):(e<ec&&(ec=e),e>rc&&(rc=e)),c?t<ic?bc(tc,t)>bc(tc,nc)&&(nc=t):bc(t,nc)>bc(tc,nc)&&(tc=t):nc>=tc?(t<tc&&(tc=t),t>nc&&(nc=t)):t>ic?bc(tc,t)>bc(tc,nc)&&(nc=t):bc(t,nc)>bc(tc,nc)&&(tc=t)}else uc.push(cc=[tc=t,nc=t]);e<ec&&(ec=e),e>rc&&(rc=e),sc=n,ic=t}function pc(){lc.point=dc}function gc(){cc[0]=tc,cc[1]=nc,lc.point=hc,sc=null}function vc(t,e){if(sc){var n=t-ic;fc.add(hu(n)>180?n+(n>0?360:-360):n)}else oc=t,ac=e;Fu.point(t,e),dc(t,e)}function mc(){Fu.lineStart()}function yc(){vc(oc,ac),Fu.lineEnd(),hu(fc)>1e-6&&(tc=-(nc=180)),cc[0]=tc,cc[1]=nc,sc=null}function bc(t,e){return(e-=t)<0?e+360:e}function _c(t,e){return t[0]-e[0]}function xc(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var wc,Mc,kc,Ac,Sc,Ec,Tc,Cc,Oc,Pc,Nc,Bc,Dc,zc,Rc,Lc,Ic=function(t){var e,n,r,i,o,a,s;if(rc=nc=-(tc=ec=1/0),uc=[],Iu(t,lc),n=uc.length){for(uc.sort(_c),e=1,o=[r=uc[0]];e<n;++e)xc(r,(i=uc[e])[0])||xc(r,i[1])?(bc(r[0],i[1])>bc(r[0],r[1])&&(r[1]=i[1]),bc(i[0],r[1])>bc(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)i=o[e],(s=bc(r[1],i[0]))>a&&(a=s,tc=i[0],nc=r[1])}return uc=cc=null,tc===1/0||ec===1/0?[[NaN,NaN],[NaN,NaN]]:[[tc,ec],[nc,rc]]},jc={sphere:Eu,point:Uc,lineStart:Hc,lineEnd:Yc,polygonStart:function(){jc.lineStart=Wc,jc.lineEnd=Gc},polygonEnd:function(){jc.lineStart=Hc,jc.lineEnd=Yc}};function Uc(t,e){t*=lu;var n=gu(e*=lu);Fc(n*gu(t),n*_u(t),_u(e))}function Fc(t,e,n){++wc,kc+=(t-kc)/wc,Ac+=(e-Ac)/wc,Sc+=(n-Sc)/wc}function Hc(){jc.point=qc}function qc(t,e){t*=lu;var n=gu(e*=lu);zc=n*gu(t),Rc=n*_u(t),Lc=_u(e),jc.point=Vc,Fc(zc,Rc,Lc)}function Vc(t,e){t*=lu;var n=gu(e*=lu),r=n*gu(t),i=n*_u(t),o=_u(e),a=pu(wu((a=Rc*o-Lc*i)*a+(a=Lc*r-zc*o)*a+(a=zc*i-Rc*r)*a),zc*r+Rc*i+Lc*o);Mc+=a,Ec+=a*(zc+(zc=r)),Tc+=a*(Rc+(Rc=i)),Cc+=a*(Lc+(Lc=o)),Fc(zc,Rc,Lc)}function Yc(){jc.point=Uc}function Wc(){jc.point=Xc}function Gc(){Kc(Bc,Dc),jc.point=Uc}function Xc(t,e){Bc=t,Dc=e,t*=lu,e*=lu,jc.point=Kc;var n=gu(e);zc=n*gu(t),Rc=n*_u(t),Lc=_u(e),Fc(zc,Rc,Lc)}function Kc(t,e){t*=lu;var n=gu(e*=lu),r=n*gu(t),i=n*_u(t),o=_u(e),a=Rc*o-Lc*i,s=Lc*r-zc*o,u=zc*i-Rc*r,c=wu(a*a+s*s+u*u),f=Au(c),l=c&&-f/c;Oc+=l*a,Pc+=l*s,Nc+=l*u,Mc+=f,Ec+=f*(zc+(zc=r)),Tc+=f*(Rc+(Rc=i)),Cc+=f*(Lc+(Lc=o)),Fc(zc,Rc,Lc)}var Qc=function(t){wc=Mc=kc=Ac=Sc=Ec=Tc=Cc=Oc=Pc=Nc=0,Iu(t,jc);var e=Oc,n=Pc,r=Nc,i=e*e+n*n+r*r;return i<1e-12&&(e=Ec,n=Tc,r=Cc,Mc<1e-6&&(e=kc,n=Ac,r=Sc),(i=e*e+n*n+r*r)<1e-12)?[NaN,NaN]:[pu(n,e)*fu,Au(r/wu(i))*fu]},$c=function(t){return function(){return t}},Zc=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};function Jc(t,e){return[hu(t)>au?t+Math.round(-t/cu)*cu:t,e]}function tf(t,e,n){return(t%=cu)?e||n?Zc(nf(t),rf(e,n)):nf(t):e||n?rf(e,n):Jc}function ef(t){return function(e,n){return[(e+=t)>au?e-cu:e<-au?e+cu:e,n]}}function nf(t){var e=ef(t);return e.invert=ef(-t),e}function rf(t,e){var n=gu(t),r=_u(t),i=gu(e),o=_u(e);function a(t,e){var a=gu(e),s=gu(t)*a,u=_u(t)*a,c=_u(e),f=c*n+s*r;return[pu(u*i-f*o,s*n-c*r),Au(f*i+u*o)]}return a.invert=function(t,e){var a=gu(e),s=gu(t)*a,u=_u(t)*a,c=_u(e),f=c*i-u*o;return[pu(u*i+c*o,s*n+f*r),Au(f*n-s*r)]},a}Jc.invert=Jc;var of=function(t){function e(e){return(e=t(e[0]*lu,e[1]*lu))[0]*=fu,e[1]*=fu,e}return t=tf(t[0]*lu,t[1]*lu,t.length>2?t[2]*lu:0),e.invert=function(e){return(e=t.invert(e[0]*lu,e[1]*lu))[0]*=fu,e[1]*=fu,e},e};function af(t,e,n,r,i,o){if(n){var a=gu(e),s=_u(e),u=r*n;null==i?(i=e+r*cu,o=e-u/2):(i=sf(a,i),o=sf(a,o),(r>0?i<o:i>o)&&(i+=r*cu));for(var c,f=i;r>0?f>o:f<o;f-=u)c=Gu([a,-s*gu(f),-s*_u(f)]),t.point(c[0],c[1])}}function sf(t,e){(e=Xu(e))[0]-=t,Ju(e);var n=ku(-e[1]);return((-e[2]<0?-n:n)+cu-1e-6)%cu}var uf=function(){var t,e,n=$c([0,0]),r=$c(90),i=$c(6),o={point:function(n,r){t.push(n=e(n,r)),n[0]*=fu,n[1]*=fu}};function a(){var a=n.apply(this,arguments),s=r.apply(this,arguments)*lu,u=i.apply(this,arguments)*lu;return t=[],e=tf(-a[0]*lu,-a[1]*lu,0).invert,af(o,s,u,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:$c([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:$c(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:$c(+t),a):i},a},cf=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Eu,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},ff=function(t,e){return hu(t[0]-e[0])<1e-6&&hu(t[1]-e[1])<1e-6};function lf(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var hf=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(ff(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new lf(r,t,null,!0)),u.push(n.o=new lf(r,null,n,!1)),s.push(n=new lf(a,t,null,!1)),u.push(n.o=new lf(a,null,n,!0))}})),s.length){for(u.sort(e),df(s),df(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var c,f,l=s[0];;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,a=c.length;o<a;++o)i.point((f=c[o])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(c=h.p.z,o=c.length-1;o>=0;--o)i.point((f=c[o])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}};function df(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var pf=nu();function gf(t){return hu(t[0])<=au?t[0]:xu(t[0])*((hu(t[0])+au)%cu-au)}var vf=function(t,e){var n=gf(e),r=e[1],i=_u(r),o=[_u(n),-gu(n),0],a=0,s=0;pf.reset(),1===i?r=su+1e-6:-1===i&&(r=-su-1e-6);for(var u=0,c=t.length;u<c;++u)if(l=(f=t[u]).length)for(var f,l,h=f[l-1],d=gf(h),p=h[1]/2+uu,g=_u(p),v=gu(p),m=0;m<l;++m,d=b,g=x,v=w,h=y){var y=f[m],b=gf(y),_=y[1]/2+uu,x=_u(_),w=gu(_),M=b-d,k=M>=0?1:-1,A=k*M,S=A>au,E=g*x;if(pf.add(pu(E*k*_u(A),v*w+E*gu(A))),a+=S?M+k*cu:M,S^d>=n^b>=n){var T=Qu(Xu(h),Xu(y));Ju(T);var C=Qu(o,T);Ju(C);var O=(S^M>=0?-1:1)*Au(C[2]);(r>O||r===O&&(T[0]||T[1]))&&(s+=S^M>=0?1:-1)}}return(a<-1e-6||a<1e-6&&pf<-1e-6)^1&s},mf=function(t,e,n,r){return function(i){var o,a,s,u=e(i),c=cf(),f=e(c),l=!1,h={point:d,lineStart:g,lineEnd:v,polygonStart:function(){h.point=m,h.lineStart=y,h.lineEnd=b,a=[],o=[]},polygonEnd:function(){h.point=d,h.lineStart=g,h.lineEnd=v,a=I(a);var t=vf(o,r);a.length?(l||(i.polygonStart(),l=!0),hf(a,bf,t,n,i)):t&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){u.point(t,e)}function g(){h.point=p,u.lineStart()}function v(){h.point=d,u.lineEnd()}function m(t,e){s.push([t,e]),f.point(t,e)}function y(){f.lineStart(),s=[]}function b(){m(s[0][0],s[0][1]),f.lineEnd();var t,e,n,r,u=f.clean(),h=c.result(),d=h.length;if(s.pop(),o.push(s),s=null,d)if(1&u){if((e=(n=h[0]).length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&u&&h.push(h.pop().concat(h.shift())),a.push(h.filter(yf))}return h}};function yf(t){return t.length>1}function bf(t,e){return((t=t.x)[0]<0?t[1]-su-1e-6:su-t[1])-((e=e.x)[0]<0?e[1]-su-1e-6:su-e[1])}var _f=mf((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?au:-au,u=hu(o-n);hu(u-au)<1e-6?(t.point(n,r=(r+a)/2>0?su:-su),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=au&&(hu(n-i)<1e-6&&(n-=1e-6*i),hu(o-s)<1e-6&&(o-=1e-6*s),r=function(t,e,n,r){var i,o,a=_u(t-n);return hu(a)>1e-6?du((_u(e)*(o=gu(r))*_u(n)-_u(r)*(i=gu(e))*_u(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*su,r.point(-au,i),r.point(0,i),r.point(au,i),r.point(au,0),r.point(au,-i),r.point(0,-i),r.point(-au,-i),r.point(-au,0),r.point(-au,i);else if(hu(t[0]-e[0])>1e-6){var o=t[0]<e[0]?au:-au;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-au,-su]);var xf=function(t){var e=gu(t),n=6*lu,r=e>0,i=hu(e)>1e-6;function o(t,n){return gu(t)*gu(n)>e}function a(t,n,r){var i=[1,0,0],o=Qu(Xu(t),Xu(n)),a=Ku(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var c=e*a/u,f=-e*s/u,l=Qu(i,o),h=Zu(i,c);$u(h,Zu(o,f));var d=l,p=Ku(h,d),g=Ku(d,d),v=p*p-g*(Ku(h,h)-1);if(!(v<0)){var m=wu(v),y=Zu(d,(-p-m)/g);if($u(y,h),y=Gu(y),!r)return y;var b,_=t[0],x=n[0],w=t[1],M=n[1];x<_&&(b=_,_=x,x=b);var k=x-_,A=hu(k-au)<1e-6;if(!A&&M<w&&(b=w,w=M,M=b),A||k<1e-6?A?w+M>0^y[1]<(hu(y[0]-_)<1e-6?w:M):w<=y[1]&&y[1]<=M:k>au^(_<=y[0]&&y[0]<=x)){var S=Zu(d,(-p+m)/g);return $u(S,h),[y,Gu(S)]}}}function s(e,n){var i=r?t:au-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return mf(o,(function(t){var e,n,u,c,f;return{lineStart:function(){c=u=!1,f=1},point:function(l,h){var d,p=[l,h],g=o(l,h),v=r?g?0:s(l,h):g?s(l+(l<0?au:-au),h):0;if(!e&&(c=u=g)&&t.lineStart(),g!==u&&(!(d=a(e,p))||ff(e,d)||ff(p,d))&&(p[0]+=1e-6,p[1]+=1e-6,g=o(p[0],p[1])),g!==u)f=0,g?(t.lineStart(),d=a(p,e),t.point(d[0],d[1])):(d=a(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(i&&e&&r^g){var m;v&n||!(m=a(p,e,!0))||(f=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||e&&ff(e,p)||t.point(p[0],p[1]),e=p,u=g,n=v},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return f|(c&&u)<<1}}}),(function(e,r,i,o){af(o,t,n,i,e,r)}),r?[0,-t]:[-au,t-au])};function wf(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var f=0,l=0;if(null==i||(f=a(i,s))!==(l=a(o,s))||u(i,o)<0^s>0)do{c.point(0===f||3===f?t:n,f>1?r:e)}while((f=(f+s+4)%4)!==l);else c.point(o[0],o[1])}function a(r,i){return hu(r[0]-t)<1e-6?i>0?0:3:hu(r[0]-n)<1e-6?i>0?2:1:hu(r[1]-e)<1e-6?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,c,f,l,h,d,p,g,v,m,y,b=a,_=cf(),x={point:w,lineStart:function(){x.point=M,c&&c.push(f=[]);m=!0,v=!1,p=g=NaN},lineEnd:function(){u&&(M(l,h),d&&v&&_.rejoin(),u.push(_.result()));x.point=w,v&&b.lineEnd()},polygonStart:function(){b=_,u=[],c=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],u=1,f=s.length,l=s[0],h=l[0],d=l[1];u<f;++u)o=h,a=d,l=s[u],h=l[0],d=l[1],a<=r?d>r&&(h-o)*(r-a)>(d-a)*(t-o)&&++e:d<=r&&(h-o)*(r-a)<(d-a)*(t-o)&&--e;return e}(),n=y&&e,i=(u=I(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&hf(u,s,e,o,a),a.polygonEnd());b=a,u=c=f=null}};function w(t,e){i(t,e)&&b.point(t,e)}function M(o,a){var s=i(o,a);if(c&&f.push([o,a]),m)l=o,h=a,d=s,m=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&v)b.point(o,a);else{var u=[p=Math.max(-1e9,Math.min(1e9,p)),g=Math.max(-1e9,Math.min(1e9,g))],_=[o=Math.max(-1e9,Math.min(1e9,o)),a=Math.max(-1e9,Math.min(1e9,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=0,f=1,l=e[0]-s,h=e[1]-u;if(a=n-s,l||!(a>0)){if(a/=l,l<0){if(a<c)return;a<f&&(f=a)}else if(l>0){if(a>f)return;a>c&&(c=a)}if(a=i-s,l||!(a<0)){if(a/=l,l<0){if(a>f)return;a>c&&(c=a)}else if(l>0){if(a<c)return;a<f&&(f=a)}if(a=r-u,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>c&&(c=a)}if(a=o-u,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<f&&(f=a)}return c>0&&(t[0]=s+c*l,t[1]=u+c*h),f<1&&(e[0]=s+f*l,e[1]=u+f*h),!0}}}}}(u,_,t,e,n,r)?s&&(b.lineStart(),b.point(o,a),y=!1):(v||(b.lineStart(),b.point(u[0],u[1])),b.point(_[0],_[1]),s||b.lineEnd(),y=!1)}p=o,g=a,v=s}return x}}var Mf,kf,Af,Sf=function(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=wf(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}},Ef=nu(),Tf={sphere:Eu,point:Eu,lineStart:function(){Tf.point=Of,Tf.lineEnd=Cf},lineEnd:Eu,polygonStart:Eu,polygonEnd:Eu};function Cf(){Tf.point=Tf.lineEnd=Eu}function Of(t,e){Mf=t*=lu,kf=_u(e*=lu),Af=gu(e),Tf.point=Pf}function Pf(t,e){t*=lu;var n=_u(e*=lu),r=gu(e),i=hu(t-Mf),o=gu(i),a=r*_u(i),s=Af*n-kf*r*o,u=kf*n+Af*r*o;Ef.add(pu(wu(a*a+s*s),u)),Mf=t,kf=n,Af=r}var Nf=function(t){return Ef.reset(),Iu(t,Tf),+Ef},Bf=[null,null],Df={type:"LineString",coordinates:Bf},zf=function(t,e){return Bf[0]=t,Bf[1]=e,Nf(Df)},Rf={Feature:function(t,e){return If(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(If(n[r].geometry,e))return!0;return!1}},Lf={Sphere:function(){return!0},Point:function(t,e){return jf(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(jf(n[r],e))return!0;return!1},LineString:function(t,e){return Uf(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Uf(n[r],e))return!0;return!1},Polygon:function(t,e){return Ff(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Ff(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(If(n[r],e))return!0;return!1}};function If(t,e){return!(!t||!Lf.hasOwnProperty(t.type))&&Lf[t.type](t,e)}function jf(t,e){return 0===zf(t,e)}function Uf(t,e){for(var n,r,i,o=0,a=t.length;o<a;o++){if(0===(r=zf(t[o],e)))return!0;if(o>0&&(i=zf(t[o],t[o-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<1e-12*i)return!0;n=r}return!1}function Ff(t,e){return!!vf(t.map(Hf),qf(e))}function Hf(t){return(t=t.map(qf)).pop(),t}function qf(t){return[t[0]*lu,t[1]*lu]}var Vf=function(t,e){return(t&&Rf.hasOwnProperty(t.type)?Rf[t.type]:If)(t,e)};function Yf(t,e,n){var r=M(t,e-1e-6,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function Wf(t,e,n){var r=M(t,e-1e-6,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function Gf(){var t,e,n,r,i,o,a,s,u,c,f,l,h=10,d=h,p=90,g=360,v=2.5;function m(){return{type:"MultiLineString",coordinates:y()}}function y(){return M(vu(r/p)*p,n,p).map(f).concat(M(vu(s/g)*g,a,g).map(l)).concat(M(vu(e/h)*h,t,h).filter((function(t){return hu(t%p)>1e-6})).map(u)).concat(M(vu(o/d)*d,i,d).filter((function(t){return hu(t%g)>1e-6})).map(c))}return m.lines=function(){return y().map((function(t){return{type:"LineString",coordinates:t}}))},m.outline=function(){return{type:"Polygon",coordinates:[f(r).concat(l(a).slice(1),f(n).reverse().slice(1),l(s).reverse().slice(1))]}},m.extent=function(t){return arguments.length?m.extentMajor(t).extentMinor(t):m.extentMinor()},m.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),m.precision(v)):[[r,s],[n,a]]},m.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),m.precision(v)):[[e,o],[t,i]]},m.step=function(t){return arguments.length?m.stepMajor(t).stepMinor(t):m.stepMinor()},m.stepMajor=function(t){return arguments.length?(p=+t[0],g=+t[1],m):[p,g]},m.stepMinor=function(t){return arguments.length?(h=+t[0],d=+t[1],m):[h,d]},m.precision=function(h){return arguments.length?(v=+h,u=Yf(o,i,90),c=Wf(e,t,v),f=Yf(s,a,90),l=Wf(r,n,v),m):v},m.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function Xf(){return Gf()()}var Kf,Qf,$f,Zf,Jf=function(t,e){var n=t[0]*lu,r=t[1]*lu,i=e[0]*lu,o=e[1]*lu,a=gu(r),s=_u(r),u=gu(o),c=_u(o),f=a*gu(n),l=a*_u(n),h=u*gu(i),d=u*_u(i),p=2*Au(wu(Su(o-r)+a*u*Su(i-n))),g=_u(p),v=p?function(t){var e=_u(t*=p)/g,n=_u(p-t)/g,r=n*f+e*h,i=n*l+e*d,o=n*s+e*c;return[pu(i,r)*fu,pu(o,wu(r*r+i*i))*fu]}:function(){return[n*fu,r*fu]};return v.distance=p,v},tl=function(t){return t},el=nu(),nl=nu(),rl={point:Eu,lineStart:Eu,lineEnd:Eu,polygonStart:function(){rl.lineStart=il,rl.lineEnd=sl},polygonEnd:function(){rl.lineStart=rl.lineEnd=rl.point=Eu,el.add(hu(nl)),nl.reset()},result:function(){var t=el/2;return el.reset(),t}};function il(){rl.point=ol}function ol(t,e){rl.point=al,Kf=$f=t,Qf=Zf=e}function al(t,e){nl.add(Zf*t-$f*e),$f=t,Zf=e}function sl(){al(Kf,Qf)}var ul=rl,cl=1/0,fl=cl,ll=-cl,hl=ll;var dl,pl,gl,vl,ml={point:function(t,e){t<cl&&(cl=t);t>ll&&(ll=t);e<fl&&(fl=e);e>hl&&(hl=e)},lineStart:Eu,lineEnd:Eu,polygonStart:Eu,polygonEnd:Eu,result:function(){var t=[[cl,fl],[ll,hl]];return ll=hl=-(fl=cl=1/0),t}},yl=0,bl=0,_l=0,xl=0,wl=0,Ml=0,kl=0,Al=0,Sl=0,El={point:Tl,lineStart:Cl,lineEnd:Nl,polygonStart:function(){El.lineStart=Bl,El.lineEnd=Dl},polygonEnd:function(){El.point=Tl,El.lineStart=Cl,El.lineEnd=Nl},result:function(){var t=Sl?[kl/Sl,Al/Sl]:Ml?[xl/Ml,wl/Ml]:_l?[yl/_l,bl/_l]:[NaN,NaN];return yl=bl=_l=xl=wl=Ml=kl=Al=Sl=0,t}};function Tl(t,e){yl+=t,bl+=e,++_l}function Cl(){El.point=Ol}function Ol(t,e){El.point=Pl,Tl(gl=t,vl=e)}function Pl(t,e){var n=t-gl,r=e-vl,i=wu(n*n+r*r);xl+=i*(gl+t)/2,wl+=i*(vl+e)/2,Ml+=i,Tl(gl=t,vl=e)}function Nl(){El.point=Tl}function Bl(){El.point=zl}function Dl(){Rl(dl,pl)}function zl(t,e){El.point=Rl,Tl(dl=gl=t,pl=vl=e)}function Rl(t,e){var n=t-gl,r=e-vl,i=wu(n*n+r*r);xl+=i*(gl+t)/2,wl+=i*(vl+e)/2,Ml+=i,kl+=(i=vl*t-gl*e)*(gl+t),Al+=i*(vl+e),Sl+=3*i,Tl(gl=t,vl=e)}var Ll=El;function Il(t){this._context=t}Il.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,cu)}},result:Eu};var jl,Ul,Fl,Hl,ql,Vl=nu(),Yl={point:Eu,lineStart:function(){Yl.point=Wl},lineEnd:function(){jl&&Gl(Ul,Fl),Yl.point=Eu},polygonStart:function(){jl=!0},polygonEnd:function(){jl=null},result:function(){var t=+Vl;return Vl.reset(),t}};function Wl(t,e){Yl.point=Gl,Ul=Hl=t,Fl=ql=e}function Gl(t,e){Hl-=t,ql-=e,Vl.add(wu(Hl*Hl+ql*ql)),Hl=t,ql=e}var Xl=Yl;function Kl(){this._string=[]}function Ql(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}Kl.prototype={_radius:4.5,_circle:Ql(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Ql(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var $l=function(t,e){var n,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),Iu(t,n(r))),r.result()}return o.area=function(t){return Iu(t,n(ul)),ul.result()},o.measure=function(t){return Iu(t,n(Xl)),Xl.result()},o.bounds=function(t){return Iu(t,n(ml)),ml.result()},o.centroid=function(t){return Iu(t,n(Ll)),Ll.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,tl):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new Kl):new Il(e=t),"function"!=typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)},Zl=function(t){return{stream:Jl(t)}};function Jl(t){return function(e){var n=new th;for(var r in t)n[r]=t[r];return n.stream=e,n}}function th(){}function eh(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Iu(n,t.stream(ml)),e(ml.result()),null!=r&&t.clipExtent(r),t}function nh(t,e,n){return eh(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function rh(t,e,n){return nh(t,[[0,0],e],n)}function ih(t,e,n){return eh(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function oh(t,e,n){return eh(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}th.prototype={constructor:th,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ah=gu(30*lu),sh=function(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,c,f,l,h,d,p,g,v){var m=c-r,y=f-i,b=m*m+y*y;if(b>4*e&&g--){var _=a+h,x=s+d,w=u+p,M=wu(_*_+x*x+w*w),k=Au(w/=M),A=hu(hu(w)-1)<1e-6||hu(o-l)<1e-6?(o+l)/2:pu(x,_),S=t(A,k),E=S[0],T=S[1],C=E-r,O=T-i,P=y*C-m*O;(P*P/b>e||hu((m*C+y*O)/b-.5)>.3||a*h+s*d+u*p<ah)&&(n(r,i,o,a,s,u,E,T,A,_/=M,x/=M,w,g,v),v.point(E,T),n(E,T,A,_,x,w,c,f,l,h,d,p,g,v))}}return function(e){var r,i,o,a,s,u,c,f,l,h,d,p,g={point:v,lineStart:m,lineEnd:b,polygonStart:function(){e.polygonStart(),g.lineStart=_},polygonEnd:function(){e.polygonEnd(),g.lineStart=m}};function v(n,r){n=t(n,r),e.point(n[0],n[1])}function m(){f=NaN,g.point=y,e.lineStart()}function y(r,i){var o=Xu([r,i]),a=t(r,i);n(f,l,c,h,d,p,f=a[0],l=a[1],c=r,h=o[0],d=o[1],p=o[2],16,e),e.point(f,l)}function b(){g.point=v,e.lineEnd()}function _(){m(),g.point=x,g.lineEnd=w}function x(t,e){y(r=t,e),i=f,o=l,a=h,s=d,u=p,g.point=y}function w(){n(f,l,c,h,d,p,i,o,r,a,s,u,16,e),g.lineEnd=b,b()}return g}}(t,e):function(t){return Jl({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)};var uh=Jl({point:function(t,e){this.stream.point(t*lu,e*lu)}});function ch(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}function fh(t,e,n,r,i,o){var a=gu(o),s=_u(o),u=a*t,c=s*t,f=a/t,l=s/t,h=(s*n-a*e)/t,d=(s*e+a*n)/t;function p(t,o){return[u*(t*=r)-c*(o*=i)+e,n-c*t-u*o]}return p.invert=function(t,e){return[r*(f*t-l*e+h),i*(d-l*t-f*e)]},p}function lh(t){return hh((function(){return t}))()}function hh(t){var e,n,r,i,o,a,s,u,c,f,l=150,h=480,d=250,p=0,g=0,v=0,m=0,y=0,b=0,_=1,x=1,w=null,M=_f,k=null,A=tl,S=.5;function E(t){return u(t[0]*lu,t[1]*lu)}function T(t){return(t=u.invert(t[0],t[1]))&&[t[0]*fu,t[1]*fu]}function C(){var t=fh(l,0,0,_,x,b).apply(null,e(p,g)),r=(b?fh:ch)(l,h-t[0],d-t[1],_,x,b);return n=tf(v,m,y),s=Zc(e,r),u=Zc(n,s),a=sh(s,S),O()}function O(){return c=f=null,E}return E.stream=function(t){return c&&f===t?c:c=uh(function(t){return Jl({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(M(a(A(f=t)))))},E.preclip=function(t){return arguments.length?(M=t,w=void 0,O()):M},E.postclip=function(t){return arguments.length?(A=t,k=r=i=o=null,O()):A},E.clipAngle=function(t){return arguments.length?(M=+t?xf(w=t*lu):(w=null,_f),O()):w*fu},E.clipExtent=function(t){return arguments.length?(A=null==t?(k=r=i=o=null,tl):wf(k=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),O()):null==k?null:[[k,r],[i,o]]},E.scale=function(t){return arguments.length?(l=+t,C()):l},E.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],C()):[h,d]},E.center=function(t){return arguments.length?(p=t[0]%360*lu,g=t[1]%360*lu,C()):[p*fu,g*fu]},E.rotate=function(t){return arguments.length?(v=t[0]%360*lu,m=t[1]%360*lu,y=t.length>2?t[2]%360*lu:0,C()):[v*fu,m*fu,y*fu]},E.angle=function(t){return arguments.length?(b=t%360*lu,C()):b*fu},E.reflectX=function(t){return arguments.length?(_=t?-1:1,C()):_<0},E.reflectY=function(t){return arguments.length?(x=t?-1:1,C()):x<0},E.precision=function(t){return arguments.length?(a=sh(s,S=t*t),O()):wu(S)},E.fitExtent=function(t,e){return nh(E,t,e)},E.fitSize=function(t,e){return rh(E,t,e)},E.fitWidth=function(t,e){return ih(E,t,e)},E.fitHeight=function(t,e){return oh(E,t,e)},function(){return e=t.apply(this,arguments),E.invert=e.invert&&T,C()}}function dh(t){var e=0,n=au/3,r=hh(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*lu,n=t[1]*lu):[e*fu,n*fu]},i}function ph(t,e){var n=_u(t),r=(n+_u(e))/2;if(hu(r)<1e-6)return function(t){var e=gu(t);function n(t,n){return[t*e,_u(n)/e]}return n.invert=function(t,n){return[t/e,Au(n*e)]},n}(t);var i=1+n*(2*r-n),o=wu(i)/r;function a(t,e){var n=wu(i-2*r*_u(e))/r;return[n*_u(t*=r),o-n*gu(t)]}return a.invert=function(t,e){var n=o-e,a=pu(t,hu(n))*xu(n);return n*r<0&&(a-=au*xu(t)*xu(n)),[a/r,Au((i-(t*t+n*n)*r*r)/(2*r))]},a}var gh=function(){return dh(ph).scale(155.424).center([0,33.6442])},vh=function(){return gh().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};var mh=function(){var t,e,n,r,i,o,a=vh(),s=gh().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=gh().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function f(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function l(){return t=e=null,f}return f.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(t)},f.stream=function(n){return t&&e===n?t:(r=[a.stream(e=n),s.stream(n),u.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},f.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),u.precision(t),l()):a.precision()},f.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),u.scale(t),f.translate(a.translate())):a.scale()},f.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],f=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,f-.238*e],[o+.455*e,f+.238*e]]).stream(c),r=s.translate([o-.307*e,f+.201*e]).clipExtent([[o-.425*e+1e-6,f+.12*e+1e-6],[o-.214*e-1e-6,f+.234*e-1e-6]]).stream(c),i=u.translate([o-.205*e,f+.212*e]).clipExtent([[o-.214*e+1e-6,f+.166*e+1e-6],[o-.115*e-1e-6,f+.234*e-1e-6]]).stream(c),l()},f.fitExtent=function(t,e){return nh(f,t,e)},f.fitSize=function(t,e){return rh(f,t,e)},f.fitWidth=function(t,e){return ih(f,t,e)},f.fitHeight=function(t,e){return oh(f,t,e)},f.scale(1070)};function yh(t){return function(e,n){var r=gu(e),i=gu(n),o=t(r*i);return[o*i*_u(e),o*_u(n)]}}function bh(t){return function(e,n){var r=wu(e*e+n*n),i=t(r),o=_u(i),a=gu(i);return[pu(e*o,r*a),Au(r&&n*o/r)]}}var _h=yh((function(t){return wu(2/(1+t))}));_h.invert=bh((function(t){return 2*Au(t/2)}));var xh=function(){return lh(_h).scale(124.75).clipAngle(179.999)},wh=yh((function(t){return(t=ku(t))&&t/_u(t)}));wh.invert=bh((function(t){return t}));var Mh=function(){return lh(wh).scale(79.4188).clipAngle(179.999)};function kh(t,e){return[t,yu(Mu((su+e)/2))]}kh.invert=function(t,e){return[t,2*du(mu(e))-su]};var Ah=function(){return Sh(kh).scale(961/cu)};function Sh(t){var e,n,r,i=lh(t),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,c=null;function f(){var o=au*a(),s=i(of(i.rotate()).invert([0,0]));return u(null==c?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===kh?[[Math.max(s[0]-o,c),e],[Math.min(s[0]+o,n),r]]:[[c,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),f()):a()},i.translate=function(t){return arguments.length?(s(t),f()):s()},i.center=function(t){return arguments.length?(o(t),f()):o()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),f()):null==c?null:[[c,e],[n,r]]},f()}function Eh(t){return Mu((su+t)/2)}function Th(t,e){var n=gu(t),r=t===e?_u(t):yu(n/gu(e))/yu(Eh(e)/Eh(t)),i=n*bu(Eh(t),r)/r;if(!r)return kh;function o(t,e){i>0?e<1e-6-su&&(e=1e-6-su):e>su-1e-6&&(e=su-1e-6);var n=i/bu(Eh(e),r);return[n*_u(r*t),i-n*gu(r*t)]}return o.invert=function(t,e){var n=i-e,o=xu(r)*wu(t*t+n*n),a=pu(t,hu(n))*xu(n);return n*r<0&&(a-=au*xu(t)*xu(n)),[a/r,2*du(bu(i/o,1/r))-su]},o}var Ch=function(){return dh(Th).scale(109.5).parallels([30,30])};function Oh(t,e){return[t,e]}Oh.invert=Oh;var Ph=function(){return lh(Oh).scale(152.63)};function Nh(t,e){var n=gu(t),r=t===e?_u(t):(n-gu(e))/(e-t),i=n/r+t;if(hu(r)<1e-6)return Oh;function o(t,e){var n=i-e,o=r*t;return[n*_u(o),i-n*gu(o)]}return o.invert=function(t,e){var n=i-e,o=pu(t,hu(n))*xu(n);return n*r<0&&(o-=au*xu(t)*xu(n)),[o/r,i-xu(r)*wu(t*t+n*n)]},o}var Bh=function(){return dh(Nh).scale(131.154).center([0,13.9389])},Dh=1.340264,zh=-.081106,Rh=893e-6,Lh=.003796,Ih=wu(3)/2;function jh(t,e){var n=Au(Ih*_u(e)),r=n*n,i=r*r*r;return[t*gu(n)/(Ih*(Dh+3*zh*r+i*(7*Rh+9*Lh*r))),n*(Dh+zh*r+i*(Rh+Lh*r))]}jh.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(Dh+zh*i+o*(Rh+Lh*i))-e)/(Dh+3*zh*i+o*(7*Rh+9*Lh*i)))*r)*i*i,!(hu(n)<1e-12));++a);return[Ih*t*(Dh+3*zh*i+o*(7*Rh+9*Lh*i))/gu(r),Au(_u(r)/Ih)]};var Uh=function(){return lh(jh).scale(177.158)};function Fh(t,e){var n=gu(e),r=gu(t)*n;return[n*_u(t)/r,_u(e)/r]}Fh.invert=bh(du);var Hh=function(){return lh(Fh).scale(144.049).clipAngle(60)},qh=function(){var t,e,n,r,i,o,a,s=1,u=0,c=0,f=1,l=1,h=0,d=null,p=1,g=1,v=Jl({point:function(t,e){var n=b([t,e]);this.stream.point(n[0],n[1])}}),m=tl;function y(){return p=s*f,g=s*l,o=a=null,b}function b(n){var r=n[0]*p,i=n[1]*g;if(h){var o=i*t-r*e;r=r*t+i*e,i=o}return[r+u,i+c]}return b.invert=function(n){var r=n[0]-u,i=n[1]-c;if(h){var o=i*t+r*e;r=r*t-i*e,i=o}return[r/p,i/g]},b.stream=function(t){return o&&a===t?o:o=v(m(a=t))},b.postclip=function(t){return arguments.length?(m=t,d=n=r=i=null,y()):m},b.clipExtent=function(t){return arguments.length?(m=null==t?(d=n=r=i=null,tl):wf(d=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),y()):null==d?null:[[d,n],[r,i]]},b.scale=function(t){return arguments.length?(s=+t,y()):s},b.translate=function(t){return arguments.length?(u=+t[0],c=+t[1],y()):[u,c]},b.angle=function(n){return arguments.length?(e=_u(h=n%360*lu),t=gu(h),y()):h*fu},b.reflectX=function(t){return arguments.length?(f=t?-1:1,y()):f<0},b.reflectY=function(t){return arguments.length?(l=t?-1:1,y()):l<0},b.fitExtent=function(t,e){return nh(b,t,e)},b.fitSize=function(t,e){return rh(b,t,e)},b.fitWidth=function(t,e){return ih(b,t,e)},b.fitHeight=function(t,e){return oh(b,t,e)},b};function Vh(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}Vh.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(hu(n)>1e-6&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};var Yh=function(){return lh(Vh).scale(175.295)};function Wh(t,e){return[gu(e)*_u(t),_u(e)]}Wh.invert=bh(Au);var Gh=function(){return lh(Wh).scale(249.5).clipAngle(90.000001)};function Xh(t,e){var n=gu(e),r=1+gu(t)*n;return[n*_u(t)/r,_u(e)/r]}Xh.invert=bh((function(t){return 2*du(t)}));var Kh=function(){return lh(Xh).scale(250).clipAngle(142)};function Qh(t,e){return[yu(Mu((su+e)/2)),-t]}Qh.invert=function(t,e){return[-e,2*du(mu(t))-su]};var $h=function(){var t=Sh(Qh),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};function Zh(t,e){return t.parent===e.parent?1:2}function Jh(t,e){return t+e.x}function td(t,e){return Math.max(t,e.y)}var ed=function(){var t=Zh,e=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(Jh,0)/t.length}(n),e.y=function(t){return 1+t.reduce(td,0)}(n)):(e.x=o?a+=t(e,o):0,e.y=0,o=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),c=s.x-t(s,u)/2,f=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(f-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i};function nd(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function rd(t,e){var n,r,i,o,a,s=new sd(t),u=+t.value&&(s.value=t.value),c=[s];for(null==e&&(e=id);n=c.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)c.push(r=n.children[o]=new sd(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(ad)}function id(t){return t.children}function od(t){t.data=t.data.data}function ad(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function sd(t){this.data=t,this.depth=this.height=0,this.parent=null}sd.prototype=rd.prototype={constructor:sd,count:function(){return this.eachAfter(nd)},each:function(t){var e,n,r,i,o=this,a=[o];do{for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this},eachAfter:function(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return rd(this).eachBefore(od)}};var ud=Array.prototype.slice;var cd=function(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(ud.call(t))).length,o=[];r<i;)e=t[r],n&&hd(n,e)?++r:(n=pd(o=fd(o,e)),r=0);return n};function fd(t,e){var n,r;if(dd(e,t))return[e];for(n=0;n<t.length;++n)if(ld(e,t[n])&&dd(gd(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(ld(gd(t[n],t[r]),e)&&ld(gd(t[n],e),t[r])&&ld(gd(t[r],e),t[n])&&dd(vd(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function ld(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function hd(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function dd(t,e){for(var n=0;n<e.length;++n)if(!hd(t,e[n]))return!1;return!0}function pd(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return gd(t[0],t[1]);case 3:return vd(t[0],t[1],t[2])}var e}function gd(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,c=a-r,f=s-i,l=Math.sqrt(u*u+c*c);return{x:(n+o+u/l*f)/2,y:(r+a+c/l*f)/2,r:(l+i+s)/2}}function vd(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,c=n.x,f=n.y,l=n.r,h=r-a,d=r-c,p=i-s,g=i-f,v=u-o,m=l-o,y=r*r+i*i-o*o,b=y-a*a-s*s+u*u,_=y-c*c-f*f+l*l,x=d*p-h*g,w=(p*_-g*b)/(2*x)-r,M=(g*v-p*m)/x,k=(d*b-h*_)/(2*x)-i,A=(h*m-d*v)/x,S=M*M+A*A-1,E=2*(o+w*M+k*A),T=w*w+k*k-o*o,C=-(S?(E+Math.sqrt(E*E-4*S*T))/(2*S):T/E);return{x:r+w+M*C,y:i+k+A*C,r:C}}function md(t,e,n){var r,i,o,a,s=t.x-e.x,u=t.y-e.y,c=s*s+u*u;c?(i=e.r+n.r,i*=i,a=t.r+n.r,i>(a*=a)?(r=(c+a-i)/(2*c),o=Math.sqrt(Math.max(0,a/c-r*r)),n.x=t.x-r*s-o*u,n.y=t.y-r*u+o*s):(r=(c+i-a)/(2*c),o=Math.sqrt(Math.max(0,i/c-r*r)),n.x=e.x+r*s-o*u,n.y=e.y+r*u+o*s)):(n.x=e.x+n.r,n.y=e.y)}function yd(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function bd(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function _d(t){this._=t,this.next=null,this.previous=null}function xd(t){if(!(i=t.length))return 0;var e,n,r,i,o,a,s,u,c,f,l;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;md(n,e,r=t[2]),e=new _d(e),n=new _d(n),r=new _d(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){md(e._,n._,r=t[s]),r=new _d(r),u=n.next,c=e.previous,f=n._.r,l=e._.r;do{if(f<=l){if(yd(u._,r._)){n=u,e.next=n,n.previous=e,--s;continue t}f+=u._.r,u=u.next}else{if(yd(c._,r._)){(e=c).next=n,n.previous=e,--s;continue t}l+=c._.r,c=c.previous}}while(u!==c.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,o=bd(e);(r=r.next)!==n;)(a=bd(r))<o&&(e=r,o=a);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=cd(e),s=0;s<i;++s)(e=t[s]).x-=r.x,e.y-=r.y;return r.r}var wd=function(t){return xd(t),t};function Md(t){return null==t?null:kd(t)}function kd(t){if("function"!=typeof t)throw new Error;return t}function Ad(){return 0}var Sd=function(t){return function(){return t}};function Ed(t){return Math.sqrt(t.value)}var Td=function(){var t=null,e=1,n=1,r=Ad;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(Cd(t)).eachAfter(Od(r,.5)).eachBefore(Pd(1)):i.eachBefore(Cd(Ed)).eachAfter(Od(Ad,1)).eachAfter(Od(r,i.r/Math.min(e,n))).eachBefore(Pd(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=Md(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:Sd(+t),i):r},i};function Cd(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Od(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,s=t(n)*e||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=xd(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function Pd(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var Nd=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},Bd=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(r-e)/t.value;++s<u;)(o=a[s]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c},Dd=function(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(function(t,e){return function(r){r.children&&Bd(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(e,o)),r&&i.eachBefore(Nd),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},zd={depth:-1},Rd={};function Ld(t){return t.id}function Id(t){return t.parentId}var jd=function(){var t=Ld,e=Id;function n(n){var r,i,o,a,s,u,c,f=n.length,l=new Array(f),h={};for(i=0;i<f;++i)r=n[i],s=l[i]=new sd(r),null!=(u=t(r,i,n))&&(u+="")&&(h[c="$"+(s.id=u)]=c in h?Rd:s);for(i=0;i<f;++i)if(s=l[i],null!=(u=e(n[i],i,n))&&(u+="")){if(!(a=h["$"+u]))throw new Error("missing: "+u);if(a===Rd)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=zd,o.eachBefore((function(t){t.depth=t.parent.depth+1,--f})).eachBefore(ad),o.parent=null,f>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=kd(e),n):t},n.parentId=function(t){return arguments.length?(e=kd(t),n):e},n};function Ud(t,e){return t.parent===e.parent?1:2}function Fd(t){var e=t.children;return e?e[0]:t.t}function Hd(t){var e=t.children;return e?e[e.length-1]:t.t}function qd(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Vd(t,e,n){return t.a.parent===e.parent?t.a:n}function Yd(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Yd.prototype=Object.create(sd.prototype);var Wd=function(){var t=Ud,e=1,n=1,r=null;function i(i){var u=function(t){for(var e,n,r,i,o,a=new Yd(t,0),s=[a];e=s.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new Yd(r[i],i)),n.parent=e;return(a.parent=new Yd(null,0)).children=[a],a}(i);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)i.eachBefore(s);else{var c=i,f=i,l=i;i.eachBefore((function(t){t.x<c.x&&(c=t),t.x>f.x&&(f=t),t.depth>l.depth&&(l=t)}));var h=c===f?1:t(c,f)/2,d=h-c.x,p=e/(f.x+h+d),g=n/(l.depth||1);i.eachBefore((function(t){t.x=(t.x+d)*p,t.y=t.depth*g}))}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,a=e,s=n,u=o.parent.children[0],c=o.m,f=a.m,l=s.m,h=u.m;s=Hd(s),o=Fd(o),s&&o;)u=Fd(u),(a=Hd(a)).a=e,(i=s.z+l-o.z-c+t(s._,o._))>0&&(qd(Vd(s,e,r),e,i),c+=i,f+=i),l+=s.m,c+=o.m,h+=u.m,f+=a.m;s&&!Hd(a)&&(a.t=s,a.m+=l-f),o&&!Fd(u)&&(u.t=o,u.m+=c-h,r=e)}return r}(e,i,e.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},Gd=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(i-n)/t.value;++s<u;)(o=a[s]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c},Xd=(1+Math.sqrt(5))/2;function Kd(t,e,n,r,i,o){for(var a,s,u,c,f,l,h,d,p,g,v,m=[],y=e.children,b=0,_=0,x=y.length,w=e.value;b<x;){u=i-n,c=o-r;do{f=y[_++].value}while(!f&&_<x);for(l=h=f,v=f*f*(g=Math.max(c/u,u/c)/(w*t)),p=Math.max(h/v,v/l);_<x;++_){if(f+=s=y[_].value,s<l&&(l=s),s>h&&(h=s),v=f*f*g,(d=Math.max(h/v,v/l))>p){f-=s;break}p=d}m.push(a={value:f,dice:u<c,children:y.slice(b,_)}),a.dice?Bd(a,n,r,i,w?r+=c*f/w:o):Gd(a,n,r,w?n+=u*f/w:i,o),w-=f,b=_}return m}var Qd=function t(e){function n(t,n,r,i,o){Kd(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Xd),$d=function(){var t=Qd,e=!1,n=1,r=1,i=[0],o=Ad,a=Ad,s=Ad,u=Ad,c=Ad;function f(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(l),i=[0],e&&t.eachBefore(Nd),t}function l(e){var n=i[e.depth],r=e.x0+n,f=e.y0+n,l=e.x1-n,h=e.y1-n;l<r&&(r=l=(r+l)/2),h<f&&(f=h=(f+h)/2),e.x0=r,e.y0=f,e.x1=l,e.y1=h,e.children&&(n=i[e.depth+1]=o(e)/2,r+=c(e)-n,f+=a(e)-n,(l-=s(e)-n)<r&&(r=l=(r+l)/2),(h-=u(e)-n)<f&&(f=h=(f+h)/2),t(e,r,f,l,h))}return f.round=function(t){return arguments.length?(e=!!t,f):e},f.size=function(t){return arguments.length?(n=+t[0],r=+t[1],f):[n,r]},f.tile=function(e){return arguments.length?(t=kd(e),f):t},f.padding=function(t){return arguments.length?f.paddingInner(t).paddingOuter(t):f.paddingInner()},f.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:Sd(+t),f):o},f.paddingOuter=function(t){return arguments.length?f.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):f.paddingTop()},f.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:Sd(+t),f):a},f.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:Sd(+t),f):s},f.paddingBottom=function(t){return arguments.length?(u="function"==typeof t?t:Sd(+t),f):u},f.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:Sd(+t),f):c},f},Zd=function(t,e,n,r,i){var o,a,s=t.children,u=s.length,c=new Array(u+1);for(c[0]=a=o=0;o<u;++o)c[o+1]=a+=s[o].value;!function t(e,n,r,i,o,a,u){if(e>=n-1){var f=s[e];return f.x0=i,f.y0=o,f.x1=a,void(f.y1=u)}var l=c[e],h=r/2+l,d=e+1,p=n-1;for(;d<p;){var g=d+p>>>1;c[g]<h?d=g+1:p=g}h-c[d-1]<c[d]-h&&e+1<d&&--d;var v=c[d]-l,m=r-v;if(a-i>u-o){var y=(i*m+a*v)/r;t(e,d,v,i,o,y,u),t(d,n,m,y,o,a,u)}else{var b=(o*m+u*v)/r;t(e,d,v,i,o,a,b),t(d,n,m,i,b,a,u)}}(0,u,t.value,e,n,r,i)},Jd=function(t,e,n,r,i){(1&t.depth?Gd:Bd)(t,e,n,r,i)},tp=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,u,c,f,l=-1,h=a.length,d=t.value;++l<h;){for(u=(s=a[l]).children,c=s.value=0,f=u.length;c<f;++c)s.value+=u[c].value;s.dice?Bd(s,n,r,i,r+=(o-r)*s.value/d):Gd(s,n,r,n+=(i-n)*s.value/d,o),d-=s.value}else t._squarify=a=Kd(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Xd),ep=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},np=function(t,e){var n=rn(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},rp=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},ip=Math.SQRT2;function op(t){return((t=Math.exp(t))+1/t)/2}var ap=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],u=e[1],c=e[2],f=s-i,l=u-o,h=f*f+l*l;if(h<1e-12)r=Math.log(c/a)/ip,n=function(t){return[i+t*f,o+t*l,a*Math.exp(ip*t*r)]};else{var d=Math.sqrt(h),p=(c*c-a*a+4*h)/(2*a*2*d),g=(c*c-a*a-4*h)/(2*c*2*d),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);r=(m-v)/ip,n=function(t){var e,n=t*r,s=op(v),u=a/(2*d)*(s*(e=ip*n+v,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[i+u*f,o+u*l,a*s/op(ip*n+v)]}}return n.duration=1e3*r,n};function sp(t){return function(e,n){var r=t((e=Ke(e)).h,(n=Ke(n)).h),i=an(e.s,n.s),o=an(e.l,n.l),a=an(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var up=sp(rn),cp=sp(an);function fp(t,e){var n=an((t=co(t)).l,(e=co(e)).l),r=an(t.a,e.a),i=an(t.b,e.b),o=an(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}}function lp(t){return function(e,n){var r=t((e=yo(e)).h,(n=yo(n)).h),i=an(e.c,n.c),o=an(e.l,n.l),a=an(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var hp=lp(rn),dp=lp(an);function pp(t){return function e(n){function r(e,r){var i=t((e=So(e)).h,(r=So(r)).h),o=an(e.s,r.s),a=an(e.l,r.l),s=an(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}var gp=pp(rn),vp=pp(an);function mp(t,e){for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}var yp=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n},bp=function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[1]*i[0]-e[0]*i[1];return o/2},_p=function(t){for(var e,n,r=-1,i=t.length,o=0,a=0,s=t[i-1],u=0;++r<i;)e=s,s=t[r],u+=n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o/(u*=3),a/u]};function xp(t,e){return t[0]-e[0]||t[1]-e[1]}function wp(t){for(var e,n,r,i=t.length,o=[0,1],a=2,s=2;s<i;++s){for(;a>1&&(e=t[o[a-2]],n=t[o[a-1]],r=t[s],(n[0]-e[0])*(r[1]-e[1])-(n[1]-e[1])*(r[0]-e[0])<=0);)--a;o[a++]=s}return o.slice(0,a)}var Mp=function(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(xp),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var o=wp(r),a=wp(i),s=a[0]===o[0],u=a[a.length-1]===o[o.length-1],c=[];for(e=o.length-1;e>=0;--e)c.push(t[r[o[e]][2]]);for(e=+s;e<a.length-u;++e)c.push(t[r[a[e]][2]]);return c},kp=function(t,e){for(var n,r,i=t.length,o=t[i-1],a=e[0],s=e[1],u=o[0],c=o[1],f=!1,l=0;l<i;++l)n=(o=t[l])[0],(r=o[1])>s!=c>s&&a<(u-n)*(s-r)/(c-r)+n&&(f=!f),u=n,c=r;return f},Ap=function(t){for(var e,n,r=-1,i=t.length,o=t[i-1],a=o[0],s=o[1],u=0;++r<i;)e=a,n=s,e-=a=(o=t[r])[0],n-=s=o[1],u+=Math.sqrt(e*e+n*n);return u},Sp=function(){return Math.random()},Ep=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Sp),Tp=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*e()-1,o=2*e()-1,i=r*r+o*o}while(!i||i>1);return t+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(Sp),Cp=function t(e){function n(){var t=Tp.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(Sp),Op=function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(Sp),Pp=function t(e){function n(t){var n=Op.source(e)(t);return function(){return n()/t}}return n.source=t,n}(Sp),Np=function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(Sp);function Bp(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Dp(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}var zp=Array.prototype,Rp=zp.map,Lp=zp.slice,Ip={name:"implicit"};function jp(){var t=Wi(),e=[],n=[],r=Ip;function i(i){var o=i+"",a=t.get(o);if(!a){if(r!==Ip)return r;t.set(o,a=e.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=Wi();for(var r,o,a=-1,s=n.length;++a<s;)t.has(o=(r=n[a])+"")||t.set(o,e.push(r));return i},i.range=function(t){return arguments.length?(n=Lp.call(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return jp(e,n).unknown(r)},Bp.apply(i,arguments),i}function Up(){var t,e,n=jp().unknown(void 0),r=n.domain,i=n.range,o=[0,1],a=!1,s=0,u=0,c=.5;function f(){var n=r().length,f=o[1]<o[0],l=o[f-0],h=o[1-f];t=(h-l)/Math.max(1,n-s+2*u),a&&(t=Math.floor(t)),l+=(h-l-t*(n-s))*c,e=t*(1-s),a&&(l=Math.round(l),e=Math.round(e));var d=M(n).map((function(e){return l+t*e}));return i(f?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),f()):r()},n.range=function(t){return arguments.length?(o=[+t[0],+t[1]],f()):o.slice()},n.rangeRound=function(t){return o=[+t[0],+t[1]],a=!0,f()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,f()):a},n.padding=function(t){return arguments.length?(s=Math.min(1,u=+t),f()):s},n.paddingInner=function(t){return arguments.length?(s=Math.min(1,t),f()):s},n.paddingOuter=function(t){return arguments.length?(u=+t,f()):u},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),f()):c},n.copy=function(){return Up(r(),o).round(a).paddingInner(s).paddingOuter(u).align(c)},Bp.apply(f(),arguments)}function Fp(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Fp(e())},t}function Hp(){return Fp(Up.apply(null,arguments).paddingInner(1))}var qp=function(t){return+t},Vp=[0,1];function Yp(t){return t}function Wp(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Gp(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function Xp(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Wp(i,r),o=n(a,o)):(r=Wp(r,i),o=n(o,a)),function(t){return o(r(t))}}function Kp(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Wp(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=c(t,e,1,r)-1;return o[n](i[n](e))}}function Qp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function $p(){var t,e,n,r,i,o,a=Vp,s=Vp,u=Mn,c=Yp;function f(){return r=Math.min(a.length,s.length)>2?Kp:Xp,i=o=null,l}function l(e){return isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(c(e)))}return l.invert=function(n){return c(e((o||(o=r(s,a.map(t),vn)))(n)))},l.domain=function(t){return arguments.length?(a=Rp.call(t,qp),c===Yp||(c=Gp(a)),f()):a.slice()},l.range=function(t){return arguments.length?(s=Lp.call(t),f()):s.slice()},l.rangeRound=function(t){return s=Lp.call(t),u=rp,f()},l.clamp=function(t){return arguments.length?(c=t?Gp(a):Yp,l):c!==Yp},l.interpolate=function(t){return arguments.length?(u=t,f()):u},l.unknown=function(t){return arguments.length?(n=t,l):n},function(n,r){return t=n,e=r,f()}}function Zp(t,e){return $p()(t,e)}var Jp=function(t,e,n,r){var i,o=C(t,e,n);switch((r=Us(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=tu(o,a))||(r.precision=i),Ys(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=eu(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Js(o))||(r.precision=i-2*("%"===r.type))}return Vs(r)};function tg(t){var e=t.domain;return t.ticks=function(t){var n=e();return E(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Jp(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,a=i.length-1,s=i[o],u=i[a];return u<s&&(r=s,s=u,u=r,r=o,o=a,a=r),(r=T(s,u,n))>0?r=T(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=T(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(u/r)*r,e(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(u*r)/r,e(i)),t},t}function eg(){var t=Zp(Yp,Yp);return t.copy=function(){return Qp(t,eg())},Bp.apply(t,arguments),tg(t)}function ng(t){var e;function n(t){return isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Rp.call(e,qp),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return ng(t).unknown(e)},t=arguments.length?Rp.call(t,qp):[0,1],tg(n)}var rg=function(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t};function ig(t){return Math.log(t)}function og(t){return Math.exp(t)}function ag(t){return-Math.log(-t)}function sg(t){return-Math.exp(-t)}function ug(t){return isFinite(t)?+("1e"+t):t<0?0:t}function cg(t){return function(e){return-t(-e)}}function fg(t){var e,n,r=t(ig,og),i=r.domain,o=10;function a(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(o),n=function(t){return 10===t?ug:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(o),i()[0]<0?(e=cg(e),n=cg(n),t(ag,sg)):t(ig,og),r}return r.base=function(t){return arguments.length?(o=+t,a()):o},r.domain=function(t){return arguments.length?(i(t),a()):i()},r.ticks=function(t){var r,a=i(),s=a[0],u=a[a.length-1];(r=u<s)&&(h=s,s=u,u=h);var c,f,l,h=e(s),d=e(u),p=null==t?10:+t,g=[];if(!(o%1)&&d-h<p){if(h=Math.round(h)-1,d=Math.round(d)+1,s>0){for(;h<d;++h)for(f=1,c=n(h);f<o;++f)if(!((l=c*f)<s)){if(l>u)break;g.push(l)}}else for(;h<d;++h)for(f=o-1,c=n(h);f>=1;--f)if(!((l=c*f)<s)){if(l>u)break;g.push(l)}}else g=E(h,d,Math.min(d-h,p)).map(n);return r?g.reverse():g},r.tickFormat=function(t,i){if(null==i&&(i=10===o?".0e":","),"function"!=typeof i&&(i=Vs(i)),t===1/0)return i;null==t&&(t=10);var a=Math.max(1,o*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*o<o-.5&&(r*=o),r<=a?i(t):""}},r.nice=function(){return i(rg(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function lg(){var t=fg($p()).domain([1,10]);return t.copy=function(){return Qp(t,lg()).base(t.base())},Bp.apply(t,arguments),t}function hg(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function dg(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function pg(t){var e=1,n=t(hg(e),dg(e));return n.constant=function(n){return arguments.length?t(hg(e=+n),dg(e)):e},tg(n)}function gg(){var t=pg($p());return t.copy=function(){return Qp(t,gg()).constant(t.constant())},Bp.apply(t,arguments)}function vg(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function mg(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function yg(t){return t<0?-t*t:t*t}function bg(t){var e=t(Yp,Yp),n=1;function r(){return 1===n?t(Yp,Yp):.5===n?t(mg,yg):t(vg(n),vg(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},tg(e)}function _g(){var t=bg($p());return t.copy=function(){return Qp(t,_g()).exponent(t.exponent())},Bp.apply(t,arguments),t}function xg(){return _g.apply(null,arguments).exponent(.5)}function wg(){var t,e=[],n=[],r=[];function o(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=N(e,t/i);return a}function a(e){return isNaN(e=+e)?t:n[c(r,e)]}return a.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},a.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,r=0,a=t.length;r<a;++r)null==(n=t[r])||isNaN(n=+n)||e.push(n);return e.sort(i),o()},a.range=function(t){return arguments.length?(n=Lp.call(t),o()):n.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return r.slice()},a.copy=function(){return wg().domain(e).range(n).unknown(t)},Bp.apply(a,arguments)}function Mg(){var t,e=0,n=1,r=1,i=[.5],o=[0,1];function a(e){return e<=e?o[c(i,e,0,r)]:t}function s(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return a}return a.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],s()):[e,n]},a.range=function(t){return arguments.length?(r=(o=Lp.call(t)).length-1,s()):o.slice()},a.invertExtent=function(t){var a=o.indexOf(t);return a<0?[NaN,NaN]:a<1?[e,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(e){return arguments.length?(t=e,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return Mg().domain([e,n]).range(o).unknown(t)},Bp.apply(tg(a),arguments)}function kg(){var t,e=[.5],n=[0,1],r=1;function i(i){return i<=i?n[c(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Lp.call(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Lp.call(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return kg().domain(e).range(n).unknown(t)},Bp.apply(i,arguments)}var Ag=new Date,Sg=new Date;function Eg(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return Eg((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return Ag.setTime(+e),Sg.setTime(+r),t(Ag),t(Sg),Math.floor(n(Ag,Sg))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var Tg=Eg((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Tg.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Eg((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Cg=Tg,Og=Tg.range,Pg=Eg((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Ng=Pg,Bg=Pg.range;function Dg(t){return Eg((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var zg=Dg(0),Rg=Dg(1),Lg=Dg(2),Ig=Dg(3),jg=Dg(4),Ug=Dg(5),Fg=Dg(6),Hg=zg.range,qg=Rg.range,Vg=Lg.range,Yg=Ig.range,Wg=jg.range,Gg=Ug.range,Xg=Fg.range,Kg=Eg((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1})),Qg=Kg,$g=Kg.range,Zg=Eg((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()})),Jg=Zg,tv=Zg.range,ev=Eg((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()})),nv=ev,rv=ev.range,iv=Eg((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()})),ov=iv,av=iv.range,sv=Eg((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));sv.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Eg((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):sv:null};var uv=sv,cv=sv.range;function fv(t){return Eg((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}var lv=fv(0),hv=fv(1),dv=fv(2),pv=fv(3),gv=fv(4),vv=fv(5),mv=fv(6),yv=lv.range,bv=hv.range,_v=dv.range,xv=pv.range,wv=gv.range,Mv=vv.range,kv=mv.range,Av=Eg((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1})),Sv=Av,Ev=Av.range,Tv=Eg((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Tv.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Eg((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Cv=Tv,Ov=Tv.range;function Pv(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Nv(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Bv(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Dv(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=Wv(i),f=Gv(i),l=Wv(o),h=Gv(o),d=Wv(a),p=Gv(a),g=Wv(s),v=Gv(s),m=Wv(u),y=Gv(u),b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:pm,e:pm,f:bm,H:gm,I:vm,j:mm,L:ym,m:_m,M:xm,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Km,s:Qm,S:wm,u:Mm,U:km,V:Am,w:Sm,W:Em,x:null,X:null,y:Tm,Y:Cm,Z:Om,"%":Xm},_={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Pm,e:Pm,f:Rm,H:Nm,I:Bm,j:Dm,L:zm,m:Lm,M:Im,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Km,s:Qm,S:jm,u:Um,U:Fm,V:Hm,w:qm,W:Vm,x:null,X:null,y:Ym,Y:Wm,Z:Gm,"%":Xm},x={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return k(t,e,n,r)},d:im,e:im,f:fm,H:am,I:am,j:om,L:cm,m:rm,M:sm,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=f[r[0].toLowerCase()],n+r[0].length):-1},q:nm,Q:hm,s:dm,S:um,u:Kv,U:Qv,V:$v,w:Xv,W:Zv,x:function(t,e,r){return k(t,n,e,r)},X:function(t,e,n){return k(t,r,e,n)},y:tm,Y:Jv,Z:em,"%":lm};function w(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=Uv[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function M(t,e){return function(n){var r,i,o=Bv(1900,void 0,1);if(k(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Nv(Bv(o.y,0,1))).getUTCDay(),r=i>4||0===i?hv.ceil(r):hv(r),r=Sv.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Pv(Bv(o.y,0,1))).getDay(),r=i>4||0===i?Rg.ceil(r):Rg(r),r=Qg.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Nv(Bv(o.y,0,1)).getUTCDay():Pv(Bv(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Nv(o)):Pv(o)}}function k(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=x[i in Uv?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),_.x=w(n,_),_.X=w(r,_),_.c=w(e,_),{format:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t+="",!0);return e.toString=function(){return t},e}}}var zv,Rv,Lv,Iv,jv,Uv={"-":"",_:" ",0:"0"},Fv=/^\s*\d+/,Hv=/^%/,qv=/[\\^$*+?|[\]().{}]/g;function Vv(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Yv(t){return t.replace(qv,"\\$&")}function Wv(t){return new RegExp("^(?:"+t.map(Yv).join("|")+")","i")}function Gv(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function Xv(t,e,n){var r=Fv.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Kv(t,e,n){var r=Fv.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Qv(t,e,n){var r=Fv.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function $v(t,e,n){var r=Fv.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Zv(t,e,n){var r=Fv.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Jv(t,e,n){var r=Fv.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function tm(t,e,n){var r=Fv.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function em(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function nm(t,e,n){var r=Fv.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function rm(t,e,n){var r=Fv.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function im(t,e,n){var r=Fv.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function om(t,e,n){var r=Fv.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function am(t,e,n){var r=Fv.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function sm(t,e,n){var r=Fv.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function um(t,e,n){var r=Fv.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function cm(t,e,n){var r=Fv.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function fm(t,e,n){var r=Fv.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function lm(t,e,n){var r=Hv.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function hm(t,e,n){var r=Fv.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function dm(t,e,n){var r=Fv.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function pm(t,e){return Vv(t.getDate(),e,2)}function gm(t,e){return Vv(t.getHours(),e,2)}function vm(t,e){return Vv(t.getHours()%12||12,e,2)}function mm(t,e){return Vv(1+Qg.count(Cg(t),t),e,3)}function ym(t,e){return Vv(t.getMilliseconds(),e,3)}function bm(t,e){return ym(t,e)+"000"}function _m(t,e){return Vv(t.getMonth()+1,e,2)}function xm(t,e){return Vv(t.getMinutes(),e,2)}function wm(t,e){return Vv(t.getSeconds(),e,2)}function Mm(t){var e=t.getDay();return 0===e?7:e}function km(t,e){return Vv(zg.count(Cg(t)-1,t),e,2)}function Am(t,e){var n=t.getDay();return t=n>=4||0===n?jg(t):jg.ceil(t),Vv(jg.count(Cg(t),t)+(4===Cg(t).getDay()),e,2)}function Sm(t){return t.getDay()}function Em(t,e){return Vv(Rg.count(Cg(t)-1,t),e,2)}function Tm(t,e){return Vv(t.getFullYear()%100,e,2)}function Cm(t,e){return Vv(t.getFullYear()%1e4,e,4)}function Om(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Vv(e/60|0,"0",2)+Vv(e%60,"0",2)}function Pm(t,e){return Vv(t.getUTCDate(),e,2)}function Nm(t,e){return Vv(t.getUTCHours(),e,2)}function Bm(t,e){return Vv(t.getUTCHours()%12||12,e,2)}function Dm(t,e){return Vv(1+Sv.count(Cv(t),t),e,3)}function zm(t,e){return Vv(t.getUTCMilliseconds(),e,3)}function Rm(t,e){return zm(t,e)+"000"}function Lm(t,e){return Vv(t.getUTCMonth()+1,e,2)}function Im(t,e){return Vv(t.getUTCMinutes(),e,2)}function jm(t,e){return Vv(t.getUTCSeconds(),e,2)}function Um(t){var e=t.getUTCDay();return 0===e?7:e}function Fm(t,e){return Vv(lv.count(Cv(t)-1,t),e,2)}function Hm(t,e){var n=t.getUTCDay();return t=n>=4||0===n?gv(t):gv.ceil(t),Vv(gv.count(Cv(t),t)+(4===Cv(t).getUTCDay()),e,2)}function qm(t){return t.getUTCDay()}function Vm(t,e){return Vv(hv.count(Cv(t)-1,t),e,2)}function Ym(t,e){return Vv(t.getUTCFullYear()%100,e,2)}function Wm(t,e){return Vv(t.getUTCFullYear()%1e4,e,4)}function Gm(){return"+0000"}function Xm(){return"%"}function Km(t){return+t}function Qm(t){return Math.floor(+t/1e3)}function $m(t){return zv=Dv(t),Rv=zv.format,Lv=zv.parse,Iv=zv.utcFormat,jv=zv.utcParse,zv}$m({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Zm(t){return new Date(t)}function Jm(t){return t instanceof Date?+t:+new Date(+t)}function ty(t,e,n,r,i,a,s,u,c){var f=Zp(Yp,Yp),l=f.invert,h=f.domain,d=c(".%L"),p=c(":%S"),g=c("%I:%M"),v=c("%I %p"),m=c("%a %d"),y=c("%b %d"),b=c("%B"),_=c("%Y"),x=[[s,1,1e3],[s,5,5e3],[s,15,15e3],[s,30,3e4],[a,1,6e4],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,864e5],[r,2,1728e5],[n,1,6048e5],[e,1,2592e6],[e,3,7776e6],[t,1,31536e6]];function w(o){return(s(o)<o?d:a(o)<o?p:i(o)<o?g:r(o)<o?v:e(o)<o?n(o)<o?m:y:t(o)<o?b:_)(o)}function M(e,n,r,i){if(null==e&&(e=10),"number"==typeof e){var a=Math.abs(r-n)/e,s=o((function(t){return t[2]})).right(x,a);s===x.length?(i=C(n/31536e6,r/31536e6,e),e=t):s?(i=(s=x[a/x[s-1][2]<x[s][2]/a?s-1:s])[1],e=s[0]):(i=Math.max(C(n,r,e),1),e=u)}return null==i?e:e.every(i)}return f.invert=function(t){return new Date(l(t))},f.domain=function(t){return arguments.length?h(Rp.call(t,Jm)):h().map(Zm)},f.ticks=function(t,e){var n,r=h(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=(n=M(t,i,o,e))?n.range(i,o+1):[],a?n.reverse():n},f.tickFormat=function(t,e){return null==e?w:c(e)},f.nice=function(t,e){var n=h();return(t=M(t,n[0],n[n.length-1],e))?h(rg(n,t)):f},f.copy=function(){return Qp(f,ty(t,e,n,r,i,a,s,u,c))},f}var ey=function(){return Bp.apply(ty(Cg,Ng,zg,Qg,Jg,nv,ov,uv,Rv).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},ny=Eg((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),ry=ny,iy=ny.range,oy=Eg((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()})),ay=oy,sy=oy.range,uy=Eg((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()})),cy=uy,fy=uy.range,ly=function(){return Bp.apply(ty(Cv,ry,lv,Sv,ay,cy,ov,uv,Iv).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};function hy(){var t,e,n,r,i,o=0,a=1,s=Yp,u=!1;function c(e){return isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}return c.domain=function(i){return arguments.length?(t=r(o=+i[0]),e=r(a=+i[1]),n=t===e?0:1/(e-t),c):[o,a]},c.clamp=function(t){return arguments.length?(u=!!t,c):u},c.interpolator=function(t){return arguments.length?(s=t,c):s},c.unknown=function(t){return arguments.length?(i=t,c):i},function(i){return r=i,t=i(o),e=i(a),n=t===e?0:1/(e-t),c}}function dy(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function py(){var t=tg(hy()(Yp));return t.copy=function(){return dy(t,py())},Dp.apply(t,arguments)}function gy(){var t=fg(hy()).domain([1,10]);return t.copy=function(){return dy(t,gy()).base(t.base())},Dp.apply(t,arguments)}function vy(){var t=pg(hy());return t.copy=function(){return dy(t,vy()).constant(t.constant())},Dp.apply(t,arguments)}function my(){var t=bg(hy());return t.copy=function(){return dy(t,my()).exponent(t.exponent())},Dp.apply(t,arguments)}function yy(){return my.apply(null,arguments).exponent(.5)}function by(){var t=[],e=Yp;function n(n){if(!isNaN(n=+n))return e((c(t,n)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var r,o=0,a=e.length;o<a;++o)null==(r=e[o])||isNaN(r=+r)||t.push(r);return t.sort(i),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return by(e).domain(t)},Dp.apply(n,arguments)}function _y(){var t,e,n,r,i,o,a,s=0,u=.5,c=1,f=Yp,l=!1;function h(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(t<e?r:i),f(l?Math.max(0,Math.min(1,t)):t))}return h.domain=function(a){return arguments.length?(t=o(s=+a[0]),e=o(u=+a[1]),n=o(c=+a[2]),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),h):[s,u,c]},h.clamp=function(t){return arguments.length?(l=!!t,h):l},h.interpolator=function(t){return arguments.length?(f=t,h):f},h.unknown=function(t){return arguments.length?(a=t,h):a},function(a){return o=a,t=a(s),e=a(u),n=a(c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),h}}function xy(){var t=tg(_y()(Yp));return t.copy=function(){return dy(t,xy())},Dp.apply(t,arguments)}function wy(){var t=fg(_y()).domain([.1,1,10]);return t.copy=function(){return dy(t,wy()).base(t.base())},Dp.apply(t,arguments)}function My(){var t=pg(_y());return t.copy=function(){return dy(t,My()).constant(t.constant())},Dp.apply(t,arguments)}function ky(){var t=bg(_y());return t.copy=function(){return dy(t,ky()).exponent(t.exponent())},Dp.apply(t,arguments)}function Ay(){return ky.apply(null,arguments).exponent(.5)}var Sy=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n},Ey=Sy("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Ty=Sy("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Cy=Sy("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Oy=Sy("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Py=Sy("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Ny=Sy("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),By=Sy("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Dy=Sy("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),zy=Sy("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Ry=Sy("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Ly=function(t){return cn(t[t.length-1])},Iy=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Sy),jy=Ly(Iy),Uy=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Sy),Fy=Ly(Uy),Hy=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Sy),qy=Ly(Hy),Vy=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Sy),Yy=Ly(Vy),Wy=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Sy),Gy=Ly(Wy),Xy=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Sy),Ky=Ly(Xy),Qy=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Sy),$y=Ly(Qy),Zy=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Sy),Jy=Ly(Zy),tb=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Sy),eb=Ly(tb),nb=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Sy),rb=Ly(nb),ib=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Sy),ob=Ly(ib),ab=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Sy),sb=Ly(ab),ub=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Sy),cb=Ly(ub),fb=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Sy),lb=Ly(fb),hb=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Sy),db=Ly(hb),pb=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Sy),gb=Ly(pb),vb=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Sy),mb=Ly(vb),yb=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Sy),bb=Ly(yb),_b=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Sy),xb=Ly(_b),wb=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Sy),Mb=Ly(wb),kb=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Sy),Ab=Ly(kb),Sb=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Sy),Eb=Ly(Sb),Tb=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Sy),Cb=Ly(Tb),Ob=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Sy),Pb=Ly(Ob),Nb=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Sy),Bb=Ly(Nb),Db=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Sy),zb=Ly(Db),Rb=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Sy),Lb=Ly(Rb),Ib=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},jb=vp(So(300,.5,0),So(-240,.5,1)),Ub=vp(So(-100,.75,.35),So(80,1.5,.8)),Fb=vp(So(260,.75,.35),So(80,1.5,.8)),Hb=So(),qb=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Hb.h=360*t-100,Hb.s=1.5-1.5*e,Hb.l=.8-.9*e,Hb+""},Vb=He(),Yb=Math.PI/3,Wb=2*Math.PI/3,Gb=function(t){var e;return t=(.5-t)*Math.PI,Vb.r=255*(e=Math.sin(t))*e,Vb.g=255*(e=Math.sin(t+Yb))*e,Vb.b=255*(e=Math.sin(t+Wb))*e,Vb+""},Xb=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"};function Kb(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var Qb=Kb(Sy("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),$b=Kb(Sy("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Zb=Kb(Sy("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Jb=Kb(Sy("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),t_=function(t){return me($t(t).call(document.documentElement))},e_=0;function n_(){return new r_}function r_(){this._="@"+(++e_).toString(36)}r_.prototype=n_.prototype={constructor:r_,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var i_=function(t){return"string"==typeof t?new pe([document.querySelectorAll(t)],[document.documentElement]):new pe([null==t?[]:t],de)},o_=function(t,e){null==e&&(e=kn().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=An(t,e[n]);return i},a_=function(t){return function(){return t}},s_=Math.abs,u_=Math.atan2,c_=Math.cos,f_=Math.max,l_=Math.min,h_=Math.sin,d_=Math.sqrt,p_=Math.PI,g_=p_/2,v_=2*p_;function m_(t){return t>1?0:t<-1?p_:Math.acos(t)}function y_(t){return t>=1?g_:t<=-1?-g_:Math.asin(t)}function b_(t){return t.innerRadius}function __(t){return t.outerRadius}function x_(t){return t.startAngle}function w_(t){return t.endAngle}function M_(t){return t&&t.padAngle}function k_(t,e,n,r,i,o,a,s){var u=n-t,c=r-e,f=a-i,l=s-o,h=l*u-f*c;if(!(h*h<1e-12))return[t+(h=(f*(e-o)-l*(t-i))/h)*u,e+h*c]}function A_(t,e,n,r,i,o,a){var s=t-n,u=e-r,c=(a?o:-o)/d_(s*s+u*u),f=c*u,l=-c*s,h=t+f,d=e+l,p=n+f,g=r+l,v=(h+p)/2,m=(d+g)/2,y=p-h,b=g-d,_=y*y+b*b,x=i-o,w=h*g-p*d,M=(b<0?-1:1)*d_(f_(0,x*x*_-w*w)),k=(w*b-y*M)/_,A=(-w*y-b*M)/_,S=(w*b+y*M)/_,E=(-w*y+b*M)/_,T=k-v,C=A-m,O=S-v,P=E-m;return T*T+C*C>O*O+P*P&&(k=S,A=E),{cx:k,cy:A,x01:-f,y01:-l,x11:k*(i/x-1),y11:A*(i/x-1)}}var S_=function(){var t=b_,e=__,n=a_(0),r=null,i=x_,o=w_,a=M_,s=null;function u(){var u,c,f=+t.apply(this,arguments),l=+e.apply(this,arguments),h=i.apply(this,arguments)-g_,d=o.apply(this,arguments)-g_,p=s_(d-h),g=d>h;if(s||(s=u=Li()),l<f&&(c=l,l=f,f=c),l>1e-12)if(p>v_-1e-12)s.moveTo(l*c_(h),l*h_(h)),s.arc(0,0,l,h,d,!g),f>1e-12&&(s.moveTo(f*c_(d),f*h_(d)),s.arc(0,0,f,d,h,g));else{var v,m,y=h,b=d,_=h,x=d,w=p,M=p,k=a.apply(this,arguments)/2,A=k>1e-12&&(r?+r.apply(this,arguments):d_(f*f+l*l)),S=l_(s_(l-f)/2,+n.apply(this,arguments)),E=S,T=S;if(A>1e-12){var C=y_(A/f*h_(k)),O=y_(A/l*h_(k));(w-=2*C)>1e-12?(_+=C*=g?1:-1,x-=C):(w=0,_=x=(h+d)/2),(M-=2*O)>1e-12?(y+=O*=g?1:-1,b-=O):(M=0,y=b=(h+d)/2)}var P=l*c_(y),N=l*h_(y),B=f*c_(x),D=f*h_(x);if(S>1e-12){var z,R=l*c_(b),L=l*h_(b),I=f*c_(_),j=f*h_(_);if(p<p_&&(z=k_(P,N,I,j,R,L,B,D))){var U=P-z[0],F=N-z[1],H=R-z[0],q=L-z[1],V=1/h_(m_((U*H+F*q)/(d_(U*U+F*F)*d_(H*H+q*q)))/2),Y=d_(z[0]*z[0]+z[1]*z[1]);E=l_(S,(f-Y)/(V-1)),T=l_(S,(l-Y)/(V+1))}}M>1e-12?T>1e-12?(v=A_(I,j,P,N,l,T,g),m=A_(R,L,B,D,l,T,g),s.moveTo(v.cx+v.x01,v.cy+v.y01),T<S?s.arc(v.cx,v.cy,T,u_(v.y01,v.x01),u_(m.y01,m.x01),!g):(s.arc(v.cx,v.cy,T,u_(v.y01,v.x01),u_(v.y11,v.x11),!g),s.arc(0,0,l,u_(v.cy+v.y11,v.cx+v.x11),u_(m.cy+m.y11,m.cx+m.x11),!g),s.arc(m.cx,m.cy,T,u_(m.y11,m.x11),u_(m.y01,m.x01),!g))):(s.moveTo(P,N),s.arc(0,0,l,y,b,!g)):s.moveTo(P,N),f>1e-12&&w>1e-12?E>1e-12?(v=A_(B,D,R,L,f,-E,g),m=A_(P,N,I,j,f,-E,g),s.lineTo(v.cx+v.x01,v.cy+v.y01),E<S?s.arc(v.cx,v.cy,E,u_(v.y01,v.x01),u_(m.y01,m.x01),!g):(s.arc(v.cx,v.cy,E,u_(v.y01,v.x01),u_(v.y11,v.x11),!g),s.arc(0,0,f,u_(v.cy+v.y11,v.cx+v.x11),u_(m.cy+m.y11,m.cx+m.x11),g),s.arc(m.cx,m.cy,E,u_(m.y11,m.x11),u_(m.y01,m.x01),!g))):s.arc(0,0,f,x,_,g):s.lineTo(B,D)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-p_/2;return[c_(r)*n,h_(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:a_(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:a_(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:a_(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:a_(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:a_(+t),u):i},u.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:a_(+t),u):o},u.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:a_(+t),u):a},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u};function E_(t){this._context=t}E_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var T_=function(t){return new E_(t)};function C_(t){return t[0]}function O_(t){return t[1]}var P_=function(){var t=C_,e=O_,n=a_(!0),r=null,i=T_,o=null;function a(a){var s,u,c,f=a.length,l=!1;for(null==r&&(o=i(c=Li())),s=0;s<=f;++s)!(s<f&&n(u=a[s],s,a))===l&&((l=!l)?o.lineStart():o.lineEnd()),l&&o.point(+t(u,s,a),+e(u,s,a));if(c)return o=null,c+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:a_(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:a_(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:a_(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a},N_=function(){var t=C_,e=null,n=a_(0),r=O_,i=a_(!0),o=null,a=T_,s=null;function u(u){var c,f,l,h,d,p=u.length,g=!1,v=new Array(p),m=new Array(p);for(null==o&&(s=a(d=Li())),c=0;c<=p;++c){if(!(c<p&&i(h=u[c],c,u))===g)if(g=!g)f=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),l=c-1;l>=f;--l)s.point(v[l],m[l]);s.lineEnd(),s.areaEnd()}g&&(v[c]=+t(h,c,u),m[c]=+n(h,c,u),s.point(e?+e(h,c,u):v[c],r?+r(h,c,u):m[c]))}if(d)return s=null,d+""||null}function c(){return P_().defined(i).curve(a).context(o)}return u.x=function(n){return arguments.length?(t="function"==typeof n?n:a_(+n),e=null,u):t},u.x0=function(e){return arguments.length?(t="function"==typeof e?e:a_(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:a_(+t),u):e},u.y=function(t){return arguments.length?(n="function"==typeof t?t:a_(+t),r=null,u):n},u.y0=function(t){return arguments.length?(n="function"==typeof t?t:a_(+t),u):n},u.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:a_(+t),u):r},u.lineX0=u.lineY0=function(){return c().x(t).y(n)},u.lineY1=function(){return c().x(t).y(r)},u.lineX1=function(){return c().x(e).y(n)},u.defined=function(t){return arguments.length?(i="function"==typeof t?t:a_(!!t),u):i},u.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),u):a},u.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),u):o},u},B_=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},D_=function(t){return t},z_=function(){var t=D_,e=B_,n=null,r=a_(0),i=a_(v_),o=a_(0);function a(a){var s,u,c,f,l,h=a.length,d=0,p=new Array(h),g=new Array(h),v=+r.apply(this,arguments),m=Math.min(v_,Math.max(-v_,i.apply(this,arguments)-v)),y=Math.min(Math.abs(m)/h,o.apply(this,arguments)),b=y*(m<0?-1:1);for(s=0;s<h;++s)(l=g[p[s]=s]=+t(a[s],s,a))>0&&(d+=l);for(null!=e?p.sort((function(t,n){return e(g[t],g[n])})):null!=n&&p.sort((function(t,e){return n(a[t],a[e])})),s=0,c=d?(m-h*b)/d:0;s<h;++s,v=f)u=p[s],f=v+((l=g[u])>0?l*c:0)+b,g[u]={data:a[u],index:s,value:l,startAngle:v,endAngle:f,padAngle:y};return g}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:a_(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:a_(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:a_(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:a_(+t),a):o},a},R_=I_(T_);function L_(t){this._curve=t}function I_(t){function e(e){return new L_(t(e))}return e._curve=t,e}function j_(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(I_(t)):e()._curve},t}L_.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var U_=function(){return j_(P_().curve(R_))},F_=function(){var t=N_().curve(R_),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return j_(n())},delete t.lineX0,t.lineEndAngle=function(){return j_(r())},delete t.lineX1,t.lineInnerRadius=function(){return j_(i())},delete t.lineY0,t.lineOuterRadius=function(){return j_(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(I_(t)):e()._curve},t},H_=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]},q_=Array.prototype.slice;function V_(t){return t.source}function Y_(t){return t.target}function W_(t){var e=V_,n=Y_,r=C_,i=O_,o=null;function a(){var a,s=q_.call(arguments),u=e.apply(this,s),c=n.apply(this,s);if(o||(o=a=Li()),t(o,+r.apply(this,(s[0]=u,s)),+i.apply(this,s),+r.apply(this,(s[0]=c,s)),+i.apply(this,s)),a)return o=null,a+""||null}return a.source=function(t){return arguments.length?(e=t,a):e},a.target=function(t){return arguments.length?(n=t,a):n},a.x=function(t){return arguments.length?(r="function"==typeof t?t:a_(+t),a):r},a.y=function(t){return arguments.length?(i="function"==typeof t?t:a_(+t),a):i},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a}function G_(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function X_(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function K_(t,e,n,r,i){var o=H_(e,n),a=H_(e,n=(n+i)/2),s=H_(r,n),u=H_(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],s[0],s[1],u[0],u[1])}function Q_(){return W_(G_)}function $_(){return W_(X_)}function Z_(){var t=W_(K_);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}var J_={draw:function(t,e){var n=Math.sqrt(e/p_);t.moveTo(n,0),t.arc(0,0,n,0,v_)}},tx={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},ex=Math.sqrt(1/3),nx=2*ex,rx={draw:function(t,e){var n=Math.sqrt(e/nx),r=n*ex;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},ix=Math.sin(p_/10)/Math.sin(7*p_/10),ox=Math.sin(v_/10)*ix,ax=-Math.cos(v_/10)*ix,sx={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=ox*n,i=ax*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=v_*o/5,s=Math.cos(a),u=Math.sin(a);t.lineTo(u*n,-s*n),t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}},ux={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},cx=Math.sqrt(3),fx={draw:function(t,e){var n=-Math.sqrt(e/(3*cx));t.moveTo(0,2*n),t.lineTo(-cx*n,-n),t.lineTo(cx*n,-n),t.closePath()}},lx=Math.sqrt(3)/2,hx=1/Math.sqrt(12),dx=3*(hx/2+1),px={draw:function(t,e){var n=Math.sqrt(e/dx),r=n/2,i=n*hx,o=r,a=n*hx+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(-.5*r-lx*i,lx*r+-.5*i),t.lineTo(-.5*o-lx*a,lx*o+-.5*a),t.lineTo(-.5*s-lx*u,lx*s+-.5*u),t.lineTo(-.5*r+lx*i,-.5*i-lx*r),t.lineTo(-.5*o+lx*a,-.5*a-lx*o),t.lineTo(-.5*s+lx*u,-.5*u-lx*s),t.closePath()}},gx=[J_,tx,rx,ux,sx,fx,px],vx=function(){var t=a_(J_),e=a_(64),n=null;function r(){var r;if(n||(n=r=Li()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:a_(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:a_(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r},mx=function(){};function yx(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function bx(t){this._context=t}bx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yx(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var _x=function(t){return new bx(t)};function xx(t){this._context=t}xx.prototype={areaStart:mx,areaEnd:mx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:yx(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var wx=function(t){return new xx(t)};function Mx(t){this._context=t}Mx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:yx(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var kx=function(t){return new Mx(t)};function Ax(t,e){this._basis=new bx(t),this._beta=e}Ax.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Sx=function t(e){function n(t){return 1===e?new bx(t):new Ax(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Ex(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Tx(t,e){this._context=t,this._k=(1-e)/6}Tx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ex(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ex(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Cx=function t(e){function n(t){return new Tx(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Ox(t,e){this._context=t,this._k=(1-e)/6}Ox.prototype={areaStart:mx,areaEnd:mx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ex(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Px=function t(e){function n(t){return new Ox(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Nx(t,e){this._context=t,this._k=(1-e)/6}Nx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ex(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Bx=function t(e){function n(t){return new Nx(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Dx(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>1e-12){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>1e-12){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/f,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function zx(t,e){this._context=t,this._alpha=e}zx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Dx(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Rx=function t(e){function n(t){return e?new zx(t,e):new Tx(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Lx(t,e){this._context=t,this._alpha=e}Lx.prototype={areaStart:mx,areaEnd:mx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Dx(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ix=function t(e){function n(t){return e?new Lx(t,e):new Ox(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function jx(t,e){this._context=t,this._alpha=e}jx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Dx(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ux=function t(e){function n(t){return e?new jx(t,e):new Nx(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Fx(t){this._context=t}Fx.prototype={areaStart:mx,areaEnd:mx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var Hx=function(t){return new Fx(t)};function qx(t){return t<0?-1:1}function Vx(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(qx(o)+qx(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Yx(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Wx(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function Gx(t){this._context=t}function Xx(t){this._context=new Kx(t)}function Kx(t){this._context=t}function Qx(t){return new Gx(t)}function $x(t){return new Xx(t)}function Zx(t){this._context=t}function Jx(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}Gx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Wx(this,this._t0,Yx(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Wx(this,Yx(this,n=Vx(this,t,e)),n);break;default:Wx(this,this._t0,n=Vx(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Xx.prototype=Object.create(Gx.prototype)).point=function(t,e){Gx.prototype.point.call(this,e,t)},Kx.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},Zx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Jx(t),i=Jx(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var tw=function(t){return new Zx(t)};function ew(t,e){this._context=t,this._t=e}ew.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var nw=function(t){return new ew(t,.5)};function rw(t){return new ew(t,0)}function iw(t){return new ew(t,1)}var ow=function(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},aw=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n};function sw(t,e){return t[e]}var uw=function(){var t=a_([]),e=aw,n=ow,r=sw;function i(i){var o,a,s=t.apply(this,arguments),u=i.length,c=s.length,f=new Array(c);for(o=0;o<c;++o){for(var l,h=s[o],d=f[o]=new Array(u),p=0;p<u;++p)d[p]=l=[0,+r(i[p],h,p,i)],l.data=i[p];d.key=h}for(o=0,a=e(f);o<c;++o)f[a[o]].index=o;return n(f,a),f}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:a_(q_.call(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:a_(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?aw:"function"==typeof t?t:a_(q_.call(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?ow:t,i):n},i},cw=function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}ow(t,e)}},fw=function(t,e){if((s=t.length)>0)for(var n,r,i,o,a,s,u=0,c=t[e[0]].length;u<c;++u)for(o=a=0,n=0;n<s;++n)(i=(r=t[e[n]][u])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):(r[0]=0,r[1]=i)},lw=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}ow(t,e)}},hw=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,c=0;s<i;++s){for(var f=t[e[s]],l=f[a][1]||0,h=(l-(f[a-1][1]||0))/2,d=0;d<s;++d){var p=t[e[d]];h+=(p[a][1]||0)-(p[a-1][1]||0)}u+=l,c+=h*l}n[a-1][1]+=n[a-1][0]=o,u&&(o-=c/u)}n[a-1][1]+=n[a-1][0]=o,ow(t,e)}},dw=function(t){var e=t.map(pw);return aw(t).sort((function(t,n){return e[t]-e[n]}))};function pw(t){for(var e,n=-1,r=0,i=t.length,o=-1/0;++n<i;)(e=+t[n][1])>o&&(o=e,r=n);return r}var gw=function(t){var e=t.map(vw);return aw(t).sort((function(t,n){return e[t]-e[n]}))};function vw(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}var mw=function(t){return gw(t).reverse()},yw=function(t){var e,n,r=t.length,i=t.map(vw),o=dw(t),a=0,s=0,u=[],c=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],u.push(n)):(s+=i[n],c.push(n));return c.reverse().concat(u)},bw=function(t){return aw(t).reverse()};var _w=Date.prototype.toISOString?function(t){return t.toISOString()}:Iv("%Y-%m-%dT%H:%M:%S.%LZ");var xw=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:jv("%Y-%m-%dT%H:%M:%S.%LZ"),ww=function(t,e,n){var r=new In,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?Rn():+n,r.restart((function o(a){a+=i,r.restart(o,i+=e,n),t(a)}),e,n),r)},Mw=function(t){return function(){return t}};function kw(t){return t[0]}function Aw(t){return t[1]}function Sw(){this._=null}function Ew(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Tw(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Cw(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Ow(t){for(;t.L;)t=t.L;return t}Sw.prototype={constructor:Sw,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Ow(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Tw(this,n),n=(t=n).U),n.C=!1,r.C=!0,Cw(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Cw(this,n),n=(t=n).U),n.C=!1,r.C=!0,Tw(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Ow(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Tw(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Cw(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Tw(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Cw(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Tw(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Cw(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Pw=Sw;function Nw(t,e,n,r){var i=[null,null],o=nM.push(i)-1;return i.left=t,i.right=e,n&&Dw(i,t,e,n),r&&Dw(i,e,t,r),tM[t.index].halfedges.push(o),tM[e.index].halfedges.push(o),i}function Bw(t,e,n){var r=[e,n];return r.left=t,r}function Dw(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function zw(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],c=a[1],f=0,l=1,h=s[0]-u,d=s[1]-c;if(o=e-u,h||!(o>0)){if(o/=h,h<0){if(o<f)return;o<l&&(l=o)}else if(h>0){if(o>l)return;o>f&&(f=o)}if(o=r-u,h||!(o<0)){if(o/=h,h<0){if(o>l)return;o>f&&(f=o)}else if(h>0){if(o<f)return;o<l&&(l=o)}if(o=n-c,d||!(o>0)){if(o/=d,d<0){if(o<f)return;o<l&&(l=o)}else if(d>0){if(o>l)return;o>f&&(f=o)}if(o=i-c,d||!(o<0)){if(o/=d,d<0){if(o>l)return;o>f&&(f=o)}else if(d>0){if(o<f)return;o<l&&(l=o)}return!(f>0||l<1)||(f>0&&(t[0]=[u+f*h,c+f*d]),l<1&&(t[1]=[u+l*h,c+l*d]),!0)}}}}}function Rw(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],c=t.left,f=t.right,l=c[0],h=c[1],d=f[0],p=f[1],g=(l+d)/2,v=(h+p)/2;if(p===h){if(g<e||g>=r)return;if(l>d){if(u){if(u[1]>=i)return}else u=[g,n];o=[g,i]}else{if(u){if(u[1]<n)return}else u=[g,i];o=[g,n]}}else if(s=v-(a=(l-d)/(p-h))*g,a<-1||a>1)if(l>d){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(h<p){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function Lw(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Iw(t,e){return e[+(e.left!==t.site)]}function jw(t,e){return e[+(e.left===t.site)]}var Uw,Fw=[];function Hw(){Ew(this),this.x=this.y=this.arc=this.site=this.cy=null}function qw(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,c=r[1]-s,f=o[0]-a,l=o[1]-s,h=2*(u*l-c*f);if(!(h>=-iM)){var d=u*u+c*c,p=f*f+l*l,g=(l*d-c*p)/h,v=(u*p-f*d)/h,m=Fw.pop()||new Hw;m.arc=t,m.site=i,m.x=g+a,m.y=(m.cy=v+s)+Math.sqrt(g*g+v*v),t.circle=m;for(var y=null,b=eM._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}eM.insert(y,m),y||(Uw=m)}}}}function Vw(t){var e=t.circle;e&&(e.P||(Uw=e.N),eM.remove(e),Fw.push(e),Ew(e),t.circle=null)}var Yw=[];function Ww(){Ew(this),this.edge=this.site=this.circle=null}function Gw(t){var e=Yw.pop()||new Ww;return e.site=t,e}function Xw(t){Vw(t),Jw.remove(t),Yw.push(t),Ew(t)}function Kw(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];Xw(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<rM&&Math.abs(r-u.circle.cy)<rM;)o=u.P,s.unshift(u),Xw(u),u=o;s.unshift(u),Vw(u);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<rM&&Math.abs(r-c.circle.cy)<rM;)a=c.N,s.push(c),Xw(c),c=a;s.push(c),Vw(c);var f,l=s.length;for(f=1;f<l;++f)c=s[f],u=s[f-1],Dw(c.edge,u.site,c.site,i);u=s[0],(c=s[l-1]).edge=Nw(u.site,c.site,null,i),qw(u),qw(c)}function Qw(t){for(var e,n,r,i,o=t[0],a=t[1],s=Jw._;s;)if((r=$w(s,a)-o)>rM)s=s.L;else{if(!((i=o-Zw(s,a))>rM)){r>-rM?(e=s.P,n=s):i>-rM?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){tM[t.index]={site:t,halfedges:[]}}(t);var u=Gw(t);if(Jw.insert(e,u),e||n){if(e===n)return Vw(e),n=Gw(e.site),Jw.insert(u,n),u.edge=n.edge=Nw(e.site,u.site),qw(e),void qw(n);if(n){Vw(e),Vw(n);var c=e.site,f=c[0],l=c[1],h=t[0]-f,d=t[1]-l,p=n.site,g=p[0]-f,v=p[1]-l,m=2*(h*v-d*g),y=h*h+d*d,b=g*g+v*v,_=[(v*y-d*b)/m+f,(h*b-g*y)/m+l];Dw(n.edge,c,p,_),u.edge=Nw(c,t,null,_),n.edge=Nw(t,p,null,_),qw(e),qw(n)}else u.edge=Nw(e.site,u.site)}}function $w(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],u=n[1],c=u-e;if(!c)return s;var f=s-r,l=1/o-1/c,h=f/c;return l?(-h+Math.sqrt(h*h-2*l*(f*f/(-2*c)-u+c/2+i-o/2)))/l+r:(r+s)/2}function Zw(t,e){var n=t.N;if(n)return $w(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var Jw,tM,eM,nM,rM=1e-6,iM=1e-12;function oM(t,e){return e[1]-t[1]||e[0]-t[0]}function aM(t,e){var n,r,i,o=t.sort(oM).pop();for(nM=[],tM=new Array(t.length),Jw=new Pw,eM=new Pw;;)if(i=Uw,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(Qw(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Kw(i.arc)}if(function(){for(var t,e,n,r,i=0,o=tM.length;i<o;++i)if((t=tM[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=Lw(t,nM[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],u=+e[1][0],c=+e[1][1];!function(t,e,n,r){for(var i,o=nM.length;o--;)Rw(i=nM[o],t,e,n,r)&&zw(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>rM||Math.abs(i[0][1]-i[1][1])>rM)||delete nM[o]}(a,s,u,c),function(t,e,n,r){var i,o,a,s,u,c,f,l,h,d,p,g,v=tM.length,m=!0;for(i=0;i<v;++i)if(o=tM[i]){for(a=o.site,s=(u=o.halfedges).length;s--;)nM[u[s]]||u.splice(s,1);for(s=0,c=u.length;s<c;)p=(d=jw(o,nM[u[s]]))[0],g=d[1],l=(f=Iw(o,nM[u[++s%c]]))[0],h=f[1],(Math.abs(p-l)>rM||Math.abs(g-h)>rM)&&(u.splice(s,0,nM.push(Bw(a,d,Math.abs(p-t)<rM&&r-g>rM?[t,Math.abs(l-t)<rM?h:r]:Math.abs(g-r)<rM&&n-p>rM?[Math.abs(h-r)<rM?l:n,r]:Math.abs(p-n)<rM&&g-e>rM?[n,Math.abs(l-n)<rM?h:e]:Math.abs(g-e)<rM&&p-t>rM?[Math.abs(h-e)<rM?l:t,e]:null))-1),++c);c&&(m=!1)}if(m){var y,b,_,x=1/0;for(i=0,m=null;i<v;++i)(o=tM[i])&&(_=(y=(a=o.site)[0]-t)*y+(b=a[1]-e)*b)<x&&(x=_,m=o);if(m){var w=[t,e],M=[t,r],k=[n,r],A=[n,e];m.halfedges.push(nM.push(Bw(a=m.site,w,M))-1,nM.push(Bw(a,M,k))-1,nM.push(Bw(a,k,A))-1,nM.push(Bw(a,A,w))-1)}}for(i=0;i<v;++i)(o=tM[i])&&(o.halfedges.length||delete tM[i])}(a,s,u,c)}this.edges=nM,this.cells=tM,Jw=eM=nM=tM=null}aM.prototype={constructor:aM,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Iw(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s,u,c,f=n.site,l=-1,h=e[i[o-1]],d=h.left===f?h.right:h.left;++l<o;)a=d,d=(h=e[i[l]]).left===f?h.right:h.left,a&&d&&r<a.index&&r<d.index&&(u=a,c=d,((s=f)[0]-c[0])*(u[1]-s[1])-(s[0]-u[0])*(c[1]-s[1])<0)&&t.push([f.data,a.data,d.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var u=t-i.site[0],c=e-i.site[1],f=u*u+c*c;do{i=o.cells[r=a],a=null,i.halfedges.forEach((function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],c=e-s[1],l=u*u+c*c;l<f&&(f=l,a=s.index)}}))}while(null!==a);return o._found=r,null==n||f<=n*n?i.site:null}};var sM=function(){var t=kw,e=Aw,n=null;function r(r){return new aM(r.map((function(n,i){var o=[Math.round(t(n,i,r)/rM)*rM,Math.round(e(n,i,r)/rM)*rM];return o.index=i,o.data=n,o})),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:Mw(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:Mw(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r},uM=function(t){return function(){return t}};function cM(t,e,n){this.target=t,this.type=e,this.transform=n}function fM(t,e,n){this.k=t,this.x=e,this.y=n}fM.prototype={constructor:fM,scale:function(t){return 1===t?this:new fM(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new fM(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var lM=new fM(1,0,0);function hM(t){for(;!t.__zoom;)if(!(t=t.parentNode))return lM;return t.__zoom}function dM(){re.stopImmediatePropagation()}hM.prototype=fM.prototype;var pM=function(){re.preventDefault(),re.stopImmediatePropagation()};function gM(){return!re.ctrlKey&&!re.button}function vM(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function mM(){return this.__zoom||lM}function yM(){return-re.deltaY*(1===re.deltaMode?.05:re.deltaMode?1:.002)}function bM(){return navigator.maxTouchPoints||"ontouchstart"in this}function _M(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}var xM=function(){var t,e,n=gM,r=vM,i=_M,o=yM,a=bM,s=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,f=ap,l=Object(ot.dispatch)("start","zoom","end"),h=0;function d(t){t.property("__zoom",mM).on("wheel.zoom",_).on("mousedown.zoom",x).on("dblclick.zoom",w).filter(a).on("touchstart.zoom",M).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(t,e){return(e=Math.max(s[0],Math.min(s[1],e)))===t.k?t:new fM(e,t.x,t.y)}function g(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new fM(t.k,r,i)}function v(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function m(t,e,n){t.on("start.zoom",(function(){y(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){y(this,arguments).end()})).tween("zoom",(function(){var t=this,i=arguments,o=y(t,i),a=r.apply(t,i),s=null==n?v(a):"function"==typeof n?n.apply(t,i):n,u=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),c=t.__zoom,l="function"==typeof e?e.apply(t,i):e,h=f(c.invert(s).concat(u/c.k),l.invert(s).concat(u/l.k));return function(t){if(1===t)t=l;else{var e=h(t),n=u/e[2];t=new fM(n,s[0]-e[0]*n,s[1]-e[1]*n)}o.zoom(null,t)}}))}function y(t,e,n){return!n&&t.__zooming||new b(t,e)}function b(t,e){this.that=t,this.args=e,this.active=0,this.extent=r.apply(t,e),this.taps=0}function _(){if(n.apply(this,arguments)){var t=y(this,arguments),e=this.__zoom,r=Math.max(s[0],Math.min(s[1],e.k*Math.pow(2,o.apply(this,arguments)))),a=En(this);if(t.wheel)t.mouse[0][0]===a[0]&&t.mouse[0][1]===a[1]||(t.mouse[1]=e.invert(t.mouse[0]=a)),clearTimeout(t.wheel);else{if(e.k===r)return;t.mouse=[a,e.invert(a)],er(this),t.start()}pM(),t.wheel=setTimeout(c,150),t.zoom("mouse",i(g(p(e,r),t.mouse[0],t.mouse[1]),t.extent,u))}function c(){t.wheel=null,t.end()}}function x(){if(!e&&n.apply(this,arguments)){var t=y(this,arguments,!0),r=me(re.view).on("mousemove.zoom",c,!0).on("mouseup.zoom",f,!0),o=En(this),a=re.clientX,s=re.clientY;_e(re.view),dM(),t.mouse=[o,this.__zoom.invert(o)],er(this),t.start()}function c(){if(pM(),!t.moved){var e=re.clientX-a,n=re.clientY-s;t.moved=e*e+n*n>h}t.zoom("mouse",i(g(t.that.__zoom,t.mouse[0]=En(t.that),t.mouse[1]),t.extent,u))}function f(){r.on("mousemove.zoom mouseup.zoom",null),xe(re.view,t.moved),pM(),t.end()}}function w(){if(n.apply(this,arguments)){var t=this.__zoom,e=En(this),o=t.invert(e),a=t.k*(re.shiftKey?.5:2),s=i(g(p(t,a),e,o),r.apply(this,arguments),u);pM(),c>0?me(this).transition().duration(c).call(m,s,e):me(this).call(d.transform,s)}}function M(){if(n.apply(this,arguments)){var e,r,i,o,a=re.touches,s=a.length,u=y(this,arguments,re.changedTouches.length===s);for(dM(),r=0;r<s;++r)i=a[r],o=[o=Sn(this,a,i.identifier),this.__zoom.invert(o),i.identifier],u.touch0?u.touch1||u.touch0[2]===o[2]||(u.touch1=o,u.taps=0):(u.touch0=o,e=!0,u.taps=1+!!t);t&&(t=clearTimeout(t)),e&&(u.taps<2&&(t=setTimeout((function(){t=null}),500)),er(this),u.start())}}function k(){if(this.__zooming){var e,n,r,o,a=y(this,arguments),s=re.changedTouches,c=s.length;for(pM(),t&&(t=clearTimeout(t)),a.taps=0,e=0;e<c;++e)n=s[e],r=Sn(this,s,n.identifier),a.touch0&&a.touch0[2]===n.identifier?a.touch0[0]=r:a.touch1&&a.touch1[2]===n.identifier&&(a.touch1[0]=r);if(n=a.that.__zoom,a.touch1){var f=a.touch0[0],l=a.touch0[1],h=a.touch1[0],d=a.touch1[1],v=(v=h[0]-f[0])*v+(v=h[1]-f[1])*v,m=(m=d[0]-l[0])*m+(m=d[1]-l[1])*m;n=p(n,Math.sqrt(v/m)),r=[(f[0]+h[0])/2,(f[1]+h[1])/2],o=[(l[0]+d[0])/2,(l[1]+d[1])/2]}else{if(!a.touch0)return;r=a.touch0[0],o=a.touch0[1]}a.zoom("touch",i(g(n,r,o),a.extent,u))}}function A(){if(this.__zooming){var t,n,r=y(this,arguments),i=re.changedTouches,o=i.length;for(dM(),e&&clearTimeout(e),e=setTimeout((function(){e=null}),500),t=0;t<o;++t)n=i[t],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps){var a=me(this).on("dblclick.zoom");a&&a.apply(this,arguments)}}}return d.transform=function(t,e,n){var r=t.selection?t.selection():t;r.property("__zoom",mM),t!==r?m(t,e,n):r.interrupt().each((function(){y(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},d.scaleBy=function(t,e,n){d.scaleTo(t,(function(){var t=this.__zoom.k,n="function"==typeof e?e.apply(this,arguments):e;return t*n}),n)},d.scaleTo=function(t,e,n){d.transform(t,(function(){var t=r.apply(this,arguments),o=this.__zoom,a=null==n?v(t):"function"==typeof n?n.apply(this,arguments):n,s=o.invert(a),c="function"==typeof e?e.apply(this,arguments):e;return i(g(p(o,c),a,s),t,u)}),n)},d.translateBy=function(t,e,n){d.transform(t,(function(){return i(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),u)}))},d.translateTo=function(t,e,n,o){d.transform(t,(function(){var t=r.apply(this,arguments),a=this.__zoom,s=null==o?v(t):"function"==typeof o?o.apply(this,arguments):o;return i(lM.translate(s[0],s[1]).scale(a.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,u)}),o)},b.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){ce(new cM(d,t,this.that.__zoom),l.apply,l,[t,this.that,this.args])}},d.wheelDelta=function(t){return arguments.length?(o="function"==typeof t?t:uM(+t),d):o},d.filter=function(t){return arguments.length?(n="function"==typeof t?t:uM(!!t),d):n},d.touchable=function(t){return arguments.length?(a="function"==typeof t?t:uM(!!t),d):a},d.extent=function(t){return arguments.length?(r="function"==typeof t?t:uM([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),d):r},d.scaleExtent=function(t){return arguments.length?(s[0]=+t[0],s[1]=+t[1],d):[s[0],s[1]]},d.translateExtent=function(t){return arguments.length?(u[0][0]=+t[0][0],u[1][0]=+t[1][0],u[0][1]=+t[0][1],u[1][1]=+t[1][1],d):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},d.constrain=function(t){return arguments.length?(i=t,d):i},d.duration=function(t){return arguments.length?(c=+t,d):c},d.interpolate=function(t){return arguments.length?(f=t,d):f},d.on=function(){var t=l.on.apply(l,arguments);return t===l?d:t},d.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,d):Math.sqrt(h)},d}},function(t,e,n){var r,i,o,a,s,u,c,f,l,h,d,p,g,v,m,y,b,_,x;t.exports=(r=n(1),n(8),void(r.lib.Cipher||(i=r,o=i.lib,a=o.Base,s=o.WordArray,u=o.BufferedBlockAlgorithm,c=i.enc,c.Utf8,f=c.Base64,l=i.algo.EvpKDF,h=o.Cipher=u.extend({cfg:a.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?x:b}return function(e){return{encrypt:function(n,r,i){return t(r).encrypt(e,n,r,i)},decrypt:function(n,r,i){return t(r).decrypt(e,n,r,i)}}}}()}),o.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),d=i.mode={},p=o.BlockCipherMode=a.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),g=d.CBC=function(){var t=p.extend();function e(t,e,n){var r,i=this._iv;i?(r=i,this._iv=void 0):r=this._prevBlock;for(var o=0;o<n;o++)t[e+o]^=r[o]}return t.Encryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize;e.call(this,t,n,i),r.encryptBlock(t,n),this._prevBlock=t.slice(n,n+i)}}),t.Decryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize,o=t.slice(n,n+i);r.decryptBlock(t,n),e.call(this,t,n,i),this._prevBlock=o}}),t}(),v=(i.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,r=n-t.sigBytes%n,i=r<<24|r<<16|r<<8|r,o=[],a=0;a<r;a+=4)o.push(i);var u=s.create(o,r);t.concat(u)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},o.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:v}),reset:function(){var t;h.reset.call(this);var e=this.cfg,n=e.iv,r=e.mode;this._xformMode==this._ENC_XFORM_MODE?t=r.createEncryptor:(t=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==t?this._mode.init(this,n&&n.words):(this._mode=t.call(r,this,n&&n.words),this._mode.__creator=t)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t,e=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},blockSize:4}),m=o.CipherParams=a.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),y=(i.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;return(n?s.create([1398893684,1701076831]).concat(n).concat(e):e).toString(f)},parse:function(t){var e,n=f.parse(t),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(e=s.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),m.create({ciphertext:n,salt:e})}},b=o.SerializableCipher=a.extend({cfg:a.extend({format:y}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var i=t.createEncryptor(n,r),o=i.finalize(e),a=i.cfg;return m.create({ciphertext:o,key:n,iv:a.iv,algorithm:t,mode:a.mode,padding:a.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),_=(i.kdf={}).OpenSSL={execute:function(t,e,n,r){r||(r=s.random(8));var i=l.create({keySize:e+n}).compute(t,r),o=s.create(i.words.slice(e),4*n);return i.sigBytes=4*e,m.create({key:i,iv:o,salt:r})}},x=o.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:_}),encrypt:function(t,e,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,t.keySize,t.ivSize);r.iv=i.iv;var o=b.encrypt.call(this,t,e,i.key,r);return o.mixIn(i),o},decrypt:function(t,e,n,r){r=this.cfg.extend(r),e=this._parse(e,r.format);var i=r.kdf.execute(n,t.keySize,t.ivSize,e.salt);return r.iv=i.iv,b.decrypt.call(this,t,e,i.key,r)}}))))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(2),o=function(){return!(!window.matchMedia||!(window.matchMedia("only screen and (min-resolution: 73dpi),                        only screen and (min-resolution: 1.1dppx),                        only screen and (min-resolution: 48.8dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.1),                           only screen and (-o-min-device-pixel-ratio: 1.1),                           only screen and (min--moz-device-pixel-ratio: 1.1),                           only screen and (min-device-pixel-ratio: 1.1)").matches||window.matchMedia("only screen and (min--moz-device-pixel-ratio: 1.3),                           only screen and (-o-min-device-pixel-ratio: 2.6/2),                           only screen and (-webkit-min-device-pixel-ratio: 1.3),                           only screen  and (min-device-pixel-ratio: 1.3),                           only screen and (min-resolution: 1.3dppx)").matches))||!!(window.devicePixelRatio&&window.devicePixelRatio>1)};e.isRetinaDisplay=o;e.modal=function(t){if("uuid"in t&&null!==document.querySelector("#cf--modal-container-"+t.uuid)){var e=document.querySelector("#cf--modal-container-"+t.uuid);e.parentNode.removeChild(e)}var n,i,a=document.createElement("div"),s=t.uuid||r.uuid();return a.setAttribute("class","cf--modal-container"),a.setAttribute("id","cf--modal-container-"+s),g(a,'<div class="cf--modal-box">\n    <div class="cf--modal-header"\n      style="background-image:url('+browser.runtime.getURL("assets/images/modal-header"+(o?"@2x":"")+".png")+');"></div>\n    <div class="cf--modal-title">'+(t.title||"")+'</div>\n    <div class="cf--modal-message">'+(t.message||"")+'</div>\n    <div class="cf--modal-buttons">\n      '+(n=t.buttons,i="",n.forEach((function(t,e){i+="<button class='cf--modal-button-"+e+"' data-value='"+t.value+"'>"+t.label+"</button>"})),i+"\n    </div>\n</div>")),document.body.appendChild(a),new Promise((function(e,n){t.buttons.forEach((function(t,n){document.querySelector("#cf--modal-container-"+s+" .cf--modal-button-"+n).addEventListener("click",(function(t){document.querySelector("#cf--modal-container-"+s).remove(),e(t.currentTarget.getAttribute("data-value")),t.preventDefault()}))})),document.querySelector("#cf--modal-container-"+s).addEventListener("click",(function(){var t=document.querySelector("#cf--modal-container-"+s);null!==t&&(t.remove(),n())}))}))};var a,s,u=function(t,e,n,r,i){return void 0===i&&(i=.5),c([f(t/n),1-e/r,i])},c=function(t){var e,n=t[0],r=t[1],i=t[2],o=(1-Math.abs(2*i-1))*r,a=n/60,s=o*(1-Math.abs(a%2-1)),u=i-o/2;switch(Math.floor(a)){case 0:e=[o,s,0];break;case 1:e=[s,o,0];break;case 2:e=[0,o,s];break;case 3:e=[0,s,o];break;case 4:e=[s,0,o];break;case 5:e=[o,0,s];break;default:e=[0,0,0]}return e.map((function(t){return Math.round(255*(t+u))}))},f=(a=0,s=360,function(t){return a*(1-t)+s*t}),l=function(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255;return e<=.03928?e/=12.92:e=Math.pow((e+.055)/1.055,2.4),n<=.03928?n/=12.92:n=Math.pow((n+.055)/1.055,2.4),r<=.03928?r/=12.92:r=Math.pow((r+.055)/1.055,2.4),.2126*e+.7152*n+.0722*r},h=function(t){return t>=4.5},d=function(t,e){return t<e&&(e=[t,t=e][0]),(t+.05)/(e+.05)};e.colorPicker=function(t,e,n,r){"[object Array]"!==r.toString()&&(r=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:null}(r));var o=function(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(a+s)/2;if(a===s)e=n=0;else{var c=a-s;switch(n=u>.5?c/(2-a-s):c/(a+s),a){case r:e=(i-o)/c+(i<o?6:0);break;case i:e=(o-r)/c+2;break;case o:e=(r-i)/c+4}e/=6}return[360*e,100*n,100*u]}(r),a=o[0]/360*n,s=150-o[1]/100*150,p=Math.round(o[2]/100*n);i.select("#"+t).style("line-height","0");var g=i.select("#"+t).append("div").style("position","relative").style("height","150px").style("width",n+"px").style("margin-bottom","5px"),v=g.append("canvas").style("position","relative").style("margin-bottom","-145px").attr("width",n+"px").attr("height","150px");v.call(i.drag().on("drag",(function(){a=Math.max(0,Math.min(i.event.x,n)),s=Math.max(0,Math.min(i.event.y,150)),w()})));var m=v.node().getContext("2d");m.clearRect(0,0,n,150),m.putImageData(function(t,e){for(var n=new Uint8ClampedArray(t*e*4),r=0,i=-1;r<e;++r)for(var o=0;o<t;++o){var a=u(o,r,t,e),s=a[0],c=a[1],f=a[2];n[++i]=s||0,n[++i]=c||0,n[++i]=f||0,n[++i]=255}return new ImageData(n,t,e)}(n,150),0,0);var y=g.append("svg").style("position","relative").style("left",0).style("top","-5px").attr("width",n+"px").attr("height","150px").style("pointer-events","none").append("circle").attr("r",5).style("fill","transparent").style("stroke","white"),b=i.select("#"+t).append("canvas").style("clear","both").style("margin-bottom","5px").attr("width",n).attr("height",30);b.call(i.drag().on("drag",(function(){p=Math.max(0,Math.min(Math.round(i.event.x),n)),w()})));var _=b.node().getContext("2d"),x=i.select("#"+t).append("div").style("clear","both").style("width",n+"px").style("height","30px"),w=function(){y.style("stroke",h(d(l(u(a,s,n,150,.5)),0))?"black":"white").attr("cx",a).attr("cy",s),o=[f(a/n),1-s/150,p/n],_.clearRect(0,0,n,30);for(var t=0;t<n;++t)_.fillStyle=t===p?h(d(l(u(a,s,n,150,t/n)),0))?"black":"white":"hsl("+o[0]+", "+100*o[1]+"%, "+t/n*100+"%)",_.fillRect(t,0,1,30);var r,g=c(o),v="#"+("000000"+((r=g)[0]<<16|r[1]<<8|r[2]).toString(16)).slice(-6);i.select("#"+e).property("value",v),x.style("background-color",v)};w()};var p=function(t,e,n){void 0===n&&(n="#338498");var o=e,a=e,s=e/4,u="spinner"+r.uuid(),c=i.scaleLinear().domain([40,100]).range([2,5]),f=i.select(t).append("svg").attr("id",u).attr("class","logoSpinner").style("stroke-width",c(e)+"px").attr("width",o).attr("height",a).attr("viewBox",[0,0,o,a]);f.append("defs").append("mask").attr("id","hole").selectAll("circle").data([0,1]).enter().append("circle").attr("cx",0).attr("cy",0).attr("r",(function(t){return 0===t?5*e:s+2*c(e)})).style("fill",(function(t){return 0===t?"white":"black"}));for(var l=f.append("g").attr("transform","translate("+o/2+", "+a/2+")"),h=[],d=0,p=0;p<3;p+=1)h.push({offset:2*Math.PI/3*p,radius:s,size:-5});var g=l.append("g").selectAll("circle").data(h).enter().append("circle").attr("mask","url(#hole)").style("stroke",n),v=setInterval((function(){0===i.selectAll("#"+u).size()?clearInterval(v):((d+=.1)>=2*Math.PI&&(d=0),g.data(h).attr("cy",(function(t){return e=s+t.radius*Math.abs(Math.sin(d))/2,n=t.offset+d,e*Math.sin(n);var e,n})).attr("cx",(function(t){return e=s+t.radius*Math.abs(Math.sin(d))/2,n=t.offset+d,e*Math.cos(n);var e,n})).attr("r",(function(t){return t.size*Math.abs(Math.sin(2*d))/2+s})))}),30);return l.append("circle").attr("r",s).style("stroke",n),l.append("circle").attr("r",s/2).style("fill",n).style("stroke","transparent"),function(){clearInterval(v),i.selectAll("#"+u).remove()}};e.logoSpinner=p;e.blockSplash=function(t){var e=document.createElement("div"),n=r.uuid();e.setAttribute("class","cf--modal-container"),e.setAttribute("id","cf--modal-container-"+n),g(e,'<div class="cf--modal-box cf--modal-box-transparent">\n    <div class="cf--modal-spinner"></div>\n    <div class="cf--modal-message">v3 '+(t||"")+"</div>\n</div>"),document.body.appendChild(e);var o=p("#cf--modal-container-"+n+" .cf--modal-spinner",50,"#ffffff");return function(){o(),i.selectAll("#cf--modal-container-"+n).remove()}};e.formatNumber=function(t,e){var n=t.toString().split(".");return n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,"de"===e?".":","),n.join("de"===e?",":".")};e.setHTML=function(t,e){var n=document.querySelector(t);g(n,e)};var g=function(t,e){t.textContent="";var n=(new DOMParser).parseFromString(e,"text/html");Array.from(n.getElementsByTagName("body")[0].childNodes).forEach((function(e){t.append(e)}))};e.addHTML=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(18);e.get=function(t,e){return browser.storage.local.get(t).then((function(n){return n&&null!=n&&!r.objEmpty(n)?"object"==typeof n&&t in n?n[t]:n:e?i(t,e):null}))};var i=function(t,e){var n;return browser.storage.local.set((n={},n[t]=e,n)).then((function(){return"object"==typeof e&&t in e?e[t]:e}))};e.set=i;e.remove=function(t){return browser.storage.local.remove(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.throttle=function(t){return new Promise((function(e){setTimeout(e,t)}))};e.uuid=function(){return"xxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))};e.formatDate=function(t,e){void 0===e&&(e=!1);return r(t.getFullYear())+"/"+r(t.getMonth()+1)+"/"+r(t.getDate())+(e?" "+r(t.getHours())+":"+r(t.getMinutes()):"")};var r=function(t){return t<10?"0"+t:""+t},i=function(t){return t===Math.floor(t)?t:parseFloat(t.toFixed(1))===parseFloat(t.toFixed(2))?t.toFixed(1):t.toFixed(2)};e.formatDuration=function(t){return(t/=1e3)<60?Math.floor(t)+" "+browser.i18n.getMessage("secondsShort"):(t/=60)<60?i(t)+" "+browser.i18n.getMessage("minutesShort"):(t/=60)<24?i(t)+" "+browser.i18n.getMessage("hoursShort"):i(t/=24)+" "+browser.i18n.getMessage("daysShort")};e.objEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};e.downloadFile=function(t,e,n){var r=new Blob([t],{type:e});return browser.downloads.download({filename:n,saveAs:!0,url:URL.createObjectURL(r)}).then((function(t){return Promise.resolve()})).catch((function(t){throw new Error("Download failed. "+JSON.stringify(t))}))};e.debounce=function(t,e,n){void 0===e&&(e=200),void 0===n&&(n=!1);var r=null,i=!1;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=n&&null===r,u=function(){return t.apply(null,o)};null===r?r=setTimeout((function(){r=null,i&&(u(),i=!1)}),e):i=!0,s&&u()}}},function(t,e,n){"use strict";n.r(e),n.d(e,"setupNav",(function(){return a})),n.d(e,"setupVersion",(function(){return s})),n.d(e,"setupFooter",(function(){return u})),n.d(e,"StateManager",(function(){return c}));var r=n(4),i=n(2),o=n(11),a=function(){[["analyse","navAnalysis","vis"],["help","navHelp","help"],["options","settings","options"]].forEach((function(t){Object(i.select)("#icon-"+t[0]).attr("href",browser.runtime.getURL("html/"+t[2]+".html")),Object(i.select)("#label-"+t[0]).text(browser.i18n.getMessage(t[1]))}))},s=function(){Object(i.select)("#version").text("v"+browser.runtime.getManifest().version)},u=function(){Object(r.setHTML)("#footer--legalLink",browser.i18n.getMessage("legal")),Object(r.setHTML)("#footer--contactLink",browser.i18n.getMessage("contact"))},c=function(){function t(t){var e=this;this.default={view:"selection"},this._urlState={},this._localState={},this._dispatcher=Object(o.history)("action"),this._updateView=t,this._dispatcher.on("action",(function(){e.change()})),window.addEventListener("popstate",(function(){e.retrieveUrl()}))}return Object.defineProperty(t.prototype,"urlState",{get:function(){return this._urlState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localState",{get:function(){return this._localState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dispatcher",{get:function(){return this._dispatcher},enumerable:!0,configurable:!0}),t.prototype.retrieveUrl=function(){var t=this;this._urlState={};var e=window.location.href.split("?");e.length>1&&e[1].split("&").forEach((function(e){var n=e.split("=");t._urlState[n[0]]=n[1]}));"view"in this._urlState||(this._urlState.view=this.default.view),this.updateState()},t.prototype.update=function(){this._dispatcher.call("action",this,this.createURL())},t.prototype.updateState=function(){var t=!1;for(var e in this._urlState)e in this._localState&&this._localState[e]===this._urlState[e]||(t=!0);t&&this.change()},t.prototype.change=function(){this._localState=this._urlState,this._updateView()},t.prototype.createURL=function(){var t=this,e=[];return Object.keys(this._urlState).forEach((function(n){e.push(n+"="+t._urlState[n])})),"?"+e.join("&")},t}()},function(t,e,n){var r,i,o,a,s,u,c,f;t.exports=(f=n(1),n(14),n(15),i=(r=f).lib,o=i.Base,a=i.WordArray,s=r.algo,u=s.MD5,c=s.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:u,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n,r=this.cfg,i=r.hasher.create(),o=a.create(),s=o.words,u=r.keySize,c=r.iterations;s.length<u;){n&&i.update(n),n=i.update(t).finalize(e),i.reset();for(var f=1;f<c;f++)n=i.finalize(n),i.reset();o.concat(n)}return o.sigBytes=4*u,o}}),r.EvpKDF=function(t,e,n){return c.create(n).compute(t,e)},f.EvpKDF)},function(t,e,n){var r,i,o;t.exports=(o=n(1),i=(r=o).lib.WordArray,r.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var i=[],o=0;o<n;o+=3)for(var a=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)i.push(r.charAt(a>>>6*(3-s)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(t){var e=t.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<n.length;o++)r[n.charCodeAt(o)]=o}var a=n.charAt(64);if(a){var s=t.indexOf(a);-1!==s&&(e=s)}return function(t,e,n){for(var r=[],o=0,a=0;a<e;a++)if(a%4){var s=n[t.charCodeAt(a-1)]<<a%4*2,u=n[t.charCodeAt(a)]>>>6-a%4*2,c=s|u;r[o>>>2]|=c<<24-o%4*8,o++}return i.create(r,o)}(t,e,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},o.enc.Base64)},function(t,e,n){var r;t.exports=(r=n(1),function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,a=e.algo,s=[];!function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0}();var u=a.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,i=t[r];t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,a=t[e+0],u=t[e+1],d=t[e+2],p=t[e+3],g=t[e+4],v=t[e+5],m=t[e+6],y=t[e+7],b=t[e+8],_=t[e+9],x=t[e+10],w=t[e+11],M=t[e+12],k=t[e+13],A=t[e+14],S=t[e+15],E=o[0],T=o[1],C=o[2],O=o[3];E=c(E,T,C,O,a,7,s[0]),O=c(O,E,T,C,u,12,s[1]),C=c(C,O,E,T,d,17,s[2]),T=c(T,C,O,E,p,22,s[3]),E=c(E,T,C,O,g,7,s[4]),O=c(O,E,T,C,v,12,s[5]),C=c(C,O,E,T,m,17,s[6]),T=c(T,C,O,E,y,22,s[7]),E=c(E,T,C,O,b,7,s[8]),O=c(O,E,T,C,_,12,s[9]),C=c(C,O,E,T,x,17,s[10]),T=c(T,C,O,E,w,22,s[11]),E=c(E,T,C,O,M,7,s[12]),O=c(O,E,T,C,k,12,s[13]),C=c(C,O,E,T,A,17,s[14]),E=f(E,T=c(T,C,O,E,S,22,s[15]),C,O,u,5,s[16]),O=f(O,E,T,C,m,9,s[17]),C=f(C,O,E,T,w,14,s[18]),T=f(T,C,O,E,a,20,s[19]),E=f(E,T,C,O,v,5,s[20]),O=f(O,E,T,C,x,9,s[21]),C=f(C,O,E,T,S,14,s[22]),T=f(T,C,O,E,g,20,s[23]),E=f(E,T,C,O,_,5,s[24]),O=f(O,E,T,C,A,9,s[25]),C=f(C,O,E,T,p,14,s[26]),T=f(T,C,O,E,b,20,s[27]),E=f(E,T,C,O,k,5,s[28]),O=f(O,E,T,C,d,9,s[29]),C=f(C,O,E,T,y,14,s[30]),E=l(E,T=f(T,C,O,E,M,20,s[31]),C,O,v,4,s[32]),O=l(O,E,T,C,b,11,s[33]),C=l(C,O,E,T,w,16,s[34]),T=l(T,C,O,E,A,23,s[35]),E=l(E,T,C,O,u,4,s[36]),O=l(O,E,T,C,g,11,s[37]),C=l(C,O,E,T,y,16,s[38]),T=l(T,C,O,E,x,23,s[39]),E=l(E,T,C,O,k,4,s[40]),O=l(O,E,T,C,a,11,s[41]),C=l(C,O,E,T,p,16,s[42]),T=l(T,C,O,E,m,23,s[43]),E=l(E,T,C,O,_,4,s[44]),O=l(O,E,T,C,M,11,s[45]),C=l(C,O,E,T,S,16,s[46]),E=h(E,T=l(T,C,O,E,d,23,s[47]),C,O,a,6,s[48]),O=h(O,E,T,C,y,10,s[49]),C=h(C,O,E,T,A,15,s[50]),T=h(T,C,O,E,v,21,s[51]),E=h(E,T,C,O,M,6,s[52]),O=h(O,E,T,C,p,10,s[53]),C=h(C,O,E,T,x,15,s[54]),T=h(T,C,O,E,u,21,s[55]),E=h(E,T,C,O,b,6,s[56]),O=h(O,E,T,C,S,10,s[57]),C=h(C,O,E,T,m,15,s[58]),T=h(T,C,O,E,k,21,s[59]),E=h(E,T,C,O,g,6,s[60]),O=h(O,E,T,C,w,10,s[61]),C=h(C,O,E,T,d,15,s[62]),T=h(T,C,O,E,_,21,s[63]),o[0]=o[0]+E|0,o[1]=o[1]+T|0,o[2]=o[2]+C|0,o[3]=o[3]+O|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var o=t.floor(r/4294967296),a=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,u=s.words,c=0;c<4;c++){var f=u[c];u[c]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)}return s},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function c(t,e,n,r,i,o,a){var s=t+(e&n|~e&r)+i+a;return(s<<o|s>>>32-o)+e}function f(t,e,n,r,i,o,a){var s=t+(e&r|n&~r)+i+a;return(s<<o|s>>>32-o)+e}function l(t,e,n,r,i,o,a){var s=t+(e^n^r)+i+a;return(s<<o|s>>>32-o)+e}function h(t,e,n,r,i,o,a){var s=t+(n^(e|~r))+i+a;return(s<<o|s>>>32-o)+e}e.MD5=o._createHelper(u),e.HmacMD5=o._createHmacHelper(u)}(Math),r.MD5)},function(t,e,n){!function(t,e){"use strict";var n=function(t){var n,r,i,o;return n=Object.create(null),i=Array.prototype.slice.call(arguments),r=e.dispatch.apply(this,i),o=function(t,e,n){window&&window.history&&window.history.pushState(t,e,n)},n.url=function(t){return t&&"function"!=typeof t&&console.error("optional argument to the .url() method of d3.history object must be a function"),"function"==typeof t?(o=t,n):o},n.on=function(t,e){return"string"!=typeof t&&console.error("first argument to .on() method of d3.history object must be an event name"),"function"!=typeof e&&console.error("second argument to .on() method of d3.history object must be a function"),r.on(t,e),n},n.call=function(t){var e,r,i,o;return e=arguments[0],r=arguments[1]||null,i=arguments[2],o=Array.prototype.slice.call(arguments,3)||null,n.apply(e,r,i,o),n},n.apply=function(t,e,i,a){return a=a||null,e=e||null,"string"!=typeof i&&console.error("third argument to history dispatcher must be a string with which to update the url bar"),o(a,null,i),r.apply(t,e,a),n},n};t.history=n,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(0))},function(t,e,n){var r,i,o,a,s,u;t.exports=(u=n(1),i=(r=u).lib,o=i.Base,a=i.WordArray,(s=r.x64={}).Word=o.extend({init:function(t,e){this.high=t,this.low=e}}),s.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],r=0;r<e;r++){var i=t[r];n.push(i.high),n.push(i.low)}return a.create(n,this.sigBytes)},clone:function(){for(var t=o.clone.call(this),e=t.words=this.words.slice(0),n=e.length,r=0;r<n;r++)e[r]=e[r].clone();return t}}),u)},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(27),a=((r={})[o.config.service_key]=o,r);e.services=a;e.identifyService=function(t){var e=null;return Object.keys(a).forEach((function(n){var r=t.match(a[n].config.regex);null!==r&&(null===t.match(a[n].config.regex_exclude)&&(e=[n,r[1]]))})),e};e.getScrapes=function(){return Promise.all(Object.keys(a).map((function(t){return i.get("s--"+t+"--u",[])}))).then((function(t){return Promise.all(t.map((function(t,e){return Promise.all(t.map((function(t){return i.get("s--"+Object.keys(a)[e]+"--nw--"+t,{})})))}))).then((function(e){var n=[];return e.forEach((function(e,r){e.forEach((function(e,i){Object.keys(e).forEach((function(o){n.push({callCount:e[o].callCount,completeCount:e[o].completeCount,completed:e[o].completed,date:e[o].date,nUuid:o,nodeCount:e[o].nodeCount,screenName:t[r][i],service:Object.keys(a)[r],state:e[o].state})}))}))})),n}))}))}},function(t,e,n){var r,i,o,a,s,u,c,f;t.exports=(f=n(1),i=(r=f).lib,o=i.WordArray,a=i.Hasher,s=r.algo,u=[],c=s.SHA1=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=0;c<80;c++){if(c<16)u[c]=0|t[e+c];else{var f=u[c-3]^u[c-8]^u[c-14]^u[c-16];u[c]=f<<1|f>>>31}var l=(r<<5|r>>>27)+s+u[c];l+=c<20?1518500249+(i&o|~i&a):c<40?1859775393+(i^o^a):c<60?(i&o|i&a|o&a)-1894007588:(i^o^a)-899497514,s=a,a=o,o=i<<30|i>>>2,i=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}}),r.SHA1=a._createHelper(c),r.HmacSHA1=a._createHmacHelper(c),f.SHA1)},function(t,e,n){var r,i,o,a;t.exports=(r=n(1),o=(i=r).lib.Base,a=i.enc.Utf8,void(i.algo.HMAC=o.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=a.parse(e));var n=t.blockSize,r=4*n;e.sigBytes>r&&(e=t.finalize(e)),e.clamp();for(var i=this._oKey=e.clone(),o=this._iKey=e.clone(),s=i.words,u=o.words,c=0;c<n;c++)s[c]^=1549556828,u[c]^=909522486;i.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})))},,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.throttle=function(t){return new Promise((function(e){setTimeout(e,t)}))};e.uuid=function(){return"xxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))};e.formatDate=function(t,e){void 0===e&&(e=!1);return r(t.getFullYear())+"/"+r(t.getMonth()+1)+"/"+r(t.getDate())+(e?" "+r(t.getHours())+":"+r(t.getMinutes()):"")};var r=function(t){return t<10?"0"+t:""+t},i=function(t){return t===Math.floor(t)?t:parseFloat(t.toFixed(1))===parseFloat(t.toFixed(2))?t.toFixed(1):t.toFixed(2)};e.formatDuration=function(t){return(t/=1e3)<60?Math.floor(t)+" "+browser.i18n.getMessage("secondsShort"):(t/=60)<60?i(t)+" "+browser.i18n.getMessage("minutesShort"):(t/=60)<24?i(t)+" "+browser.i18n.getMessage("hoursShort"):i(t/=24)+" "+browser.i18n.getMessage("daysShort")};e.objEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};e.downloadFile=function(t,e,n){var r=new Blob([t],{type:e});return browser.downloads.download({filename:n,saveAs:!0,url:URL.createObjectURL(r)}).then((function(t){return Promise.resolve()})).catch((function(t){throw new Error("Download failed. "+JSON.stringify(t))}))};e.debounce=function(t,e,n){void 0===e&&(e=200),void 0===n&&(n=!1);var r=null,i=!1;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=n&&null===r,u=function(){return t.apply(null,o)};null===r?r=setTimeout((function(){r=null,i&&(u(),i=!1)}),e):i=!0,s&&u()}}},,,,,function(t,e){var n;n=function(){return this}();try{"object"==typeof window&&(n=window)}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r;t.exports=(r=n(1),function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,a=e.algo,s=[],u=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,i=0;i<64;)e(r)&&(i<8&&(s[i]=n(t.pow(r,.5))),u[i]=n(t.pow(r,1/3)),i++),r++}();var c=[],f=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],f=n[5],l=n[6],h=n[7],d=0;d<64;d++){if(d<16)c[d]=0|t[e+d];else{var p=c[d-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,v=c[d-2],m=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;c[d]=g+c[d-7]+m+c[d-16]}var y=r&i^r&o^i&o,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),_=h+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&f^~s&l)+u[d]+c[d];h=l,l=f,f=s,s=a+_|0,a=o,o=i,i=r,r=_+(b+y)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+f|0,n[6]=n[6]+l|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=o._createHelper(f),e.HmacSHA256=o._createHmacHelper(f)}(Math),r.SHA256)},function(t,e,n){var r;t.exports=(r=n(1),n(12),function(){var t=r,e=t.lib.Hasher,n=t.x64,i=n.Word,o=n.WordArray,a=t.algo;function s(){return i.create.apply(i,arguments)}var u=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],c=[];!function(){for(var t=0;t<80;t++)c[t]=s()}();var f=a.SHA512=e.extend({_doReset:function(){this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],f=n[5],l=n[6],h=n[7],d=r.high,p=r.low,g=i.high,v=i.low,m=o.high,y=o.low,b=a.high,_=a.low,x=s.high,w=s.low,M=f.high,k=f.low,A=l.high,S=l.low,E=h.high,T=h.low,C=d,O=p,P=g,N=v,B=m,D=y,z=b,R=_,L=x,I=w,j=M,U=k,F=A,H=S,q=E,V=T,Y=0;Y<80;Y++){var W,G,X=c[Y];if(Y<16)G=X.high=0|t[e+2*Y],W=X.low=0|t[e+2*Y+1];else{var K=c[Y-15],Q=K.high,$=K.low,Z=(Q>>>1|$<<31)^(Q>>>8|$<<24)^Q>>>7,J=($>>>1|Q<<31)^($>>>8|Q<<24)^($>>>7|Q<<25),tt=c[Y-2],et=tt.high,nt=tt.low,rt=(et>>>19|nt<<13)^(et<<3|nt>>>29)^et>>>6,it=(nt>>>19|et<<13)^(nt<<3|et>>>29)^(nt>>>6|et<<26),ot=c[Y-7],at=ot.high,st=ot.low,ut=c[Y-16],ct=ut.high,ft=ut.low;G=(G=(G=Z+at+((W=J+st)>>>0<J>>>0?1:0))+rt+((W+=it)>>>0<it>>>0?1:0))+ct+((W+=ft)>>>0<ft>>>0?1:0),X.high=G,X.low=W}var lt,ht=L&j^~L&F,dt=I&U^~I&H,pt=C&P^C&B^P&B,gt=O&N^O&D^N&D,vt=(C>>>28|O<<4)^(C<<30|O>>>2)^(C<<25|O>>>7),mt=(O>>>28|C<<4)^(O<<30|C>>>2)^(O<<25|C>>>7),yt=(L>>>14|I<<18)^(L>>>18|I<<14)^(L<<23|I>>>9),bt=(I>>>14|L<<18)^(I>>>18|L<<14)^(I<<23|L>>>9),_t=u[Y],xt=_t.high,wt=_t.low,Mt=q+yt+((lt=V+bt)>>>0<V>>>0?1:0),kt=mt+gt;q=F,V=H,F=j,H=U,j=L,U=I,L=z+(Mt=(Mt=(Mt=Mt+ht+((lt+=dt)>>>0<dt>>>0?1:0))+xt+((lt+=wt)>>>0<wt>>>0?1:0))+G+((lt+=W)>>>0<W>>>0?1:0))+((I=R+lt|0)>>>0<R>>>0?1:0)|0,z=B,R=D,B=P,D=N,P=C,N=O,C=Mt+(vt+pt+(kt>>>0<mt>>>0?1:0))+((O=lt+kt|0)>>>0<lt>>>0?1:0)|0}p=r.low=p+O,r.high=d+C+(p>>>0<O>>>0?1:0),v=i.low=v+N,i.high=g+P+(v>>>0<N>>>0?1:0),y=o.low=y+D,o.high=m+B+(y>>>0<D>>>0?1:0),_=a.low=_+R,a.high=b+z+(_>>>0<R>>>0?1:0),w=s.low=w+I,s.high=x+L+(w>>>0<I>>>0?1:0),k=f.low=k+U,f.high=M+j+(k>>>0<U>>>0?1:0),S=l.low=S+H,l.high=A+F+(S>>>0<H>>>0?1:0),T=h.low=T+V,h.high=E+q+(T>>>0<V>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),e[31+(r+128>>>10<<5)]=n,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=e.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});t.SHA512=e._createHelper(f),t.HmacSHA512=e._createHmacHelper(f)}(),r.SHA512)},,function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.removeNetwork=e.getUsers=e.getUser=e.getFriendsIds=e.getFriends=e.createOptions=e.config=e.authRequired=e.auth=void 0;var o=n(5),a=n(4),s=n(28);e.config=s.default;var u=n(29),c=new u({consumer_key:s.default.api_key,consumer_secret:s.default.api_secret}),f=function(){return o.get("twitter--auth-token").then((function(t){return!t||void 0===t||!("oauth_token"in t)||l(t)}))};e.authRequired=f;var l=function(t){return h(t).get("account/verify_credentials").then((function(t){return!("_headers"in t)||!("map"in t._headers)||-1===t._headers.map.status.indexOf("200")}))};e.createOptions=function(t){f().then((function(e){e?(a.addHTML(t,"<p>"+browser.i18n.getMessage("servicesTwitterAuthorizeNote")+"</p><br /><button id='twitter--auth-button'>"+browser.i18n.getMessage("servicesTwitterAuthorize")+"</button>"),document.getElementById("twitter--auth-button").addEventListener("click",(function(){g(t)}))):a.addHTML(t,browser.i18n.getMessage("servicesTwitterAuthorized"))})).catch((function(t){throw t}))};var h=function(t){return new u({access_token_key:t.oauth_token,access_token_secret:t.oauth_token_secret,consumer_key:s.default.api_key,consumer_secret:s.default.api_secret})},d=function(t,e){return o.get("twitter--auth-token").then((function(n){return h(n).get(t,e)})).catch((function(t){return{errors:[t]}}))},p=function(t){return"errors"in t&&t.errors.length>=1||"error"in t?"errors"in t&&"Not authorized."===t.errors[0].message||401===t.httpstatus||"errors"in t&&"code"in t.errors[0]&&89===t.errors[0].code||"error"in t&&"Not authorized."===t.error?r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,f()];case 1:return[2,t.sent()]}}))}))?"auth":"again":("errors"in t&&88===t.errors[0].code||"errors"in t&&"message"in t.errors[0]&&t.errors[0].message.indexOf("Network request failed"),"again"):0===t.httpstatus?"again":"good"},g=function(t){return c.getRequestToken("oob").then((function(t){return o.set("twitter--request-token",t)})).then((function(t){return browser.tabs.create({url:"https://api.twitter.com/oauth/authenticate?oauth_token="+t.oauth_token})})).then((function(){a.addHTML(t,"<p>"+browser.i18n.getMessage("servicesTwitterAuthorizeNote")+"</p><br />                <input                   type='text'                   placeholder='Twitter PIN'                   id='twitter--auth-pin' />                <button                   id='twitter--auth-button'>                  "+browser.i18n.getMessage("servicesTwitterAuthorizeFinish")+"                </button>"),document.getElementById("twitter--auth-button").addEventListener("click",(function(){var e=document.getElementById("twitter--auth-pin").value;e&&7===e.length?v(t,e):alert(browser.i18n.getMessage("servicesTwitterAuthAlert"))}))}))};e.auth=g;var v=function(t,e){return o.get("twitter--request-token").then((function(t){return c.getAccessToken({oauth_token:t.oauth_token,oauth_verifier:e})})).then((function(e){o.set("twitter--auth-token",e),a.addHTML(t,browser.i18n.getMessage("servicesTwitterAuthorized"))}))},m=function(t){var e=t.lastIndexOf("normal");return e>0&&(t=t.substr(0,e)+"bigger"+t.substr(e+"normal".length)),t};e.getUser=function(t,e,n,r){return d("users/show",{screen_name:t}).then((function(i){var a=p(i);return"again"===a?(r.call(s.default.service_key+"--getUser",[t],e,n),Promise.resolve()):"auth"!==a?o.get("s--"+s.default.service_key+"--nw--"+t,{}).then((function(a){var u=n;return a[u]={callCount:null,completeCount:0,date:Date.now(),lastUpdated:Date.now(),screenName:t,state:"queuing"},o.set("s--"+s.default.service_key+"--nw--"+t,a).then((function(){return o.set("s--"+s.default.service_key+"--a--"+t+"-"+u+"--c",{followers_count:i.followers_count,friends_count:i.friends_count,handle:t,id:i.id_str,image:m(i.profile_image_url_https),name:i.name})})).then((function(){return r.call(s.default.service_key+"--getFriendsIds",[t,void 0,t,u,-1],e,n),Promise.resolve()}))})):void console.log("AAAAHHHHH auth me!")}))};var y=function(t,e,n,r){return o.get("s--"+s.default.service_key+"--a--"+n+"-"+r+"--n",{}).then((function(t){return e in t&&!t[e].protected}))};e.getFriendsIds=function(t,e,n,r,i,a,u,c){return o.get("s--"+s.default.service_key+"--nw--"+n,{}).then((function(t){return t[r].state="loading",o.set("s--"+s.default.service_key+"--nw--"+n,t)})).then((function(){return y(0,e,n,r)})).then((function(f){if(f||t===n){var l={count:5e3,cursor:i,stringify_ids:!0};return null!=e&&e?Object.assign(l,{user_id:e}):Object.assign(l,{screen_name:t}),d("friends/ids",l).then((function(f){var l=p(f);return"again"===l?(c.call(s.default.service_key+"--getFriendsIds",[t,e,n,r,i],a,u),Promise.resolve()):"auth"!==l?null===f.ids?(c.call(s.default.service_key+"--getFriendsIds",[t,e,n,r,i],a,u),Promise.resolve()):o.get("s--"+s.default.service_key+"--a--"+n+"-"+r+"--n",{}).then((function(i){if(t===n){var a={};f.ids.forEach((function(t){a[t]={followers:[],followers_count:0,friends:[],friends_count:0,handle:null,image:null,name:null}})),Object.assign(i,a)}else f.ids.forEach((function(t){-1===i[e].friends.indexOf(t)&&i[e].friends.push(t)}));return o.set("s--"+s.default.service_key+"--a--"+n+"-"+r+"--n",i)})).then((function(i){return f.next_cursor_str&&"0"!==f.next_cursor_str&&0!==f.next_cursor_str&&i[e].friends.length<2e4?(c.call(s.default.service_key+"--getFriendsIds",[t,e,n,r,f.next_cursor_str],a,u),Promise.resolve()):(c.call("network--estimateCompletion",[s.default.service_key,n,r],a,u),n===t?(c.call(s.default.service_key+"--getFriends",[t,e,n,r,-1],a,u),o.get("s--"+s.default.service_key+"--a--"+n+"-"+r+"--n",{}).then((function(t){return Object.keys(t).forEach((function(t){c.call(s.default.service_key+"--getFriendsIds",[void 0,t,n,r,-1],a,u)})),Promise.resolve()}))):Promise.resolve())})):void console.log("AAAAHHHHH auth me!")}))}return Promise.resolve()}))};e.getFriends=function(t,e,n,r,i,a,u,c){return y(0,e,n,r).then((function(f){if(f||t===n){var l={count:200,cursor:i,include_user_entities:!1,skip_status:!0};return null!=e&&e?Object.assign(l,{user_id:e}):Object.assign(l,{screen_name:t}),d("friends/list",l).then((function(f){var l=p(f);return"again"===l?(c.call(s.default.service_key+"--getFriends",[t,e,n,r,i],a,u),Promise.resolve()):"auth"!==l?o.get("s--"+s.default.service_key+"--a--"+n+"-"+r+"--n",{}).then((function(t){return f.users.forEach((function(e){e.id_str in t&&(t[e.id_str].name=e.name,t[e.id_str].handle=e.screen_name,t[e.id_str].followers_count=e.followers_count,t[e.id_str].friends_count=e.friends_count,t[e.id_str].handle=e.screen_name,t[e.id_str].image=m(e.profile_image_url_https),t[e.id_str].protected=e.protected)})),o.set("s--"+s.default.service_key+"--a--"+n+"-"+r+"--n",t)})).then((function(){return f.next_cursor_str&&"0"!==f.next_cursor_str&&0!==f.next_cursor_str?c.call(s.default.service_key+"--getFriends",[t,e,n,r,f.next_cursor_str],a,u):c.call("network--estimateCompletion",[s.default.service_key,n,r]),Promise.resolve()})):void console.log("AAAAHHHHH auth me!")}))}return Promise.resolve()}))};e.getUsers=function(t,e,n,r,i){return Promise.all([o.get("s--"+s.default.service_key+"--a--"+t+"-"+e+"--nw",{proxyKeys:[]}),o.get("s--"+s.default.service_key+"--a--"+t+"-"+e+"--n",{})]).then((function(a){var u=[],c=!1,f=a[0].nodes.length/20;if(Object.keys(a[0].proxyKeys).forEach((function(t){!(t in a[1])&&a[0].proxies[a[0].proxyKeys[t]][5]>f&&(u.length<100?u.push(t):c=!0)})),u.length>0){var l={user_id:u.join(",")};return d("users/lookup",l).then((function(f){var l=p(f);return"again"===l?(i.call(s.default.service_key+"--getUsers",[t,e],n,r),Promise.resolve()):"auth"!==l?(f.forEach((function(t){t.id_str in a[1]||(a[1][t.id_str]={}),a[1][t.id_str].name=t.name,a[1][t.id_str].followers_count=t.followers_count,a[1][t.id_str].friends_count=t.friends_count,a[1][t.id_str].handle=t.screen_name,a[1][t.id_str].image=m(t.profile_image_url_https),a[1][t.id_str].protected=t.protected})),u.forEach((function(t){t in a[1]||(a[1][t]={})})),o.set("s--"+s.default.service_key+"--a--"+t+"-"+e+"--n",a[1]).then((function(o){c&&i?i.call(s.default.service_key+"--getUsers",[t,e],n,r):(i.call("network--cleanupNetwork",[s.default.service_key,t,e],n,r),Promise.resolve())}))):void console.log("AAAAHHHHH auth me!")}))}return i.call("network--cleanupNetwork",[s.default.service_key,t,e],n,r),Promise.resolve()}))};e.removeNetwork=function(t,e){return o.get("s--"+s.default.service_key+"--nw--"+t).then((function(n){return delete n[e],o.set("s--"+s.default.service_key+"--nw--"+t,n).then((function(){return Promise.all([o.remove("s--"+s.default.service_key+"--a--"+t+"-"+e+"--c"),o.remove("s--"+s.default.service_key+"--a--"+t+"-"+e+"--n")])}))}))}},function(t,e,n){"use strict";n.r(e),e.default={api_key:"kePD9gflNGY9JgDgvObYkZqI4",api_secret:"gNbCOEvQpfOX8s3toKJUZLGzyDwttsl0yuki43NeCNZiokT5Y5",auth:!0,service_name:"Twitter",service_key:"twitter",queue_functions:[{name:"getUser",paramCount:[1,1],skip:!1,passDown:!0,timeout:6e4},{name:"getUsers",paramCount:[2,2],skip:!0,passDown:!0,timeout:1e3},{name:"getFriendsIds",paramCount:[5,5],skip:!0,passDown:!0,timeout:6e4},{name:"getFriends",paramCount:[5,5],skip:!0,passDown:!0,timeout:6e4}],regex:/http[s]*:\/\/[wwww.]*twitter\.com[\/i\/user]*\/((?!(settings|hashtag|status|hashtags|explore|notifications|messages|home|compose|search|tos))[^\/]{3,})/,regex_exclude:/http[s]*:\/\/[wwww.]*twitter\.com\/([^\/]{3,})\/(status|followers_you_follow|following|followers)/}},function(t,e,n){function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var i=n(30),o=n(54),a=n(55),s=n(56),u=function(t,e){return void 0===e&&(e="1.1"),"https://"+t+".twitter.com/"+e},c={subdomain:"api",consumer_key:null,consumer_secret:null,access_token_key:null,access_token_secret:null,bearer_token:null,version:"1.1"},f=["direct_messages/events/new","direct_messages/welcome_messages/new","direct_messages/welcome_messages/rules/new","media/metadata/create","collections/entries/curate"],l={"Content-Type":"application/json",Accept:"application/json"};t.exports=function(){function t(t){var e,n=Object.assign({},c,t);this.authType=n.bearer_token?"App":"User",this.client=o({consumer:{key:(e={key:n.consumer_key,secret:n.consumer_secret}).key,secret:e.secret},signature_method:"HMAC-SHA1",hash_function:function(t,e){return i.HmacSHA1(t,e).toString(i.enc.Base64)}}),this.token={key:n.access_token_key,secret:n.access_token_secret},this.url=u(n.subdomain,n.version),this.oauth=u(n.subdomain,"oauth"),this.config=n}t._handleResponse=function(t){try{var e=t.headers;return t.ok?204===t.status||"0"===t.headers.get("content-length")?Promise.resolve({_headers:e}):Promise.resolve(t.json().then((function(t){return t._headers=e,t}))):Promise.resolve(t.json()).then((function(t){throw r({_headers:e},t)}))}catch(t){return Promise.reject(t)}},t._handleResponseTextOrJson=function(t){try{return Promise.resolve(t.text()).then((function(e){if(t.ok)return s.parse(e);var n;try{n=JSON.parse(e)}catch(t){n=e}return Promise.reject(n)}))}catch(t){return Promise.reject(t)}};var e=t.prototype;return e.getRequestToken=function(e){try{var n={url:this.oauth+"/request_token",method:"POST"},r={};e&&(r={oauth_callback:e}),r&&(n.url+="?"+s.stringify(r));var i=this.client.toHeader(this.client.authorize(n,{}));return Promise.resolve(a(n.url,{method:"POST",headers:Object.assign({},l,i)}).then(t._handleResponseTextOrJson))}catch(e){return Promise.reject(e)}},e.getAccessToken=function(e){try{var n={url:this.oauth+"/access_token",method:"POST"},r={oauth_verifier:e.oauth_verifier,oauth_token:e.oauth_token};r.oauth_verifier&&r.oauth_token&&(n.url+="?"+s.stringify(r));var i=this.client.toHeader(this.client.authorize(n));return Promise.resolve(a(n.url,{method:"POST",headers:Object.assign({},l,i)}).then(t._handleResponseTextOrJson))}catch(e){return Promise.reject(e)}},e._makeRequest=function(t,e,n){var r={url:this.url+"/"+e+".json",method:t};return n&&("POST"===t?r.data=n:r.url+="?"+s.stringify(n)),{requestData:r,headers:"User"===this.authType?this.client.toHeader(this.client.authorize(r,this.token)):{Authorization:"Bearer "+this.config.bearer_token}}},e.get=function(e,n){var r=this._makeRequest("GET",e,n);return a(r.requestData.url,{headers:r.headers}).then(t._handleResponse)},e.post=function(e,n){var r=this._makeRequest("POST",e,f.includes(e)?null:n),i=r.requestData,o=Object.assign({},l,r.headers);return f.includes(e)?n=JSON.stringify(n):(n=s.stringify(n).replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"),o["Content-Type"]="application/x-www-form-urlencoded"),a(i.url,{method:"POST",headers:o,body:n}).then(t._handleResponse)},e.put=function(e,n,r){var i=this._makeRequest("PUT",e,n),o=i.requestData,s=Object.assign({},l,i.headers);return r=JSON.stringify(r),a(o.url,{method:"PUT",headers:s,body:r}).then(t._handleResponse)},t}()},function(t,e,n){var r;t.exports=(r=n(1),n(12),n(31),n(32),n(9),n(10),n(14),n(24),n(33),n(25),n(34),n(35),n(36),n(15),n(37),n(8),n(3),n(38),n(39),n(40),n(41),n(42),n(43),n(44),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),r)},function(t,e,n){var r;t.exports=(r=n(1),function(){if("function"==typeof ArrayBuffer){var t=r.lib.WordArray,e=t.init;(t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var n=t.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=t[i]<<24-i%4*8;e.call(this,r,n)}else e.apply(this,arguments)}).prototype=t}}(),r.lib.WordArray)},function(t,e,n){var r;t.exports=(r=n(1),function(){var t=r,e=t.lib.WordArray,n=t.enc;function i(t){return t<<8&4278255360|t>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i+=2){var o=e[i>>>2]>>>16-i%4*8&65535;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var n=t.length,r=[],i=0;i<n;i++)r[i>>>1]|=t.charCodeAt(i)<<16-i%2*16;return e.create(r,2*n)}},n.Utf16LE={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o+=2){var a=i(e[o>>>2]>>>16-o%4*8&65535);r.push(String.fromCharCode(a))}return r.join("")},parse:function(t){for(var n=t.length,r=[],o=0;o<n;o++)r[o>>>1]|=i(t.charCodeAt(o)<<16-o%2*16);return e.create(r,2*n)}}}(),r.enc.Utf16)},function(t,e,n){var r,i,o,a,s,u;t.exports=(u=n(1),n(24),i=(r=u).lib.WordArray,o=r.algo,a=o.SHA256,s=o.SHA224=a.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=a._doFinalize.call(this);return t.sigBytes-=4,t}}),r.SHA224=a._createHelper(s),r.HmacSHA224=a._createHmacHelper(s),u.SHA224)},function(t,e,n){var r,i,o,a,s,u,c,f;t.exports=(f=n(1),n(12),n(25),i=(r=f).x64,o=i.Word,a=i.WordArray,s=r.algo,u=s.SHA512,c=s.SHA384=u.extend({_doReset:function(){this._hash=new a.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var t=u._doFinalize.call(this);return t.sigBytes-=16,t}}),r.SHA384=u._createHelper(c),r.HmacSHA384=u._createHmacHelper(c),f.SHA384)},function(t,e,n){var r;t.exports=(r=n(1),n(12),function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,a=e.x64.Word,s=e.algo,u=[],c=[],f=[];!function(){for(var t=1,e=0,n=0;n<24;n++){u[t+5*e]=(n+1)*(n+2)/2%64;var r=(2*t+3*e)%5;t=e%5,e=r}for(t=0;t<5;t++)for(e=0;e<5;e++)c[t+5*e]=e+(2*t+3*e)%5*5;for(var i=1,o=0;o<24;o++){for(var s=0,l=0,h=0;h<7;h++){if(1&i){var d=(1<<h)-1;d<32?l^=1<<d:s^=1<<d-32}128&i?i=i<<1^113:i<<=1}f[o]=a.create(s,l)}}();var l=[];!function(){for(var t=0;t<25;t++)l[t]=a.create()}();var h=s.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var n=this._state,r=this.blockSize/2,i=0;i<r;i++){var o=t[e+2*i],a=t[e+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(T=n[i]).high^=a,T.low^=o}for(var s=0;s<24;s++){for(var h=0;h<5;h++){for(var d=0,p=0,g=0;g<5;g++)d^=(T=n[h+5*g]).high,p^=T.low;var v=l[h];v.high=d,v.low=p}for(h=0;h<5;h++){var m=l[(h+4)%5],y=l[(h+1)%5],b=y.high,_=y.low;for(d=m.high^(b<<1|_>>>31),p=m.low^(_<<1|b>>>31),g=0;g<5;g++)(T=n[h+5*g]).high^=d,T.low^=p}for(var x=1;x<25;x++){var w=(T=n[x]).high,M=T.low,k=u[x];k<32?(d=w<<k|M>>>32-k,p=M<<k|w>>>32-k):(d=M<<k-32|w>>>64-k,p=w<<k-32|M>>>64-k);var A=l[c[x]];A.high=d,A.low=p}var S=l[0],E=n[0];for(S.high=E.high,S.low=E.low,h=0;h<5;h++)for(g=0;g<5;g++){var T=n[x=h+5*g],C=l[x],O=l[(h+1)%5+5*g],P=l[(h+2)%5+5*g];T.high=C.high^~O.high&P.high,T.low=C.low^~O.low&P.low}T=n[0];var N=f[s];T.high^=N.high,T.low^=N.low}},_doFinalize:function(){var e=this._data,n=e.words,r=(this._nDataBytes,8*e.sigBytes),o=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(t.ceil((r+1)/o)*o>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,u=s/8,c=[],f=0;f<u;f++){var l=a[f],h=l.high,d=l.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),c.push(d),c.push(h)}return new i.init(c,s)},clone:function(){for(var t=o.clone.call(this),e=t._state=this._state.slice(0),n=0;n<25;n++)e[n]=e[n].clone();return t}});e.SHA3=o._createHelper(h),e.HmacSHA3=o._createHmacHelper(h)}(Math),r.SHA3)},function(t,e,n){var r;t.exports=(r=n(1),
/** @preserve
	(c) 2012 by Cédric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,a=e.algo,s=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),l=i.create([0,1518500249,1859775393,2400959708,2840853838]),h=i.create([1352829926,1548603684,1836072691,2053994217,0]),d=a.RIPEMD160=o.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,i=t[r];t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,a,d,_,x,w,M,k,A,S,E,T=this._hash.words,C=l.words,O=h.words,P=s.words,N=u.words,B=c.words,D=f.words;for(w=o=T[0],M=a=T[1],k=d=T[2],A=_=T[3],S=x=T[4],n=0;n<80;n+=1)E=o+t[e+P[n]]|0,E+=n<16?p(a,d,_)+C[0]:n<32?g(a,d,_)+C[1]:n<48?v(a,d,_)+C[2]:n<64?m(a,d,_)+C[3]:y(a,d,_)+C[4],E=(E=b(E|=0,B[n]))+x|0,o=x,x=_,_=b(d,10),d=a,a=E,E=w+t[e+N[n]]|0,E+=n<16?y(M,k,A)+O[0]:n<32?m(M,k,A)+O[1]:n<48?v(M,k,A)+O[2]:n<64?g(M,k,A)+O[3]:p(M,k,A)+O[4],E=(E=b(E|=0,D[n]))+S|0,w=S,S=A,A=b(k,10),k=M,M=E;E=T[1]+d+A|0,T[1]=T[2]+_+S|0,T[2]=T[3]+x+w|0,T[3]=T[4]+o+M|0,T[4]=T[0]+a+k|0,T[0]=E},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process();for(var i=this._hash,o=i.words,a=0;a<5;a++){var s=o[a];o[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function p(t,e,n){return t^e^n}function g(t,e,n){return t&e|~t&n}function v(t,e,n){return(t|~e)^n}function m(t,e,n){return t&n|e&~n}function y(t,e,n){return t^(e|~n)}function b(t,e){return t<<e|t>>>32-e}e.RIPEMD160=o._createHelper(d),e.HmacRIPEMD160=o._createHmacHelper(d)}(Math),r.RIPEMD160)},function(t,e,n){var r,i,o,a,s,u,c,f,l;t.exports=(l=n(1),n(14),n(15),i=(r=l).lib,o=i.Base,a=i.WordArray,s=r.algo,u=s.SHA1,c=s.HMAC,f=s.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:u,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,r=c.create(n.hasher,t),i=a.create(),o=a.create([1]),s=i.words,u=o.words,f=n.keySize,l=n.iterations;s.length<f;){var h=r.update(e).finalize(o);r.reset();for(var d=h.words,p=d.length,g=h,v=1;v<l;v++){g=r.finalize(g),r.reset();for(var m=g.words,y=0;y<p;y++)d[y]^=m[y]}i.concat(h),u[0]++}return i.sigBytes=4*f,i}}),r.PBKDF2=function(t,e,n){return f.create(n).compute(t,e)},l.PBKDF2)},function(t,e,n){var r;t.exports=(r=n(1),n(3),r.mode.CFB=function(){var t=r.lib.BlockCipherMode.extend();function e(t,e,n,r){var i,o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,r.encryptBlock(i,0);for(var a=0;a<n;a++)t[e+a]^=i[a]}return t.Encryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize;e.call(this,t,n,i,r),this._prevBlock=t.slice(n,n+i)}}),t.Decryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize,o=t.slice(n,n+i);e.call(this,t,n,i,r),this._prevBlock=o}}),t}(),r.mode.CFB)},function(t,e,n){var r,i,o;t.exports=(o=n(1),n(3),o.mode.CTR=(r=o.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var a=o.slice(0);n.encryptBlock(a,0),o[r-1]=o[r-1]+1|0;for(var s=0;s<r;s++)t[e+s]^=a[s]}}),r.Decryptor=i,r),o.mode.CTR)},function(t,e,n){var r;t.exports=(r=n(1),n(3),
/** @preserve
	 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
	 * derived from CryptoJS.mode.CTR
	 * Jan Hruby jhruby.web@gmail.com
	 */
r.mode.CTRGladman=function(){var t=r.lib.BlockCipherMode.extend();function e(t){if(255==(t>>24&255)){var e=t>>16&255,n=t>>8&255,r=255&t;255===e?(e=0,255===n?(n=0,255===r?r=0:++r):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=r}else t+=1<<24;return t}var n=t.Encryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0),function(t){0===(t[0]=e(t[0]))&&(t[1]=e(t[1]))}(a);var s=a.slice(0);r.encryptBlock(s,0);for(var u=0;u<i;u++)t[n+u]^=s[u]}});return t.Decryptor=n,t}(),r.mode.CTRGladman)},function(t,e,n){var r,i,o;t.exports=(o=n(1),n(3),o.mode.OFB=(r=o.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var a=0;a<r;a++)t[e+a]^=o[a]}}),r.Decryptor=i,r),o.mode.OFB)},function(t,e,n){var r,i;t.exports=(i=n(1),n(3),i.mode.ECB=((r=i.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),r.Decryptor=r.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),r),i.mode.ECB)},function(t,e,n){var r;t.exports=(r=n(1),n(3),r.pad.AnsiX923={pad:function(t,e){var n=t.sigBytes,r=4*e,i=r-n%r,o=n+i-1;t.clamp(),t.words[o>>>2]|=i<<24-o%4*8,t.sigBytes+=i},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},r.pad.Ansix923)},function(t,e,n){var r;t.exports=(r=n(1),n(3),r.pad.Iso10126={pad:function(t,e){var n=4*e,i=n-t.sigBytes%n;t.concat(r.lib.WordArray.random(i-1)).concat(r.lib.WordArray.create([i<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},r.pad.Iso10126)},function(t,e,n){var r;t.exports=(r=n(1),n(3),r.pad.Iso97971={pad:function(t,e){t.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(t,e)},unpad:function(t){r.pad.ZeroPadding.unpad(t),t.sigBytes--}},r.pad.Iso97971)},function(t,e,n){var r;t.exports=(r=n(1),n(3),r.pad.ZeroPadding={pad:function(t,e){var n=4*e;t.clamp(),t.sigBytes+=n-(t.sigBytes%n||n)},unpad:function(t){var e=t.words,n=t.sigBytes-1;for(n=t.sigBytes-1;n>=0;n--)if(e[n>>>2]>>>24-n%4*8&255){t.sigBytes=n+1;break}}},r.pad.ZeroPadding)},function(t,e,n){var r;t.exports=(r=n(1),n(3),r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding)},function(t,e,n){var r,i,o,a;t.exports=(a=n(1),n(3),i=(r=a).lib.CipherParams,o=r.enc.Hex,r.format.Hex={stringify:function(t){return t.ciphertext.toString(o)},parse:function(t){var e=o.parse(t);return i.create({ciphertext:e})}},a.format.Hex)},function(t,e,n){var r;t.exports=(r=n(1),n(9),n(10),n(8),n(3),function(){var t=r,e=t.lib.BlockCipher,n=t.algo,i=[],o=[],a=[],s=[],u=[],c=[],f=[],l=[],h=[],d=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var n=0,r=0;for(e=0;e<256;e++){var p=r^r<<1^r<<2^r<<3^r<<4;p=p>>>8^255&p^99,i[n]=p,o[p]=n;var g=t[n],v=t[g],m=t[v],y=257*t[p]^16843008*p;a[n]=y<<24|y>>>8,s[n]=y<<16|y>>>16,u[n]=y<<8|y>>>24,c[n]=y,y=16843009*m^65537*v^257*g^16843008*n,f[p]=y<<24|y>>>8,l[p]=y<<16|y>>>16,h[p]=y<<8|y>>>24,d[p]=y,n?(n=g^t[t[t[m^g]]],r^=t[t[r]]):n=r=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],g=n.AES=e.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4,r=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],a=0;a<r;a++)a<n?o[a]=e[a]:(c=o[a-1],a%n?n>6&&a%n==4&&(c=i[c>>>24]<<24|i[c>>>16&255]<<16|i[c>>>8&255]<<8|i[255&c]):(c=i[(c=c<<8|c>>>24)>>>24]<<24|i[c>>>16&255]<<16|i[c>>>8&255]<<8|i[255&c],c^=p[a/n|0]<<24),o[a]=o[a-n]^c);for(var s=this._invKeySchedule=[],u=0;u<r;u++){if(a=r-u,u%4)var c=o[a];else c=o[a-4];s[u]=u<4||a<=4?c:f[i[c>>>24]]^l[i[c>>>16&255]]^h[i[c>>>8&255]]^d[i[255&c]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,a,s,u,c,i)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,f,l,h,d,o),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,i,o,a,s){for(var u=this._nRounds,c=t[e]^n[0],f=t[e+1]^n[1],l=t[e+2]^n[2],h=t[e+3]^n[3],d=4,p=1;p<u;p++){var g=r[c>>>24]^i[f>>>16&255]^o[l>>>8&255]^a[255&h]^n[d++],v=r[f>>>24]^i[l>>>16&255]^o[h>>>8&255]^a[255&c]^n[d++],m=r[l>>>24]^i[h>>>16&255]^o[c>>>8&255]^a[255&f]^n[d++],y=r[h>>>24]^i[c>>>16&255]^o[f>>>8&255]^a[255&l]^n[d++];c=g,f=v,l=m,h=y}g=(s[c>>>24]<<24|s[f>>>16&255]<<16|s[l>>>8&255]<<8|s[255&h])^n[d++],v=(s[f>>>24]<<24|s[l>>>16&255]<<16|s[h>>>8&255]<<8|s[255&c])^n[d++],m=(s[l>>>24]<<24|s[h>>>16&255]<<16|s[c>>>8&255]<<8|s[255&f])^n[d++],y=(s[h>>>24]<<24|s[c>>>16&255]<<16|s[f>>>8&255]<<8|s[255&l])^n[d++],t[e]=g,t[e+1]=v,t[e+2]=m,t[e+3]=y},keySize:8});t.AES=e._createHelper(g)}(),r.AES)},function(t,e,n){var r;t.exports=(r=n(1),n(9),n(10),n(8),n(3),function(){var t=r,e=t.lib,n=e.WordArray,i=e.BlockCipher,o=t.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],l=o.DES=i.extend({_doReset:function(){for(var t=this._key.words,e=[],n=0;n<56;n++){var r=a[n]-1;e[n]=t[r>>>5]>>>31-r%32&1}for(var i=this._subKeys=[],o=0;o<16;o++){var c=i[o]=[],f=u[o];for(n=0;n<24;n++)c[n/6|0]|=e[(s[n]-1+f)%28]<<31-n%6,c[4+(n/6|0)]|=e[28+(s[n+24]-1+f)%28]<<31-n%6;for(c[0]=c[0]<<1|c[0]>>>31,n=1;n<7;n++)c[n]=c[n]>>>4*(n-1)+3;c[7]=c[7]<<5|c[7]>>>27}var l=this._invSubKeys=[];for(n=0;n<16;n++)l[n]=i[15-n]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,e,n){this._lBlock=t[e],this._rBlock=t[e+1],h.call(this,4,252645135),h.call(this,16,65535),d.call(this,2,858993459),d.call(this,8,16711935),h.call(this,1,1431655765);for(var r=0;r<16;r++){for(var i=n[r],o=this._lBlock,a=this._rBlock,s=0,u=0;u<8;u++)s|=c[u][((a^i[u])&f[u])>>>0];this._lBlock=a,this._rBlock=o^s}var l=this._lBlock;this._lBlock=this._rBlock,this._rBlock=l,h.call(this,1,1431655765),d.call(this,8,16711935),d.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),t[e]=this._lBlock,t[e+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function h(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function d(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}t.DES=i._createHelper(l);var p=o.TripleDES=i.extend({_doReset:function(){var t=this._key.words;if(2!==t.length&&4!==t.length&&t.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var e=t.slice(0,2),r=t.length<4?t.slice(0,2):t.slice(2,4),i=t.length<6?t.slice(0,2):t.slice(4,6);this._des1=l.createEncryptor(n.create(e)),this._des2=l.createEncryptor(n.create(r)),this._des3=l.createEncryptor(n.create(i))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=i._createHelper(p)}(),r.TripleDES)},function(t,e,n){var r;t.exports=(r=n(1),n(9),n(10),n(8),n(3),function(){var t=r,e=t.lib.StreamCipher,n=t.algo,i=n.RC4=e.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes,r=this._S=[],i=0;i<256;i++)r[i]=i;i=0;for(var o=0;i<256;i++){var a=i%n,s=e[a>>>2]>>>24-a%4*8&255;o=(o+r[i]+s)%256;var u=r[i];r[i]=r[o],r[o]=u}this._i=this._j=0},_doProcessBlock:function(t,e){t[e]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var t=this._S,e=this._i,n=this._j,r=0,i=0;i<4;i++){n=(n+t[e=(e+1)%256])%256;var o=t[e];t[e]=t[n],t[n]=o,r|=t[(t[e]+t[n])%256]<<24-8*i}return this._i=e,this._j=n,r}t.RC4=e._createHelper(i);var a=n.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)o.call(this)}});t.RC4Drop=e._createHelper(a)}(),r.RC4)},function(t,e,n){var r;t.exports=(r=n(1),n(9),n(10),n(8),n(3),function(){var t=r,e=t.lib.StreamCipher,n=t.algo,i=[],o=[],a=[],s=n.Rabbit=e.extend({_doReset:function(){for(var t=this._key.words,e=this.cfg.iv,n=0;n<4;n++)t[n]=16711935&(t[n]<<8|t[n]>>>24)|4278255360&(t[n]<<24|t[n]>>>8);var r=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],i=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];for(this._b=0,n=0;n<4;n++)u.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(e){var o=e.words,a=o[0],s=o[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),f=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),l=c>>>16|4294901760&f,h=f<<16|65535&c;for(i[0]^=c,i[1]^=l,i[2]^=f,i[3]^=h,i[4]^=c,i[5]^=l,i[6]^=f,i[7]^=h,n=0;n<4;n++)u.call(this)}},_doProcessBlock:function(t,e){var n=this._X;u.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),t[e+r]^=i[r]},blockSize:4,ivSize:2});function u(){for(var t=this._X,e=this._C,n=0;n<8;n++)o[n]=e[n];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<o[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<o[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<o[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<o[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<o[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<o[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<o[6]>>>0?1:0)|0,this._b=e[7]>>>0<o[7]>>>0?1:0,n=0;n<8;n++){var r=t[n]+e[n],i=65535&r,s=r>>>16,u=((i*i>>>17)+i*s>>>15)+s*s,c=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=u^c}t[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,t[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,t[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,t[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,t[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,t[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,t[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,t[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.Rabbit=e._createHelper(s)}(),r.Rabbit)},function(t,e,n){var r;t.exports=(r=n(1),n(9),n(10),n(8),n(3),function(){var t=r,e=t.lib.StreamCipher,n=t.algo,i=[],o=[],a=[],s=n.RabbitLegacy=e.extend({_doReset:function(){var t=this._key.words,e=this.cfg.iv,n=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],r=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var i=0;i<4;i++)u.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(e){var o=e.words,a=o[0],s=o[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),f=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),l=c>>>16|4294901760&f,h=f<<16|65535&c;for(r[0]^=c,r[1]^=l,r[2]^=f,r[3]^=h,r[4]^=c,r[5]^=l,r[6]^=f,r[7]^=h,i=0;i<4;i++)u.call(this)}},_doProcessBlock:function(t,e){var n=this._X;u.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),t[e+r]^=i[r]},blockSize:4,ivSize:2});function u(){for(var t=this._X,e=this._C,n=0;n<8;n++)o[n]=e[n];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<o[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<o[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<o[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<o[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<o[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<o[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<o[6]>>>0?1:0)|0,this._b=e[7]>>>0<o[7]>>>0?1:0,n=0;n<8;n++){var r=t[n]+e[n],i=65535&r,s=r>>>16,u=((i*i>>>17)+i*s>>>15)+s*s,c=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=u^c}t[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,t[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,t[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,t[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,t[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,t[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,t[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,t[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.RabbitLegacy=e._createHelper(s)}(),r.RabbitLegacy)},function(t,e,n){function r(t){if(!(this instanceof r))return new r(t);if(t||(t={}),!t.consumer)throw new Error("consumer option is required");if(this.consumer=t.consumer,this.nonce_length=t.nonce_length||32,this.version=t.version||"1.0",this.parameter_seperator=t.parameter_seperator||", ",this.realm=t.realm,void 0===t.last_ampersand?this.last_ampersand=!0:this.last_ampersand=t.last_ampersand,this.signature_method=t.signature_method||"PLAINTEXT","PLAINTEXT"!=this.signature_method||t.hash_function||(t.hash_function=function(t,e){return e}),!t.hash_function)throw new Error("hash_function option is required");this.hash_function=t.hash_function,this.body_hash_function=t.body_hash_function||this.hash_function}t.exports=r,r.prototype.authorize=function(t,e){var n={oauth_consumer_key:this.consumer.key,oauth_nonce:this.getNonce(),oauth_signature_method:this.signature_method,oauth_timestamp:this.getTimeStamp(),oauth_version:this.version};return e||(e={}),void 0!==e.key&&(n.oauth_token=e.key),t.data||(t.data={}),t.includeBodyHash&&(n.oauth_body_hash=this.getBodyHash(t,e.secret)),n.oauth_signature=this.getSignature(t,e.secret,n),n},r.prototype.getSignature=function(t,e,n){return this.hash_function(this.getBaseString(t,n),this.getSigningKey(e))},r.prototype.getBodyHash=function(t,e){var n="string"==typeof t.data?t.data:JSON.stringify(t.data);if(!this.body_hash_function)throw new Error("body_hash_function option is required");return this.body_hash_function(n,this.getSigningKey(e))},r.prototype.getBaseString=function(t,e){return t.method.toUpperCase()+"&"+this.percentEncode(this.getBaseUrl(t.url))+"&"+this.percentEncode(this.getParameterString(t,e))},r.prototype.getParameterString=function(t,e){var n;n=e.oauth_body_hash?this.sortObject(this.percentEncodeData(this.mergeObject(e,this.deParamUrl(t.url)))):this.sortObject(this.percentEncodeData(this.mergeObject(e,this.mergeObject(t.data,this.deParamUrl(t.url)))));for(var r="",i=0;i<n.length;i++){var o=n[i].key,a=n[i].value;if(a&&Array.isArray(a)){a.sort();var s="";a.forEach(function(t,e){s+=o+"="+t,e<a.length&&(s+="&")}.bind(this)),r+=s}else r+=o+"="+a+"&"}return r=r.substr(0,r.length-1)},r.prototype.getSigningKey=function(t){return t=t||"",this.last_ampersand||t?this.percentEncode(this.consumer.secret)+"&"+this.percentEncode(t):this.percentEncode(this.consumer.secret)},r.prototype.getBaseUrl=function(t){return t.split("?")[0]},r.prototype.deParam=function(t){for(var e=t.split("&"),n={},r=0;r<e.length;r++){var i=e[r].split("=");i[1]=i[1]||"",n[i[0]]?(Array.isArray(n[i[0]])||(n[i[0]]=[n[i[0]]]),n[i[0]].push(decodeURIComponent(i[1]))):n[i[0]]=decodeURIComponent(i[1])}return n},r.prototype.deParamUrl=function(t){var e=t.split("?");return 1===e.length?{}:this.deParam(e[1])},r.prototype.percentEncode=function(t){return encodeURIComponent(t).replace(/\!/g,"%21").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")},r.prototype.percentEncodeData=function(t){var e={};for(var n in t){var r=t[n];if(r&&Array.isArray(r)){var i=[];r.forEach(function(t){i.push(this.percentEncode(t))}.bind(this)),r=i}else r=this.percentEncode(r);e[this.percentEncode(n)]=r}return e},r.prototype.toHeader=function(t){var e=this.sortObject(t),n="OAuth ";this.realm&&(n+='realm="'+this.realm+'"'+this.parameter_seperator);for(var r=0;r<e.length;r++)0===e[r].key.indexOf("oauth_")&&(n+=this.percentEncode(e[r].key)+'="'+this.percentEncode(e[r].value)+'"'+this.parameter_seperator);return{Authorization:n.substr(0,n.length-this.parameter_seperator.length)}},r.prototype.getNonce=function(){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",e="",n=0;n<this.nonce_length;n++)e+=t[parseInt(Math.random()*t.length,10)];return e},r.prototype.getTimeStamp=function(){return parseInt((new Date).getTime()/1e3,10)},r.prototype.mergeObject=function(t,e){e=e||{};var n=t=t||{};for(var r in e)n[r]=e[r];return n},r.prototype.sortObject=function(t){var e=Object.keys(t),n=[];e.sort();for(var r=0;r<e.length;r++){var i=e[r];n.push({key:i,value:t[i]})}return n}},function(t,e){var n=function(t){function e(){this.fetch=!1,this.DOMException=t.DOMException}return e.prototype=t,new e}("undefined"!=typeof self?self:this);!function(t){!function(e){var n="URLSearchParams"in t,r="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),o="FormData"in t,a="ArrayBuffer"in t;if(a)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(t){return t&&s.indexOf(Object.prototype.toString.call(t))>-1};function c(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return"string"!=typeof t&&(t=String(t)),t}function l(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function h(t){this.map={},t instanceof h?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function d(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function g(t){var e=new FileReader,n=p(e);return e.readAsArrayBuffer(t),n}function v(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:o&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a&&i&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=v(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(t)||u(t))?this._bodyArrayBuffer=v(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=d(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,n,r=d(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=p(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(t,e){t=c(t),e=f(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},h.prototype.delete=function(t){delete this.map[c(t)]},h.prototype.get=function(t){return t=c(t),this.has(t)?this.map[t]:null},h.prototype.has=function(t){return this.map.hasOwnProperty(c(t))},h.prototype.set=function(t,e){this.map[c(t)]=f(e)},h.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},h.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),l(t)},h.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),l(t)},h.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),l(t)},r&&(h.prototype[Symbol.iterator]=h.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t,e){var n,r,i=(e=e||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new h(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new h(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),y.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function _(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}})),e}function x(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new h(e.headers),this.url=e.url||"",this._initBody(t)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},m.call(b.prototype),m.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},x.error=function(){var t=new x(null,{status:0,statusText:""});return t.type="error",t};var w=[301,302,303,307,308];x.redirect=function(t,e){if(-1===w.indexOf(e))throw new RangeError("Invalid status code");return new x(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function M(t,n){return new Promise((function(r,o){var a=new b(t,n);if(a.signal&&a.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var t,e,n={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new h,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}})),e)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;r(new x(i,n))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&i&&(s.responseType="blob"),a.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),a.signal&&(a.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",u)}),s.send(void 0===a._bodyInit?null:a._bodyInit)}))}M.polyfill=!0,t.fetch||(t.fetch=M,t.Headers=h,t.Request=b,t.Response=x),e.Headers=h,e.Request=b,e.Response=x,e.fetch=M}({})}(n),delete n.fetch.polyfill,(e=n.fetch).default=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,t.exports=e},function(t,e,n){"use strict";var r=e,i=n(57).Buffer;function o(t,e){try{return decodeURIComponent(t)}catch(n){return r.unescapeBuffer(t,e).toString()}}r.unescapeBuffer=function(t,e){for(var n,r,o,a=new i(t.length),s=0,u=0,c=0;u<=t.length;u++){var f=u<t.length?t.charCodeAt(u):NaN;switch(s){case 0:switch(f){case 37:n=0,r=0,s=1;break;case 43:e&&(f=32);default:a[c++]=f}break;case 1:if(o=f,f>=48&&f<=57)n=f-48;else if(f>=65&&f<=70)n=f-65+10;else{if(!(f>=97&&f<=102)){a[c++]=37,a[c++]=f,s=0;break}n=f-97+10}s=2;break;case 2:if(s=0,f>=48&&f<=57)r=f-48;else if(f>=65&&f<=70)r=f-65+10;else{if(!(f>=97&&f<=102)){a[c++]=37,a[c++]=o,a[c++]=f;break}r=f-97+10}a[c++]=16*n+r}}return a.slice(0,c-1)},r.unescape=o;for(var a=new Array(256),s=0;s<256;++s)a[s]="%"+((s<16?"0":"")+s.toString(16)).toUpperCase();r.escape=function(t){"string"!=typeof t&&(t+="");for(var e="",n=0,r=0;r<t.length;++r){var i=t.charCodeAt(r);if(!(33===i||45===i||46===i||95===i||126===i||i>=39&&i<=42||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122))if(r-n>0&&(e+=t.slice(n,r)),i<128)n=r+1,e+=a[i];else if(i<2048)n=r+1,e+=a[192|i>>6]+a[128|63&i];else if(i<55296||i>=57344)n=r+1,e+=a[224|i>>12]+a[128|i>>6&63]+a[128|63&i];else{var o;if(!(++r<t.length))throw new URIError("URI malformed");o=1023&t.charCodeAt(r),n=r+1,e+=a[240|(i=65536+((1023&i)<<10|o))>>18]+a[128|i>>12&63]+a[128|i>>6&63]+a[128|63&i]}}return 0===n?t:n<t.length?e+t.slice(n):e};var u=function(t){return"string"==typeof t?t:"number"==typeof t&&isFinite(t)?""+t:"boolean"==typeof t?t?"true":"false":""};function c(t,e){try{return e(t)}catch(e){return r.unescape(t,!0)}}r.stringify=r.encode=function(t,e,n,i){e=e||"&",n=n||"=";var o=r.escape;if(i&&"function"==typeof i.encodeURIComponent&&(o=i.encodeURIComponent),null!==t&&"object"==typeof t){for(var a=Object.keys(t),s=a.length,c=s-1,f="",l=0;l<s;++l){var h=a[l],d=t[h],p=o(u(h))+n;if(Array.isArray(d)){for(var g=d.length,v=g-1,m=0;m<g;++m)f+=p+o(u(d[m])),m<v&&(f+=e);g&&l<c&&(f+=e)}else f+=p+o(u(d)),l<c&&(f+=e)}return f}return""},r.parse=r.decode=function(t,e,n,i){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;"string"!=typeof e&&(e+="");var s=n.length,u=e.length,f=1e3;i&&"number"==typeof i.maxKeys&&(f=i.maxKeys);var l=1/0;f>0&&(l=f);var h=r.unescape;i&&"function"==typeof i.decodeURIComponent&&(h=i.decodeURIComponent);for(var d=h!==o,p=[],g=0,v=0,m=0,y="",b="",_=d,x=d,w=0,M=0;M<t.length;++M){var k=t.charCodeAt(M);if(k!==e.charCodeAt(v)){if(v=0,x||(37===k?w=1:w>0&&(k>=48&&k<=57||k>=65&&k<=70||k>=97&&k<=102)?3==++w&&(x=!0):w=0),m<s){if(k===n.charCodeAt(m)){if(++m===s)g<(S=M-m+1)&&(y+=t.slice(g,S)),w=0,g=M+1;continue}m=0,_||(37===k?w=1:w>0&&(k>=48&&k<=57||k>=65&&k<=70||k>=97&&k<=102)?3==++w&&(_=!0):w=0)}43===k&&(m<s?(M-g>0&&(y+=t.slice(g,M)),y+="%20",_=!0):(M-g>0&&(b+=t.slice(g,M)),b+="%20",x=!0),g=M+1)}else if(++v===u){var A,S=M-v+1;if(m<s?g<S&&(y+=t.slice(g,S)):g<S&&(b+=t.slice(g,S)),_&&(y=c(y,h)),x&&(b=c(b,h)),-1===p.indexOf(y))a[y]=b,p[p.length]=y;else(A=a[y])instanceof Array?A[A.length]=b:a[y]=[A,b];if(0==--l)break;_=x=d,w=0,y=b="",g=M+1,v=m=0}}l>0&&(g<t.length||m>0)&&(g<t.length&&(m<s?y+=t.slice(g):v<u&&(b+=t.slice(g))),_&&(y=c(y,h)),x&&(b=c(b,h)),-1===p.indexOf(y)?(a[y]=b,p[p.length]=y):(A=a[y])instanceof Array?A[A.length]=b:a[y]=[A,b]);return a}},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(58),i=n(59),o=n(60);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(f(e),t=s(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return E(this,e,n);case"latin1":case"binary":return T(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var f=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===u)return f*a}else-1!==f&&(o-=o-f),f=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var l=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){l=!1;break}if(l)return o}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function _(t,e,n,r){return H(U(e,t.length-n),t,n,r)}function x(t,e,n,r){return H(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return x(t,e,n,r)}function M(t,e,n,r){return H(F(e),t,n,r)}function k(t,e,n,r){return H(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function A(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function S(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,c=t[i],f=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=n)switch(l){case 1:c<128&&(f=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(f=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(f=u)}null===f?(f=65533,l=1):f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),i+=l}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return f(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return l(null,t)},u.allocUnsafeSlow=function(t){return l(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),c=this.slice(r,i),f=t.slice(e,n),l=0;l<s;++l)if(c[l]!==f[l]){o=c[l],a=f[l];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return x(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return M(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function C(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=j(t[o]);return i}function O(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function P(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function B(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function z(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(t,e,n,r,o){return o||z(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function L(t,e,n,r,o){return o||z(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return R(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return R(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return L(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return L(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:U(new u(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var I=/[^+\/0-9A-Za-z-_]/g;function j(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function F(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(I,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(23))},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),a=r[0],s=r[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),f=0,l=s>0?a-4:a;for(n=0;n<l;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[f++]=e>>16&255,u[f++]=e>>8&255,u[f++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[f++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[f++]=e>>8&255,u[f++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(f(t,a,a+16383>s?s:a+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function f(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,f=-7,l=n?i-1:0,h=n?-1:1,d=t[e+l];for(l+=h,o=d&(1<<-f)-1,d>>=-f,f+=s;f>0;o=256*o+t[e+l],l+=h,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=r;f>0;a=256*a+t[e+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(e*u-1)*Math.pow(2,i),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetworkVis=e.OverviewVis=e.ListVis=e.ClusterVis=void 0;var r=n(100);Object.defineProperty(e,"ClusterVis",{enumerable:!0,get:function(){return r.ClusterVis}});var i=n(101);Object.defineProperty(e,"ListVis",{enumerable:!0,get:function(){return i.ListVis}});var o=n(102);Object.defineProperty(e,"NetworkVis",{enumerable:!0,get:function(){return o.NetworkVis}});var a=n(103);Object.defineProperty(e,"OverviewVis",{enumerable:!0,get:function(){return a.OverviewVis}})},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Vis=void 0;var o=n(5),a=n(4),s=n(6),u=n(2),c=function(){function t(t){var e=this;this.visType=null,this.canvasTransform={k:1,x:0,y:0},this.paintEdges=[],this.paintNodes=[],this.paintCluster={},this.clusterId=0,this.destroyed=!1,this.helpData=[],this.showIxTooltip=!0,this.showIxMessage=!0,this.handleResize=s.debounce((function(){e.resize(!0)}),200,!0),this.asyncGetIxState=function(){return r(e,void 0,void 0,(function(){var t=this;return i(this,(function(e){switch(e.label){case 0:return u.selectAll("#ixTooltip").style("opacity",0),u.selectAll("#ixMessage").style("opacity",0),[4,o.get("ixTooltip--"+this.visType,"false").then((function(e){return"true"===e?(t.showIxTooltip=!1,u.selectAll("#ixTooltip").remove()):u.selectAll("#ixTooltip").style("opacity",1),o.get("ixMessage--"+t.visType,"false")})).then((function(e){return"true"===e?(t.showIxMessage=!1,u.selectAll("#ixMessage").remove()):u.selectAll("#ixMessage").style("opacity",1),"true"}))];case 1:return[2,e.sent()]}}))}))},this.stateManager=t,this.container=u.select("#visContainer"),u.select("#visHelp").on("click",(function(){e.help()})),u.select(window).on("resize",(function(){e.handleResize()})),this.resize(!1)}return Object.defineProperty(t.prototype,"cluster",{get:function(){return this.clusterId},set:function(t){this.clusterId=t,this.update(null)},enumerable:!1,configurable:!0}),t.prototype.init=function(){},t.prototype.build=function(t,e){},t.prototype.destroy=function(){},t.prototype.update=function(t){},t.prototype.updateView=function(){},t.prototype.tooltip=function(t,e,n,r,i){var o=this;this.container.selectAll("#tooltip").remove();var s=e,c=n,f={x1:0,x2:0,y1:0,y2:0},l=this.container.append("div").attr("id","tooltip").on("mouseleave",(function(){o.container.selectAll("#tooltip").remove()})),h=l.append("svg").style("height","14px").style("width","14px"),d=l.append("div").style("border-color",r).attr("id","tooltip--contentHolder"),p="https://www.twitter.com/"+(Number.isInteger(parseInt(t[1],10))?"i/user/"+t[1]:t[1]);d.append("span").attr("class","tooltip--skyLine").html(t[4]?browser.i18n.getMessage("visTooltipFriendOfFriend"):browser.i18n.getMessage("visTooltipDirectFriend"));var g,v,m=d.append("div").attr("class","tooltip--link").append("a").attr("href",p);if(m.append("span").append("img").on("error",(function(t,e,n){u.select(n[e]).attr("src","https://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png")})).attr("src",t.length<15?t[10]:t[14]),g=t.length<15?null===t[11]?browser.i18n.getMessage("nameNotAvailable"):t[11]:null===t[15]?browser.i18n.getMessage("nameNotAvailable"):t[15],m.append("span").html(g),0===t[3]&&0===t[2]||(v=browser.i18n.getMessage("friends")+":"+a.formatNumber(t[3],browser.i18n.getUILanguage())+" |         "+browser.i18n.getMessage("followers")+":"+a.formatNumber(t[2],browser.i18n.getUILanguage())+" | "),v+=browser.i18n.getMessage("connections")+":"+a.formatNumber(t[5],browser.i18n.getUILanguage()),d.append("span").attr("class","tooltip--bottomLine").html(v),i&&i.length>0){var y=d.append("p").attr("id","tooltip--actionLinks");i.forEach((function(e){var n=y.append("a").datum(t).html(e.label);void 0!==e.href?n.attr("href",e.href):void 0!==e.callback&&n.on("click",e.callback)}))}s<this.width/2?(l.style("left",s-10+"px").classed("rightSide",!0),h.style("left","10px"),f.x1=14,f.x2=-2):(l.style("right",this.width-s-10+"px").classed("leftSide",!0),h.style("left",d.node().offsetWidth+20-2+"px"),f.x1=-2,f.x2=14),c>this.height/2?(l.style("bottom",this.height-c-10+"px").classed("upSide",!0),h.style("top",d.node().offsetHeight+20-2+"px"),f.y1=-2,f.y2=14):(l.style("top",c-10+"px").classed("downSide",!0),h.style("top","10px"),f.y1=14,f.y2=-2),h.append("path").style("stroke",r).style("stroke-width",2).attr("d","M"+f.x1+","+f.y1+"L"+f.x2+","+f.y2)},t.prototype.ixTooltip=function(t,e){this.container.selectAll("#ixTooltip").remove(),this.container.append("div").attr("id","ixTooltip").style("left",t+"px").style("top",e+"px").style("opacity",0).append("img").attr("src","../assets/images/vis--overview--interaction-pointer@2x.png")},t.prototype.ixTooltipHide=function(){u.selectAll("#ixTooltip").remove(),this.showIxTooltip=!1,o.set("ixTooltip--"+this.visType,"true")},t.prototype.ixMessage=function(t){var e=this;this.container.selectAll("#ixMessage").remove();var n=this.container.append("div").attr("id","ixMessage").style("opacity",0).html('<a><img src="../assets/images/vis--closeButton@2x.png" /></a><br /><p>'+t+"</p>").on("click",(function(){u.selectAll("#ixMessage").remove(),e.showIxMessage=!1,o.set("ixMessage--"+e.visType,"true")})),r=n.node().getBoundingClientRect();n.style("top",this.height/2-r.height/2+"px")},t.prototype.lineLegend=function(t,e){u.selectAll("#line-legend").remove();var n=this.container.append("div").attr("id","line-legend").append("svg").attr("width",500).attr("height",25).append("g").attr("transform","translate(500,21)"),r=5;r+=3+n.append("text").attr("transform","translate(-"+r+",0)").attr("class","normal").attr("text-anchor","end").text(e).node().getBBox().width,n.append("image").attr("transform","translate(-"+(r+40)+",-13.5)").attr("width",40).attr("height",21).attr("xlink:href","../assets/images/vis--legend--overview--line@2x.png"),r+=43,r+=3+n.append("text").attr("transform","translate(-"+r+",0)").attr("class","normal").attr("text-anchor","end").text(t).node().getBBox().width,n.append("text").attr("text-anchor","end").attr("transform","translate(-"+r+",0)").text(browser.i18n.getMessage("visLegendNumberOfConnections"))},t.prototype.circleLegend=function(t,e,n){var r=this;u.selectAll("#circle-legend").remove();var i=this.container.append("div").attr("id","circle-legend").append("svg").attr("width",500).attr("height",50),o=i.append("g"),a=10;Object.keys(this.paintCluster[this.clusterId].clusters).forEach((function(t){var e=r.paintCluster[r.clusterId].clusters[t],n=o.append("g").attr("transform","translate("+(500-a)+", 45)");n.append("circle").attr("r",5).style("stroke","#ffffff").style("fill",e.color),a+=22+n.append("text").attr("text-anchor","end").attr("dx",-8).attr("dy",4).text(e.name).node().getBBox().width}));var s=i.append("g").attr("transform","translate(500,21)"),c=5;c+=3+s.append("text").attr("transform","translate(-"+c+",0)").attr("class","normal").attr("text-anchor","end").text(e).node().getBBox().width,s.append("image").attr("transform","translate(-"+(c+40)+",-13.5)").attr("width",40).attr("height",21).attr("xlink:href","../assets/images/vis--legend--overview--circle@2x.png"),c+=43,c+=3+s.append("text").attr("transform","translate(-"+c+",0)").attr("class","normal").attr("text-anchor","end").text(t).node().getBBox().width;var f=browser.i18n.getMessage("visLegendNumberOfConnections");n&&null!==n&&(f=n),s.append("text").attr("text-anchor","end").attr("transform","translate(-"+c+",0)").text(f)},t.prototype.help=function(){var t=this,e=0,n=u.select("#page").append("div").attr("id","helpContainer").html("<p></p>"),r=n.append("div").attr("id","helpButtons"),i=function(){u.selectAll(".helpButton").style("opacity",1),0===e?u.select("#helpButton-prev").style("opacity",.3):e===t.helpData.length-1&&u.select("#helpButton-next").style("opacity",.3),n.select("#helpContainer p").html(t.helpData[e])};r.append("a").attr("class","helpButton").html('<span><span class="icon">\n      <img src="../assets/images/navbar--icon-close.png"       srcset="../assets/images/navbar--icon-close.png 1x,       ../assets/images/navbar--icon-close@2x.png 2x" >\n      </span>\n      <span>'+browser.i18n.getMessage("close")+"</span></span>").on("click",(function(){u.selectAll("#helpContainer").remove()})),r.append("a").attr("class","helpButton").attr("id","helpButton-prev").html("<span><span>&laquo;&nbsp;"+browser.i18n.getMessage("back")+"</span></span>").on("click",(function(){e>0&&(e-=1,i())})),r.append("a").attr("class","helpButton").attr("id","helpButton-next").html("<span><span>"+browser.i18n.getMessage("next")+"&nbsp;&raquo;</span></span>").on("click",(function(){e<t.helpData.length-1&&(e+=1,i())})),i()},t.prototype.resize=function(t){this.container.selectAll("#tooltip").remove(),this.width=window.innerWidth,this.height=window.innerHeight,this.hqScale=a.isRetinaDisplay?2:1,t&&this.update(null)},t.prototype.editCluster=function(t,e){var n=this,r=document.createElement("div"),i=s.uuid();r.setAttribute("class","cf--modal-container"),r.setAttribute("id","cf--modal-container-"+i),a.addHTML(r,'<div class="cf--modal-box">\n      <div class="cf--modal-title">'+browser.i18n.getMessage("clusterModifyTitle")+'</div>\n      <div class="cf--modal-message">\n        <form>\n          <label for="clusterForm-name">'+browser.i18n.getMessage("clusterModifyName")+':</label>\n          <input type="text" value="'+t.info.name+'" id="clusterForm-name" />\n          <input type="hidden" value="'+t.info.color+'" id="clusterForm-color" />\n          <div id="colorPickerContainer" style="width:300px;"></div>\n        </form>\n      </div>\n      <div class="cf--modal-buttons">\n        <button class=\'cf--modal-button-0\' data-value=\'cancel\'>'+browser.i18n.getMessage("cancel")+"</button>\n        <button class='cf--modal-button-1' data-value='save'>"+browser.i18n.getMessage("save")+"</button>\n      </div>\n  </div>"),document.body.appendChild(r),a.colorPicker("colorPickerContainer","clusterForm-color",370,t.info.color);document.querySelector("#cf--modal-container-"+i+" .cf--modal-button-0").addEventListener("click",(function(){var t;null!==(t=document.querySelector("#cf--modal-container-"+i))&&t.remove()})),document.querySelector("#cf--modal-container-"+i+" .cf--modal-button-1").addEventListener("click",(function(r){a.blockSplash("Updating Network Data");var i=document.querySelector("#clusterForm-name").value,s=document.querySelector("#clusterForm-color").value;o.get("s--"+e.service+"--a--"+e.screenName+"-"+e.nUuid+"--nw").then((function(r){return r.cluster[n.clusterId].clusters[t.id].name=i,r.cluster[n.clusterId].clusters[t.id].color=s,o.set("s--"+e.service+"--a--"+e.screenName+"-"+e.nUuid+"--nw",r)})).then((function(){return browser.runtime.sendMessage({date:Date.now(),func:"network-updateNetworkDictionary",nUuid:e.nUuid,params:[e.service,e.screenName,e.nUuid],type:"call"})})).then((function(){location.reload()})).catch((function(t){throw t}))}))},t.prototype.hideCluster=function(t,e){var n=this;a.blockSplash("Updating Network Data"),o.get("s--"+e.service+"--a--"+e.screenName+"-"+e.nUuid+"--nw").then((function(r){var i=r.cluster[n.clusterId].clusters[t.id].modified;return r.cluster[n.clusterId].clusters[t.id].modified=!i,o.set("s--"+e.service+"--a--"+e.screenName+"-"+e.nUuid+"--nw",r)})).then((function(){browser.runtime.sendMessage({date:Date.now(),func:"network-updateNetworkDictionary",nUuid:e.nUuid,params:[e.service,e.screenName,e.nUuid],type:"call"}).then((function(){location.reload()})).catch((function(t){throw t}))}))},t}();e.Vis=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(99),o=[{description:browser.i18n.getMessage("exportGexfDesc"),icon:"xml",id:"GEXF",label:"GEXF Format"},{description:browser.i18n.getMessage("exportGdfDesc"),icon:"tabular",id:"GDF",label:"GDF Format"},{description:browser.i18n.getMessage("exportGmlDesc"),icon:"text",id:"GML",label:"GML Format"},{description:browser.i18n.getMessage("exportGraphMlDesc"),icon:"xml",id:"GraphML",label:"GraphML Format"},{description:browser.i18n.getMessage("exportPajekNetDesc"),icon:"text",id:"PajekNet",label:"Pajek Net"},{description:browser.i18n.getMessage("exportDotDesc"),icon:"text",id:"Dot",label:"GraphViz DOT Format"},{description:browser.i18n.getMessage("exportTlpDesc"),icon:"text",id:"TLP",label:"TLP"},{description:browser.i18n.getMessage("exportNetdrawDesc"),icon:"text",id:"Netdraw",label:"Netdraw VNA"},{description:browser.i18n.getMessage("exportCsvDesc"),icon:"tabular",id:"CSV",label:browser.i18n.getMessage("exportCsvLabel")},{description:browser.i18n.getMessage("exportJson2Desc"),icon:"json",id:"JSON2",label:browser.i18n.getMessage("exportJson2Label")},{description:browser.i18n.getMessage("exportJsonDesc"),icon:"json",id:"JSON",label:"JSON"}];e.exportFormats=o;var a=[{id:0,label:"id",type:"integer"},{id:1,label:"handle",type:"string"},{id:2,label:"followers_count",type:"integer"},{id:3,label:"friends_count",type:"integer"},{id:4,label:"isProxy",type:"boolean"}];e.exportNetwork=function(t,e,n,s){return r.get("s--"+t+"--a--"+e+"-"+n+"--nw",{edges:[],nodes:[]}).then((function(n){var r=!1;o.forEach((function(t){t.id===s&&(r=!0)})),r||console.warn("The requested format is not supported. Default export is JSON (single file).");var u=[];switch(s){case"GEXF":var c=new Date,f='<?xml version="1.0" encoding="UTF-8"?>\n        <gexf xmlns="http://www.gexf.net/1.2draft" version="1.2">\n          <meta lastmodifieddate="'+c.getFullYear()+"-"+(c.getMonth()<9?"0":"")+(c.getMonth()+1)+"-"+c.getDate()+'">\n            <creator>Crossfoam</creator>\n            <description>This network was retrieved from '+t+"             and describes the network surrounding the user "+e+'.</description>\n          </meta>\n          <graph mode="static" defaultedgetype="directed">\n            <nodes>\n';n.nodes.forEach((function(t){f+='      <node id="'+t[0]+'"',a.forEach((function(e){"id"!==e.label&&(f+=" "+e.label+'="'+t[e.id]+'"')})),f+=" />\n"})),f+="    </nodes>\n            <edges>\n",n.edges.forEach((function(t,e){d+='      <edge id="'+e+'" source="'+t[0]+'"             target="'+t[1]+'" weight="'+t[2]+'" />\n'})),f+="    </edges>\n          </graph>\n        </gexf>",u.push({fileData:f,fileName:t+"--"+e+"--gexf.xml",fileType:'text/xml; charset="utf-8"'});break;case"GDF":var l="nodedef>name VARCHAR,label VARCHAR,class VARCHAR, visible BOOLEAN,labelvisible BOOLEAN";a.forEach((function(t){"id"!==t.label&&(l+=","+t.label+" VARCHAR")})),l+="\n",n.nodes.forEach((function(t){l+="n"+t[0]+",'"+t[1]+"',defaultClass,true,true",a.forEach((function(e){"id"!==e.label&&(l+=",'"+t[e.id]+"'")})),l+="\n"})),l+="edgedef>node1 VARCHAR,node2 VARCHAR,weight DOUBLE,directed BOOLEAN\n",n.edges.forEach((function(t,e){l+="n"+t[0]+",n"+t[1]+","+t[2]+",false\n"})),u.push({fileData:l,fileName:t+"--"+e+".gdf",fileType:'text/plain; charset="utf-8"'});break;case"GML":var h="graph\n[\n";n.nodes.forEach((function(t){h+="  node\n  [\n            id "+t[0]+'\n            label "'+t[1]+'"\n',a.forEach((function(e){e.id>1&&(h+="    "+e.label+' "'+t[e.id]+'"\n')})),h+="  ]\n"})),n.edges.forEach((function(t){h+="  edge\n    [\n    source "+t[0]+"\n            target "+t[1]+"\n    weight "+t[2]+"\n"})),u.push({fileData:h,fileName:t+"--"+e+".gml",fileType:'text/plain; charset="utf-8"'});break;case"GraphML":var d='<?xml version="1.0" encoding="UTF-8"?>\n        <graphml xmlns="http://graphml.graphdrawing.org/xmlns"         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"         xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns         http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd">\n';a.forEach((function(t){"id"!==t.label&&(d+='        <key id="d'+t.id+'" for="node"               attr.name="'+t.label+'" attr.type="'+t.type+'" />\n')})),d+='  <key id="d1" for="edge" attr.name="weight" attr.type="double"/>\n          <graph id="G" edgedefault="undirected">\n',n.nodes.forEach((function(t){d+='    <node id="'+t[0]+'">',a.forEach((function(e){"id"!==e.label&&(d+='      <data key="'+e.id+'">'+t[e.id]+"</data>\n")})),d+="</node>\n"})),n.edges.forEach((function(t,e){d+='      <edge id="'+e+'" source="'+t[0]+'" target="'+t[1]+'">\n              <data key="d1">'+t[2]+"</data>\n"})),d+="  </graph>\n        </graphml>",u.push({fileData:d,fileName:t+"--"+e+"--gexf.xml",fileType:'text/xml; charset="utf-8"'});break;case"PajekNet":var p="*Vertices "+n.nodes.length+"\n";n.nodes.forEach((function(t){p+=t[0]+' "'+t[1]+'"\n'})),p+="*arcs\n",n.edges.forEach((function(t){p+=t[0]+" "+t[1]+" "+t[2]+"\n"})),u.push({fileData:p,fileName:t+"--"+e+"--gexf.xml",fileType:'text/plain; charset="utf-8"'});break;case"Dot":var g="graph "+t+"--"+e+"{\n";n.nodes.forEach((function(t){g+=t[0]+" [",a.forEach((function(e){"id"!==e.label&&(g+=" "+e.label+'="'+t[e.id]+'"')})),g+="]\n"})),n.edges.forEach((function(t){g+=t[0]+" > "+t[1]+' [weight="'+t[2]+'"]\n'})),g+="}",u.push({fileData:g,fileName:t+"--"+e+"--gexf.xml",fileType:'text/plain; charset="utf-8"'});break;case"TLP":var v='(tlp "2.0"\n(nodes';n.nodes.forEach((function(t){v+=" "+t[0]})),v+=")\n",n.edges.forEach((function(t){v+="(edge "+t[0]+" "+t[1]+" "+t[2]+")\n"})),v+=")",u.push({fileData:v,fileName:t+"--"+e+"--gexf.xml",fileType:'text/plain; charset="utf-8"'});break;case"Netdraw":var m="*node data\nID";a.forEach((function(t){"id"!==t.label&&(m+=" "+t.label)})),m+="\n",n.nodes.forEach((function(t){m+=""+t[0],a.forEach((function(e){"id"!==e.label&&(m+=" "+t[e.id])})),m+="\n"})),m+="*tie data\nfrom to  strength\n",n.edges.forEach((function(t){m+=t[0]+" "+t[1]+" "+t[2]+"\n"})),u.push({fileData:m,fileName:t+"--"+e+"--gexf.xml",fileType:'text/plain; charset="utf-8"'});break;case"CSV":var y="";a.forEach((function(t,e){y+=(e>0?",":"")+t.label})),n.nodes.forEach((function(t){y+="\n",a.forEach((function(e,n){var r;y+=(n>0?",":"")+("string"==typeof(r=t[e.id])&&r.indexOf(",")?'"'+r+'"':r)}))})),u.push({fileData:y,fileName:t+"--"+e+"--nodes.csv",fileType:'text/comma-separated-values; charset="utf-8"'});var b="source,target,weight";n.edges.forEach((function(t){b+="\n"+t[0]+","+t[1]+","+t[2]})),u.push({fileData:b,fileName:t+"--"+e+"--edges.csv",fileType:'text/comma-separated-values; charset="utf-8"'});break;case"JSON2":u.push({fileData:JSON.stringify(n.nodes.map((function(t){var e={};return a.forEach((function(n){e[n.label]=t[n.id]})),e}))),fileName:t+"--"+e+"--nodes.json",fileType:'application/json; charset="utf-8"'}),u.push({fileData:JSON.stringify(n.edges.map((function(t){return{source:t[0],target:t[1],weight:t[2]}}))),fileName:t+"--"+e+"--edges.json",fileType:'application/json; charset="utf-8"'});break;default:u.push({fileData:JSON.stringify({edges:n.edges.map((function(t){return{source:t[0],target:t[1],weight:t[2]}})),nodes:n.nodes.map((function(t){var e={};return a.forEach((function(n){e[n.label]=t[n.id]})),e}))}),fileName:t+"--"+e+".json",fileType:'application/json; charset="utf-8"'})}return Promise.all(u.map((function(t){return i.downloadFile(t.fileData,t.fileType,t.fileName)})))}))}},function(t,e,n){t.exports=function(){"use strict";var t=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},e=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t};function n(t){var e=new Error("(regl) "+t);throw console.error(e),e}function r(t,e){t||n(e)}function i(t){return t?": "+t:""}function o(t,e){switch(e){case"number":return"number"==typeof t;case"object":return"object"==typeof t;case"string":return"string"==typeof t;case"boolean":return"boolean"==typeof t;case"function":return"function"==typeof t;case"undefined":return void 0===t;case"symbol":return"symbol"==typeof t}}function a(t,e,r){e.indexOf(t)<0&&n("invalid value"+i(r)+". must be one of: "+e)}var s=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function u(t,e){for(t+="";t.length<e;)t=" "+t;return t}function c(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function f(t,e){this.number=t,this.line=e,this.errors=[]}function l(t,e,n){this.file=t,this.line=e,this.message=n}function h(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e);return r?r[1]:"unknown"}function d(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e);return r?r[1]:"unknown"}function p(t,e){var n,r=t.split("\n"),i=1,o=0,a={unknown:new c,0:new c};a.unknown.name=a[0].name=e||h(),a.unknown.lines.push(new f(0,""));for(var s=0;s<r.length;++s){var u=r[s],l=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(u);if(l)switch(l[1]){case"line":var d=/(\d+)(\s+\d+)?/.exec(l[2]);d&&(i=0|d[1],d[2]&&((o=0|d[2])in a||(a[o]=new c)));break;case"define":var p=/SHADER_NAME(_B64)?\s+(.*)$/.exec(l[2]);p&&(a[o].name=p[1]?(n=p[2],"undefined"!=typeof atob?atob(n):"base64:"+n):p[2])}a[o].lines.push(new f(i++,u))}return Object.keys(a).forEach((function(t){var e=a[t];e.lines.forEach((function(t){e.index[t.number]=t}))})),a}function g(t){t._commandRef=h()}function v(t,e){var r=d();n(t+" in command "+(e||h())+("unknown"===r?"":" called from "+r))}function m(t,e,n,r){o(t,e)||v("invalid parameter type"+i(n)+". expected "+e+", got "+typeof t,r||h())}var y={};function b(t,e){return 32820===t||32819===t||33635===t?2:34042===t?4:y[t]*e}function _(t){return!(t&t-1||!t)}y[5120]=y[5121]=1,y[5122]=y[5123]=y[36193]=y[33635]=y[32819]=y[32820]=2,y[5124]=y[5125]=y[5126]=y[34042]=4;var x=e(r,{optional:function(t){t()},raise:n,commandRaise:v,command:function(t,e,n){t||v(e,n||h())},parameter:function(t,e,r){t in e||n("unknown parameter ("+t+")"+i(r)+". possible values: "+Object.keys(e).join())},commandParameter:function(t,e,n,r){t in e||v("unknown parameter ("+t+")"+i(n)+". possible values: "+Object.keys(e).join(),r||h())},constructor:function(t){Object.keys(t).forEach((function(t){s.indexOf(t)<0&&n('invalid regl constructor argument "'+t+'". must be one of '+s)}))},type:function(t,e,r){o(t,e)||n("invalid parameter type"+i(r)+". expected "+e+", got "+typeof t)},commandType:m,isTypedArray:function(e,r){t(e)||n("invalid parameter type"+i(r)+". must be a typed array")},nni:function(t,e){t>=0&&(0|t)===t||n("invalid parameter type, ("+t+")"+i(e)+". must be a nonnegative integer")},oneOf:a,shaderError:function(t,e,n,i,o){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(e),s=i===t.FRAGMENT_SHADER?"fragment":"vertex";m(n,"string",s+" shader source must be a string",o);var c=p(n,o),f=function(t){var e=[];return t.split("\n").forEach((function(t){if(!(t.length<5)){var n=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(t);n?e.push(new l(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new l("unknown",0,t))}})),e}(a);!function(t,e){e.forEach((function(e){var n=t[e.file];if(n){var r=n.index[e.line];if(r)return r.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)}))}(c,f),Object.keys(c).forEach((function(t){var e=c[t];if(e.hasErrors){var n=[""],r=[""];i("file number "+t+": "+e.name+"\n","color:red;text-decoration:underline;font-weight:bold"),e.lines.forEach((function(t){if(t.errors.length>0){i(u(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),i(t.line+"\n","color:red; background-color:yellow; font-weight:bold");var e=0;t.errors.forEach((function(n){var r=n.message,o=/^\s*'(.*)'\s*:\s*(.*)$/.exec(r);if(o){var a=o[1];switch(r=o[2],a){case"assign":a="="}e=Math.max(t.line.indexOf(a,e),0)}else e=0;i(u("| ",6)),i(u("^^^",e+3)+"\n","font-weight:bold"),i(u("| ",6)),i(r+"\n","font-weight:bold")})),i(u("| ",6)+"\n")}else i(u(t.number,4)+"|  "),i(t.line+"\n","color:red")})),"undefined"==typeof document||window.chrome?console.log(n.join("")):(r[0]=n.join("%c"),console.log.apply(console,r))}function i(t,e){n.push(t),r.push(e||"")}})),r.raise("Error compiling "+s+" shader, "+c[0].name)}},linkError:function(t,e,n,i,o){if(!t.getProgramParameter(e,t.LINK_STATUS)){var a=t.getProgramInfoLog(e),s=p(n,o),u='Error linking program with vertex shader, "'+p(i,o)[0].name+'", and fragment shader "'+s[0].name+'"';"undefined"!=typeof document?console.log("%c"+u+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(u+"\n"+a),r.raise(u)}},callSite:d,saveCommandRef:g,saveDrawInfo:function(t,e,n,r){function i(t){return t?r.id(t):0}function o(t,e){Object.keys(e).forEach((function(e){t[r.id(e)]=!0}))}g(t),t._fragId=i(t.static.frag),t._vertId=i(t.static.vert);var a=t._uniformSet={};o(a,e.static),o(a,e.dynamic);var s=t._attributeSet={};o(s,n.static),o(s,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic},framebufferFormat:function(t,e,n){t.texture?a(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):a(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:h,texture2D:function(t,e,n){var i,o=e.width,a=e.height,s=e.channels;r(o>0&&o<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),33071===t.wrapS&&33071===t.wrapT||r(_(o)&&_(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==o&&1!==a&&r(9984!==t.minFilter&&9986!==t.minFilter&&9985!==t.minFilter&&9987!==t.minFilter,"min filter requires mipmap"):(r(_(o)&&_(a),"texture must be a square power of 2 to support mipmapping"),r(e.mipmask===(o<<1)-1,"missing or incomplete mipmap data")),5126===e.type&&(n.extensions.indexOf("oes_texture_float_linear")<0&&r(9728===t.minFilter&&9728===t.magFilter,"filter not supported, must enable oes_texture_float_linear"),r(!t.genMipmaps,"mipmap generation not supported with float textures"));var u=e.images;for(i=0;i<16;++i)if(u[i]){var c=o>>i,f=a>>i;r(e.mipmask&1<<i,"missing mipmap data");var l=u[i];if(r(l.width===c&&l.height===f,"invalid shape for mip images"),r(l.format===e.format&&l.internalformat===e.internalformat&&l.type===e.type,"incompatible type for mip image"),l.compressed);else if(l.data){var h=Math.ceil(b(l.type,s)*c/l.unpackAlignment)*l.unpackAlignment;r(l.data.byteLength===h*f,"invalid data for image, buffer size is inconsistent with image format")}else l.element||l.copy}else t.genMipmaps||r(0==(e.mipmask&1<<i),"extra mipmap data");e.compressed&&r(!t.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(t,e,n,i){var o=t.width,a=t.height,s=t.channels;r(o>0&&o<=i.maxTextureSize&&a>0&&a<=i.maxTextureSize,"invalid texture shape"),r(o===a,"cube map must be square"),r(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(var u=0;u<n.length;++u){var c=n[u];r(c.width===o&&c.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(r(!c.compressed,"can not generate mipmap for compressed textures"),r(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var f=c.images,l=0;l<16;++l){var h=f[l];if(h){var d=o>>l,p=a>>l;r(c.mipmask&1<<l,"missing mipmap data"),r(h.width===d&&h.height===p,"invalid shape for mip images"),r(h.format===t.format&&h.internalformat===t.internalformat&&h.type===t.type,"incompatible type for mip image"),h.compressed||(h.data?r(h.data.byteLength===d*p*Math.max(b(h.type,s),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}}),w=0;function M(t,e){this.id=w++,this.type=t,this.data=e}function k(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function A(t){return"["+function t(e){if(0===e.length)return[];var n=e.charAt(0),r=e.charAt(e.length-1);if(e.length>1&&n===r&&('"'===n||"'"===n))return['"'+k(e.substr(1,e.length-2))+'"'];var i=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e);if(i)return t(e.substr(0,i.index)).concat(t(i[1])).concat(t(e.substr(i.index+i[0].length)));var o=e.split(".");if(1===o.length)return['"'+k(e)+'"'];for(var a=[],s=0;s<o.length;++s)a=a.concat(t(o[s]));return a}(t).join("][")+"]"}var S={DynamicVariable:M,define:function(t,e){return new M(t,A(e+""))},isDynamic:function(t){return"function"==typeof t&&!t._reglType||t instanceof M},unbox:function(t,e){return"function"==typeof t?new M(0,t):t},accessor:A},E={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},T="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function C(t){return"string"==typeof t?t.split():(x(Array.isArray(t),"invalid extension array"),t)}function O(t){return"string"==typeof t?(x("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function P(t){var n,r,i,o,a,s=t||{},u={},c=[],f=[],l="undefined"==typeof window?1:window.devicePixelRatio,h=!1,d=function(t){t&&x.raise(t)},p=function(){};if("string"==typeof s?(x("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),n=document.querySelector(s),x(n,"invalid query string for element")):"object"==typeof s?"string"==typeof(a=s).nodeName&&"function"==typeof a.appendChild&&"function"==typeof a.getBoundingClientRect?n=s:function(t){return"function"==typeof t.drawArrays||"function"==typeof t.drawElements}(s)?i=(o=s).canvas:(x.constructor(s),"gl"in s?o=s.gl:"canvas"in s?i=O(s.canvas):"container"in s&&(r=O(s.container)),"attributes"in s&&(u=s.attributes,x.type(u,"object","invalid context attributes")),"extensions"in s&&(c=C(s.extensions)),"optionalExtensions"in s&&(f=C(s.optionalExtensions)),"onDone"in s&&(x.type(s.onDone,"function","invalid or missing onDone callback"),d=s.onDone),"profile"in s&&(h=!!s.profile),"pixelRatio"in s&&(l=+s.pixelRatio,x(l>0,"invalid pixel ratio"))):x.raise("invalid arguments to regl"),n&&("canvas"===n.nodeName.toLowerCase()?i=n:r=n),!o){if(!i){x("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var g=function(t,n,r){var i,o=document.createElement("canvas");function a(){var n=window.innerWidth,i=window.innerHeight;if(t!==document.body){var a=t.getBoundingClientRect();n=a.right-a.left,i=a.bottom-a.top}o.width=r*n,o.height=r*i,e(o.style,{width:n+"px",height:i+"px"})}return e(o.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(o),t===document.body&&(o.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"==typeof ResizeObserver?(i=new ResizeObserver((function(){setTimeout(a)}))).observe(t):window.addEventListener("resize",a,!1),a(),{canvas:o,onDestroy:function(){i?i.disconnect():window.removeEventListener("resize",a),t.removeChild(o)}}}(r||document.body,0,l);if(!g)return null;i=g.canvas,p=g.onDestroy}void 0===u.premultipliedAlpha&&(u.premultipliedAlpha=!0),o=function(t,e){function n(n){try{return t.getContext(n,e)}catch(t){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(i,u)}return o?{gl:o,canvas:i,container:r,extensions:c,optionalExtensions:f,pixelRatio:l,profile:h,onDone:d,onDestroy:p}:(p(),d("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function N(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}function B(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1}function D(){var t=N(8,(function(){return[]}));function e(e){var n=function(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}(e),r=t[B(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(e){t[B(e.byteLength)>>2].push(e)}return{alloc:e,free:n,allocType:function(t,n){var r=null;switch(t){case 5120:r=new Int8Array(e(n),0,n);break;case 5121:r=new Uint8Array(e(n),0,n);break;case 5122:r=new Int16Array(e(2*n),0,n);break;case 5123:r=new Uint16Array(e(2*n),0,n);break;case 5124:r=new Int32Array(e(4*n),0,n);break;case 5125:r=new Uint32Array(e(4*n),0,n);break;case 5126:r=new Float32Array(e(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r},freeType:function(t){n(t.buffer)}}}var z=D();function R(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||t(e.data))}z.zero=D();var L=function(t){return Object.keys(t).map((function(e){return t[e]}))},I={shape:function(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e},flatten:function(t,e,n,r){var i=1;if(e.length)for(var o=0;o<e.length;++o)i*=e[o];else i=0;var a=r||z.allocType(n,i);switch(e.length){case 0:break;case 1:!function(t,e,n){for(var r=0;r<e;++r)n[r]=t[r]}(t,e[0],a);break;case 2:!function(t,e,n,r){for(var i=0,o=0;o<e;++o)for(var a=t[o],s=0;s<n;++s)r[i++]=a[s]}(t,e[0],e[1],a);break;case 3:j(t,e[0],e[1],e[2],a,0);break;default:!function t(e,n,r,i,o){for(var a=1,s=r+1;s<n.length;++s)a*=n[s];var u=n[r];if(n.length-r==4){var c=n[r+1],f=n[r+2],l=n[r+3];for(s=0;s<u;++s)j(e[s],c,f,l,i,o),o+=a}else for(s=0;s<u;++s)t(e[s],n,r+1,i,o),o+=a}(t,e,0,a,0)}return a}};function j(t,e,n,r,i,o){for(var a=o,s=0;s<e;++s)for(var u=t[s],c=0;c<n;++c)for(var f=u[c],l=0;l<r;++l)i[a++]=f[l]}var U={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},F={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},H={dynamic:35048,stream:35040,static:35044},q=I.flatten,V=I.shape,Y=[];function W(t){return 0|U[Object.prototype.toString.call(t)]}function G(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function X(t,e,n,r,i,o,a){for(var s=0,u=0;u<n;++u)for(var c=0;c<r;++c)t[s++]=e[i*u+o*c+a]}Y[5120]=1,Y[5122]=2,Y[5124]=4,Y[5121]=1,Y[5123]=2,Y[5125]=4,Y[5126]=4;var K={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Q=new Float32Array(1),$=new Uint32Array(Q.buffer);function Z(t){for(var e=z.allocType(5123,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{Q[0]=t[n];var r=$[0],i=r>>>31<<15,o=(r<<1>>>24)-127,a=r>>13&1023;if(o<-24)e[n]=i;else if(o<-14){var s=-14-o;e[n]=i+(a+1024>>s)}else e[n]=o>15?i+31744:i+(o+15<<10)+a}return e}function J(e){return Array.isArray(e)||t(e)}var tt=function(t){return!(t&t-1||!t)},et=[9984,9986,9985,9987],nt=[0,6409,6410,6407,6408],rt={};function it(t){return"[object "+t+"]"}rt[6409]=rt[6406]=rt[6402]=1,rt[34041]=rt[6410]=2,rt[6407]=rt[35904]=3,rt[6408]=rt[35906]=4;var ot=it("HTMLCanvasElement"),at=it("OffscreenCanvas"),st=it("CanvasRenderingContext2D"),ut=it("ImageBitmap"),ct=it("HTMLImageElement"),ft=it("HTMLVideoElement"),lt=Object.keys(U).concat([ot,at,st,ut,ct,ft]),ht=[];ht[5121]=1,ht[5126]=4,ht[36193]=2,ht[5123]=2,ht[5125]=4;var dt=[];function pt(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function gt(t){return!!Array.isArray(t)&&!(0===t.length||!J(t[0]))}function vt(t){return Object.prototype.toString.call(t)}function mt(t){return vt(t)===ot}function yt(t){return vt(t)===at}function bt(t){if(!t)return!1;var e=vt(t);return lt.indexOf(e)>=0||pt(t)||gt(t)||R(t)}function _t(t){return 0|U[Object.prototype.toString.call(t)]}function xt(t,e){return z.allocType(36193===t.type?5126:t.type,e)}function wt(t,e){36193===t.type?(t.data=Z(e),z.freeType(e)):t.data=e}function Mt(t,e,n,r,i,o){var a;if(a=void 0!==dt[t]?dt[t]:rt[t]*ht[e],o&&(a*=6),i){for(var s=0,u=n;u>=1;)s+=a*u*u,u/=2;return s}return a*n*r}function kt(n,r,i,o,a,s,u){var c={"don't care":4352,"dont care":4352,nice:4354,fast:4353},f={repeat:10497,clamp:33071,mirror:33648},l={nearest:9728,linear:9729},h=e({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},l),d={none:0,browser:37444},p={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},g={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},v={};r.ext_srgb&&(g.srgb=35904,g.srgba=35906),r.oes_texture_float&&(p.float32=p.float=5126),r.oes_texture_half_float&&(p.float16=p["half float"]=36193),r.webgl_depth_texture&&(e(g,{depth:6402,"depth stencil":34041}),e(p,{uint16:5123,uint32:5125,"depth stencil":34042})),r.webgl_compressed_texture_s3tc&&e(v,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),r.webgl_compressed_texture_atc&&e(v,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),r.webgl_compressed_texture_pvrtc&&e(v,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),r.webgl_compressed_texture_etc1&&(v["rgb etc1"]=36196);var m=Array.prototype.slice.call(n.getParameter(34467));Object.keys(v).forEach((function(t){var e=v[t];m.indexOf(e)>=0&&(g[t]=e)}));var y=Object.keys(g);i.textureFormats=y;var b=[];Object.keys(g).forEach((function(t){var e=g[t];b[e]=t}));var _=[];Object.keys(p).forEach((function(t){var e=p[t];_[e]=t}));var w=[];Object.keys(l).forEach((function(t){w[l[t]]=t}));var M=[];Object.keys(h).forEach((function(t){var e=h[t];M[e]=t}));var k=[];Object.keys(f).forEach((function(t){k[f[t]]=t}));var A=y.reduce((function(t,e){var n=g[e];return 6409===n||6406===n||6409===n||6410===n||6402===n||34041===n||r.ext_srgb&&(35904===n||35906===n)?t[n]=n:32855===n||e.indexOf("rgba")>=0?t[n]=6408:t[n]=6407,t}),{});function S(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function E(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function T(t,e){if("object"==typeof e&&e){if("premultiplyAlpha"in e&&(x.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(x.type(e.flipY,"boolean","invalid texture flip"),t.flipY=e.flipY),"alignment"in e&&(x.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=e.alignment),"colorSpace"in e&&(x.parameter(e.colorSpace,d,"invalid colorSpace"),t.colorSpace=d[e.colorSpace]),"type"in e){var n=e.type;x(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),x(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),x(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),x.parameter(n,p,"invalid texture type"),t.type=p[n]}var o=t.width,a=t.height,s=t.channels,u=!1;"shape"in e?(x(Array.isArray(e.shape)&&e.shape.length>=2,"shape must be an array"),o=e.shape[0],a=e.shape[1],3===e.shape.length&&(s=e.shape[2],x(s>0&&s<=4,"invalid number of channels"),u=!0),x(o>=0&&o<=i.maxTextureSize,"invalid width"),x(a>=0&&a<=i.maxTextureSize,"invalid height")):("radius"in e&&(o=a=e.radius,x(o>=0&&o<=i.maxTextureSize,"invalid radius")),"width"in e&&(o=e.width,x(o>=0&&o<=i.maxTextureSize,"invalid width")),"height"in e&&(a=e.height,x(a>=0&&a<=i.maxTextureSize,"invalid height")),"channels"in e&&(s=e.channels,x(s>0&&s<=4,"invalid number of channels"),u=!0)),t.width=0|o,t.height=0|a,t.channels=0|s;var c=!1;if("format"in e){var f=e.format;x(r.webgl_depth_texture||!("depth"===f||"depth stencil"===f),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),x.parameter(f,g,"invalid texture format");var l=t.internalformat=g[f];t.format=A[l],f in p&&("type"in e||(t.type=p[f])),f in v&&(t.compressed=!0),c=!0}!u&&c?t.channels=rt[t.format]:u&&!c?t.channels!==nt[t.format]&&(t.format=t.internalformat=nt[t.channels]):c&&u&&x(t.channels===rt[t.format],"number of channels inconsistent with specified format")}}function C(t){n.pixelStorei(37440,t.flipY),n.pixelStorei(37441,t.premultiplyAlpha),n.pixelStorei(37443,t.colorSpace),n.pixelStorei(3317,t.unpackAlignment)}function O(){S.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function P(e,n){var r=null;if(bt(n)?r=n:n&&(x.type(n,"object","invalid pixel data type"),T(e,n),"x"in n&&(e.xOffset=0|n.x),"y"in n&&(e.yOffset=0|n.y),bt(n.data)&&(r=n.data)),x(!e.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){x(!r,"can not specify copy and data field for the same texture");var o=a.viewportWidth,s=a.viewportHeight;e.width=e.width||o-e.xOffset,e.height=e.height||s-e.yOffset,e.needsCopy=!0,x(e.xOffset>=0&&e.xOffset<o&&e.yOffset>=0&&e.yOffset<s&&e.width>0&&e.width<=o&&e.height>0&&e.height<=s,"copy texture read out of bounds")}else if(r){if(t(r))e.channels=e.channels||4,e.data=r,"type"in n||5121!==e.type||(e.type=_t(r));else if(pt(r))e.channels=e.channels||4,function(t,e){var n=e.length;switch(t.type){case 5121:case 5123:case 5125:case 5126:var r=z.allocType(t.type,n);r.set(e),t.data=r;break;case 36193:t.data=Z(e);break;default:x.raise("unsupported texture type, must specify a typed array")}}(e,r),e.alignment=1,e.needsFree=!0;else if(R(r)){var u=r.data;Array.isArray(u)||5121!==e.type||(e.type=_t(u));var c,f,l,h,d,p,g=r.shape,v=r.stride;3===g.length?(l=g[2],p=v[2]):(x(2===g.length,"invalid ndarray pixel data, must be 2 or 3D"),l=1,p=1),c=g[0],f=g[1],h=v[0],d=v[1],e.alignment=1,e.width=c,e.height=f,e.channels=l,e.format=e.internalformat=nt[l],e.needsFree=!0,function(t,e,n,r,i,o){for(var a=t.width,s=t.height,u=t.channels,c=xt(t,a*s*u),f=0,l=0;l<s;++l)for(var h=0;h<a;++h)for(var d=0;d<u;++d)c[f++]=e[n*h+r*l+i*d+o];wt(t,c)}(e,u,h,d,p,r.offset)}else if(mt(r)||yt(r)||vt(r)===st)mt(r)||yt(r)?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(function(t){return vt(t)===ut}(r))e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(function(t){return vt(t)===ct}(r))e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(function(t){return vt(t)===ft}(r))e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(gt(r)){var m=e.width||r[0].length,y=e.height||r.length,b=e.channels;b=J(r[0][0])?b||r[0][0].length:b||1;for(var _=I.shape(r),w=1,M=0;M<_.length;++M)w*=_[M];var k=xt(e,w);I.flatten(r,_,"",k),wt(e,k),e.alignment=1,e.width=m,e.height=y,e.channels=b,e.format=e.internalformat=nt[b],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;5126===e.type?x(i.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):36193===e.type&&x(i.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function N(t,e,r){var i=t.element,a=t.data,s=t.internalformat,u=t.format,c=t.type,f=t.width,l=t.height;C(t),i?n.texImage2D(e,r,u,u,c,i):t.compressed?n.compressedTexImage2D(e,r,s,f,l,0,a):t.needsCopy?(o(),n.copyTexImage2D(e,r,u,t.xOffset,t.yOffset,f,l,0)):n.texImage2D(e,r,u,f,l,0,u,c,a||null)}function B(t,e,r,i,a){var s=t.element,u=t.data,c=t.internalformat,f=t.format,l=t.type,h=t.width,d=t.height;C(t),s?n.texSubImage2D(e,a,r,i,f,l,s):t.compressed?n.compressedTexSubImage2D(e,a,r,i,c,h,d,u):t.needsCopy?(o(),n.copyTexSubImage2D(e,a,r,i,t.xOffset,t.yOffset,h,d)):n.texSubImage2D(e,a,r,i,h,d,f,l,u)}var D=[];function j(){return D.pop()||new O}function U(t){t.needsFree&&z.freeType(t.data),O.call(t),D.push(t)}function F(){S.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function H(t,e,n){var r=t.images[0]=j();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function q(t,e){var n=null;if(bt(e))E(n=t.images[0]=j(),t),P(n,e),t.mipmask=1;else if(T(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,i=0;i<r.length;++i)E(n=t.images[i]=j(),t),n.width>>=i,n.height>>=i,P(n,r[i]),t.mipmask|=1<<i;else E(n=t.images[0]=j(),t),P(n,e),t.mipmask=1;E(t,t.images[0]),!t.compressed||33776!==t.internalformat&&33777!==t.internalformat&&33778!==t.internalformat&&33779!==t.internalformat||x(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function V(t,e){for(var n=t.images,r=0;r<n.length;++r){if(!n[r])return;N(n[r],e,r)}}var Y=[];function W(){var t=Y.pop()||new F;S.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function G(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&U(e[n]),e[n]=null;Y.push(t)}function X(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function K(t,e){if("min"in e){var n=e.min;x.parameter(n,h),t.minFilter=h[n],et.indexOf(t.minFilter)>=0&&!("faces"in e)&&(t.genMipmaps=!0)}if("mag"in e){var r=e.mag;x.parameter(r,l),t.magFilter=l[r]}var o=t.wrapS,a=t.wrapT;if("wrap"in e){var s=e.wrap;"string"==typeof s?(x.parameter(s,f),o=a=f[s]):Array.isArray(s)&&(x.parameter(s[0],f),x.parameter(s[1],f),o=f[s[0]],a=f[s[1]])}else{if("wrapS"in e){var u=e.wrapS;x.parameter(u,f),o=f[u]}if("wrapT"in e){var d=e.wrapT;x.parameter(d,f),a=f[d]}}if(t.wrapS=o,t.wrapT=a,"anisotropic"in e){var p=e.anisotropic;x("number"==typeof p&&p>=1&&p<=i.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var g=!1;switch(typeof e.mipmap){case"string":x.parameter(e.mipmap,c,"invalid mipmap hint"),t.mipmapHint=c[e.mipmap],t.genMipmaps=!0,g=!0;break;case"boolean":g=t.genMipmaps=e.mipmap;break;case"object":x(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,g=!0;break;default:x.raise("invalid mipmap type")}g&&!("min"in e)&&(t.minFilter=9984)}}function Q(t,e){n.texParameteri(e,10241,t.minFilter),n.texParameteri(e,10240,t.magFilter),n.texParameteri(e,10242,t.wrapS),n.texParameteri(e,10243,t.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(e,34046,t.anisotropic),t.genMipmaps&&(n.hint(33170,t.mipmapHint),n.generateMipmap(e))}var $=0,it={},ot=i.maxTextureUnits,at=Array(ot).map((function(){return null}));function lt(t){S.call(this),this.mipmask=0,this.internalformat=6408,this.id=$++,this.refCount=1,this.target=t,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new X,u.profile&&(this.stats={size:0})}function ht(t){n.activeTexture(33984),n.bindTexture(t.target,t.texture)}function dt(){var t=at[0];t?n.bindTexture(t.target,t.texture):n.bindTexture(3553,null)}function kt(t){var e=t.texture;x(e,"must not double destroy texture");var r=t.unit,i=t.target;r>=0&&(n.activeTexture(33984+r),n.bindTexture(i,null),at[r]=null),n.deleteTexture(e),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete it[t.id],s.textureCount--}return e(lt.prototype,{bind:function(){this.bindCount+=1;var t=this.unit;if(t<0){for(var e=0;e<ot;++e){var r=at[e];if(r){if(r.bindCount>0)continue;r.unit=-1}at[e]=this,t=e;break}t>=ot&&x.raise("insufficient number of texture units"),u.profile&&s.maxTextureUnits<t+1&&(s.maxTextureUnits=t+1),this.unit=t,n.activeTexture(33984+t),n.bindTexture(this.target,this.texture)}return t},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&kt(this)}}),u.profile&&(s.getTotalTextureSize=function(){var t=0;return Object.keys(it).forEach((function(e){t+=it[e].stats.size})),t}),{create2D:function(t,e){var r=new lt(3553);function o(t,e){var n=r.texInfo;X.call(n);var a=W();return"number"==typeof t?H(a,0|t,"number"==typeof e?0|e:0|t):t?(x.type(t,"object","invalid arguments to regl.texture"),K(n,t),q(a,t)):H(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,E(r,a),x.texture2D(n,a,i),r.internalformat=a.internalformat,o.width=a.width,o.height=a.height,ht(r),V(a,3553),Q(n,3553),dt(),G(a),u.profile&&(r.stats.size=Mt(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),o.format=b[r.internalformat],o.type=_[r.type],o.mag=w[n.magFilter],o.min=M[n.minFilter],o.wrapS=k[n.wrapS],o.wrapT=k[n.wrapT],o}return it[r.id]=r,s.textureCount++,o(t,e),o.subimage=function(t,e,n,i){x(!!t,"must specify image data");var a=0|e,s=0|n,u=0|i,c=j();return E(c,r),c.width=0,c.height=0,P(c,t),c.width=c.width||(r.width>>u)-a,c.height=c.height||(r.height>>u)-s,x(r.type===c.type&&r.format===c.format&&r.internalformat===c.internalformat,"incompatible format for texture.subimage"),x(a>=0&&s>=0&&a+c.width<=r.width&&s+c.height<=r.height,"texture.subimage write out of bounds"),x(r.mipmask&1<<u,"missing mipmap data"),x(c.data||c.element||c.needsCopy,"missing image data"),ht(r),B(c,3553,a,s,u),dt(),U(c),o},o.resize=function(t,e){var i=0|t,a=0|e||i;if(i===r.width&&a===r.height)return o;o.width=r.width=i,o.height=r.height=a,ht(r);for(var s=0;r.mipmask>>s;++s){var c=i>>s,f=a>>s;if(!c||!f)break;n.texImage2D(3553,s,r.format,c,f,0,r.format,r.type,null)}return dt(),u.profile&&(r.stats.size=Mt(r.internalformat,r.type,i,a,!1,!1)),o},o._reglType="texture2d",o._texture=r,u.profile&&(o.stats=r.stats),o.destroy=function(){r.decRef()},o},createCube:function(t,e,r,o,a,c){var f=new lt(34067);it[f.id]=f,s.cubeCount++;var l=new Array(6);function h(t,e,n,r,o,a){var s,c=f.texInfo;for(X.call(c),s=0;s<6;++s)l[s]=W();if("number"!=typeof t&&t)if("object"==typeof t)if(e)q(l[0],t),q(l[1],e),q(l[2],n),q(l[3],r),q(l[4],o),q(l[5],a);else if(K(c,t),T(f,t),"faces"in t){var d=t.faces;for(x(Array.isArray(d)&&6===d.length,"cube faces must be a length 6 array"),s=0;s<6;++s)x("object"==typeof d[s]&&!!d[s],"invalid input for cube map face"),E(l[s],f),q(l[s],d[s])}else for(s=0;s<6;++s)q(l[s],t);else x.raise("invalid arguments to cube map");else{var p=0|t||1;for(s=0;s<6;++s)H(l[s],p,p)}for(E(f,l[0]),i.npotTextureCube||x(tt(f.width)&&tt(f.height),"your browser does not support non power or two texture dimensions"),c.genMipmaps?f.mipmask=(l[0].width<<1)-1:f.mipmask=l[0].mipmask,x.textureCube(f,c,l,i),f.internalformat=l[0].internalformat,h.width=l[0].width,h.height=l[0].height,ht(f),s=0;s<6;++s)V(l[s],34069+s);for(Q(c,34067),dt(),u.profile&&(f.stats.size=Mt(f.internalformat,f.type,h.width,h.height,c.genMipmaps,!0)),h.format=b[f.internalformat],h.type=_[f.type],h.mag=w[c.magFilter],h.min=M[c.minFilter],h.wrapS=k[c.wrapS],h.wrapT=k[c.wrapT],s=0;s<6;++s)G(l[s]);return h}return h(t,e,r,o,a,c),h.subimage=function(t,e,n,r,i){x(!!e,"must specify image data"),x("number"==typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var o=0|n,a=0|r,s=0|i,u=j();return E(u,f),u.width=0,u.height=0,P(u,e),u.width=u.width||(f.width>>s)-o,u.height=u.height||(f.height>>s)-a,x(f.type===u.type&&f.format===u.format&&f.internalformat===u.internalformat,"incompatible format for texture.subimage"),x(o>=0&&a>=0&&o+u.width<=f.width&&a+u.height<=f.height,"texture.subimage write out of bounds"),x(f.mipmask&1<<s,"missing mipmap data"),x(u.data||u.element||u.needsCopy,"missing image data"),ht(f),B(u,34069+t,o,a,s),dt(),U(u),h},h.resize=function(t){var e=0|t;if(e!==f.width){h.width=f.width=e,h.height=f.height=e,ht(f);for(var r=0;r<6;++r)for(var i=0;f.mipmask>>i;++i)n.texImage2D(34069+r,i,f.format,e>>i,e>>i,0,f.format,f.type,null);return dt(),u.profile&&(f.stats.size=Mt(f.internalformat,f.type,h.width,h.height,!1,!0)),h}},h._reglType="textureCube",h._texture=f,u.profile&&(h.stats=f.stats),h.destroy=function(){f.decRef()},h},clear:function(){for(var t=0;t<ot;++t)n.activeTexture(33984+t),n.bindTexture(3553,null),at[t]=null;L(it).forEach(kt),s.cubeCount=0,s.textureCount=0},getTexture:function(t){return null},restore:function(){for(var t=0;t<ot;++t){var e=at[t];e&&(e.bindCount=0,e.unit=-1,at[t]=null)}L(it).forEach((function(t){t.texture=n.createTexture(),n.bindTexture(t.target,t.texture);for(var e=0;e<32;++e)if(0!=(t.mipmask&1<<e))if(3553===t.target)n.texImage2D(3553,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);else for(var r=0;r<6;++r)n.texImage2D(34069+r,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);Q(t.texInfo,t.target)}))}}}dt[32854]=2,dt[32855]=2,dt[36194]=2,dt[34041]=4,dt[33776]=.5,dt[33777]=.5,dt[33778]=1,dt[33779]=1,dt[35986]=.5,dt[35987]=1,dt[34798]=1,dt[35840]=.5,dt[35841]=.25,dt[35842]=.5,dt[35843]=.25,dt[36196]=.5;var At=[];function St(t,e,n){return At[t]*e*n}At[32854]=2,At[32855]=2,At[36194]=2,At[33189]=2,At[36168]=1,At[34041]=4,At[35907]=4,At[34836]=16,At[34842]=8,At[34843]=6;var Et=[6407,6408],Tt=[];Tt[6408]=4,Tt[6407]=3;var Ct=[];Ct[5121]=1,Ct[5126]=4,Ct[36193]=2;var Ot=[32854,32855,36194,35907,34842,34843,34836],Pt={};function Nt(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function Bt(e,n,r,i,o,a,s){function u(u){var c;null===n.next?(x(o.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),c=5121):(x(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),c=n.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(x(5121===c||5126===c,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===c&&x(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):x(5121===c,"Reading from a framebuffer is only allowed for the type 'uint8'"));var f=0,l=0,h=i.framebufferWidth,d=i.framebufferHeight,p=null;t(u)?p=u:u&&(x.type(u,"object","invalid arguments to regl.read()"),f=0|u.x,l=0|u.y,x(f>=0&&f<i.framebufferWidth,"invalid x offset for regl.read"),x(l>=0&&l<i.framebufferHeight,"invalid y offset for regl.read"),h=0|(u.width||i.framebufferWidth-f),d=0|(u.height||i.framebufferHeight-l),p=u.data||null),p&&(5121===c?x(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===c&&x(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),x(h>0&&h+f<=i.framebufferWidth,"invalid width for read pixels"),x(d>0&&d+l<=i.framebufferHeight,"invalid height for read pixels"),r();var g=h*d*4;return p||(5121===c?p=new Uint8Array(g):5126===c&&(p=p||new Float32Array(g))),x.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),x(p.byteLength>=g,"data buffer for regl.read() too small"),e.pixelStorei(3333,4),e.readPixels(f,l,h,d,6408,c,p),p}return function(t){return t&&"framebuffer"in t?function(t){var e;return n.setFBO({framebuffer:t.framebuffer},(function(){e=u(t)})),e}(t):u(t)}}function Dt(t){return Array.prototype.slice.call(t)}function zt(t){return Dt(t).join("")}Pt[36053]="complete",Pt[36054]="incomplete attachment",Pt[36057]="incomplete dimensions",Pt[36055]="incomplete, missing attachment",Pt[36061]="unsupported";var Rt="xyzw".split(""),Lt="profile",It="framebuffer",jt="vert",Ut="frag",Ft="elements",Ht="primitive",qt="count",Vt="offset",Yt="instances",Wt="vao",Gt=It+"Width",Xt=It+"Height",Kt=["blend.func","blend.equation","stencil.func","stencil.opFront","stencil.opBack","sample.coverage","viewport","scissor.box","polygonOffset.offset"],Qt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},$t=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Zt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Jt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},te={frag:35632,vert:35633},ee={cw:2304,ccw:2305};function ne(e){return Array.isArray(e)||t(e)||R(e)}function re(t){return t.sort((function(t,e){return"viewport"===t?-1:"viewport"===e?1:t<e?-1:1}))}function ie(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function oe(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function ae(t){return new ie(!1,!1,!1,t)}function se(t,e){var n=t.type;if(0===n){var r=t.data.length;return new ie(!0,r>=1,r>=2,e)}if(4===n){var i=t.data;return new ie(i.thisDep,i.contextDep,i.propDep,e)}return new ie(3===n,2===n,1===n,e)}var ue=new ie(!1,!1,!1,(function(){}));function ce(t,n,r,i,o,a,s,u,c,f,l,h,d,p,g){var v=f.Record,m={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(m.min=32775,m.max=32776);var y=r.angle_instanced_arrays,b=r.webgl_draw_buffers,_={dirty:!0,profile:g.profile},w={},M=[],k={},A={};function E(t){return t.replace(".","_")}function T(t,e,n){var r=E(t);M.push(t),w[r]=_[r]=!!n,k[r]=e}function C(t,e,n){var r=E(t);M.push(t),Array.isArray(n)?(_[r]=n.slice(),w[r]=n.slice()):_[r]=w[r]=n,A[r]=e}T("dither",3024),T("blend.enable",3042),C("blend.color","blendColor",[0,0,0,0]),C("blend.equation","blendEquationSeparate",[32774,32774]),C("blend.func","blendFuncSeparate",[1,0,1,0]),T("depth.enable",2929,!0),C("depth.func","depthFunc",513),C("depth.range","depthRange",[0,1]),C("depth.mask","depthMask",!0),C("colorMask","colorMask",[!0,!0,!0,!0]),T("cull.enable",2884),C("cull.face","cullFace",1029),C("frontFace","frontFace",2305),C("lineWidth","lineWidth",1),T("polygonOffset.enable",32823),C("polygonOffset.offset","polygonOffset",[0,0]),T("sample.alpha",32926),T("sample.enable",32928),C("sample.coverage","sampleCoverage",[1,!1]),T("stencil.enable",2960),C("stencil.mask","stencilMask",-1),C("stencil.func","stencilFunc",[519,0,-1]),C("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),C("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),T("scissor.enable",3089),C("scissor.box","scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),C("viewport","viewport",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var O={gl:t,context:d,strings:n,next:w,current:_,draw:h,elements:a,buffer:o,shader:l,attributes:f.state,vao:f,uniforms:c,framebuffer:u,extensions:r,timer:p,isBufferArgs:ne},P={primTypes:K,compareFuncs:Zt,blendFuncs:Qt,blendEquations:m,stencilOps:Jt,glTypes:F,orientationType:ee};x.optional((function(){O.isArrayLike=J})),b&&(P.backBuffer=[1029],P.drawBuffer=N(i.maxDrawbuffers,(function(t){return 0===t?[0]:N(t,(function(t){return 36064+t}))})));var B=0;function D(){var t=function(){var t=0,n=[],r=[];function i(){var n=[],r=[];return e((function(){n.push.apply(n,Dt(arguments))}),{def:function(){var e="v"+t++;return r.push(e),arguments.length>0&&(n.push(e,"="),n.push.apply(n,Dt(arguments)),n.push(";")),e},toString:function(){return zt([r.length>0?"var "+r.join(",")+";":"",zt(n)])}})}function o(){var t=i(),n=i(),r=t.toString,o=n.toString;function a(e,r){n(e,r,"=",t.def(e,r),";")}return e((function(){t.apply(t,Dt(arguments))}),{def:t.def,entry:t,exit:n,save:a,set:function(e,n,r){a(e,n),t(e,n,"=",r,";")},toString:function(){return r()+o()}})}var a=i(),s={};return{global:a,link:function(e){for(var i=0;i<r.length;++i)if(r[i]===e)return n[i];var o="g"+t++;return n.push(o),r.push(e),o},block:i,proc:function(t,n){var r=[];function i(){var t="a"+r.length;return r.push(t),t}n=n||0;for(var a=0;a<n;++a)i();var u=o(),c=u.toString;return s[t]=e(u,{arg:i,toString:function(){return zt(["function(",r.join(),"){",c(),"}"])}})},scope:o,cond:function(){var t=zt(arguments),n=o(),r=o(),i=n.toString,a=r.toString;return e(n,{then:function(){return n.apply(n,Dt(arguments)),this},else:function(){return r.apply(r,Dt(arguments)),this},toString:function(){var e=a();return e&&(e="else{"+e+"}"),zt(["if(",t,"){",i(),"}",e])}})},compile:function(){var t=['"use strict";',a,"return {"];Object.keys(s).forEach((function(e){t.push('"',e,'":',s[e].toString(),",")})),t.push("}");var e=zt(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(e)).apply(null,r)}}}(),r=t.link,i=t.global;t.id=B++,t.batchId="0";var o=r(O),a=t.shared={props:"a0"};Object.keys(O).forEach((function(t){a[t]=i.def(o,".",t)})),x.optional((function(){t.CHECK=r(x),t.commandStr=x.guessCommand(),t.command=r(t.commandStr),t.assert=function(t,e,n){t("if(!(",e,"))",this.CHECK,".commandRaise(",r(n),",",this.command,");")},P.invalidBlendCombinations=$t}));var s=t.next={},u=t.current={};Object.keys(A).forEach((function(t){Array.isArray(_[t])&&(s[t]=i.def(a.next,".",t),u[t]=i.def(a.current,".",t))}));var c=t.constants={};Object.keys(P).forEach((function(t){c[t]=i.def(JSON.stringify(P[t]))})),t.invoke=function(e,n){switch(n.type){case 0:var i=["this",a.context,a.props,t.batchId];return e.def(r(n.data),".call(",i.slice(0,Math.max(n.data.length+1,4)),")");case 1:return e.def(a.props,n.data);case 2:return e.def(a.context,n.data);case 3:return e.def("this",n.data);case 4:return n.data.append(t,e),n.data.ref}},t.attribCache={};var l={};return t.scopeAttrib=function(t){var e=n.id(t);if(e in l)return l[e];var i=f.scope[e];return i||(i=f.scope[e]=new v),l[e]=r(i)},t}function z(t,e,s,c,h){var d=t.static,p=t.dynamic;x.optional((function(){var t=[It,jt,Ut,Ft,Ht,Vt,qt,Yt,Lt,Wt].concat(M);function e(e){Object.keys(e).forEach((function(e){x.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',h.commandStr)}))}e(d),e(p)}));var g=function(t,e){var n=t.static;if("string"==typeof n[Ut]&&"string"==typeof n[jt]){if(Object.keys(e.dynamic).length>0)return null;var r=e.static,i=Object.keys(r);if(i.length>0&&"number"==typeof r[i[0]]){for(var o=[],a=0;a<i.length;++a)x("number"==typeof r[i[a]],"must specify all vertex attribute locations when using vaos"),o.push([0|r[i[a]],i[a]]);return o}}return null}(t,e),b=function(t,e){var n=t.static,r=t.dynamic;if(It in n){var i=n[It];return i?(i=u.getFramebuffer(i),x.command(i,"invalid framebuffer object"),ae((function(t,e){var n=t.link(i),r=t.shared;e.set(r.framebuffer,".next",n);var o=r.context;return e.set(o,"."+Gt,n+".width"),e.set(o,"."+Xt,n+".height"),n}))):ae((function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var r=n.context;return e.set(r,"."+Gt,r+".drawingBufferWidth"),e.set(r,"."+Xt,r+".drawingBufferHeight"),"null"}))}if(It in r){var o=r[It];return se(o,(function(t,e){var n=t.invoke(e,o),r=t.shared,i=r.framebuffer,a=e.def(i,".getFramebuffer(",n,")");x.optional((function(){t.assert(e,"!"+n+"||"+a,"invalid framebuffer object")})),e.set(i,".next",a);var s=r.context;return e.set(s,"."+Gt,a+"?"+a+".width:"+s+".drawingBufferWidth"),e.set(s,"."+Xt,a+"?"+a+".height:"+s+".drawingBufferHeight"),a}))}return null}(t),_=function(t,e,n){var r=t.static,i=t.dynamic;function o(t){if(t in r){var o=r[t];x.commandType(o,"object","invalid "+t,n.commandStr);var a,s,u=!0,c=0|o.x,f=0|o.y;return"width"in o?(a=0|o.width,x.command(a>=0,"invalid "+t,n.commandStr)):u=!1,"height"in o?(s=0|o.height,x.command(s>=0,"invalid "+t,n.commandStr)):u=!1,new ie(!u&&e&&e.thisDep,!u&&e&&e.contextDep,!u&&e&&e.propDep,(function(t,e){var n=t.shared.context,r=a;"width"in o||(r=e.def(n,".",Gt,"-",c));var i=s;return"height"in o||(i=e.def(n,".",Xt,"-",f)),[c,f,r,i]}))}if(t in i){var l=i[t],h=se(l,(function(e,n){var r=e.invoke(n,l);x.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}));var i=e.shared.context,o=n.def(r,".x|0"),a=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",Gt,"-",o,")"),u=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",Xt,"-",a,")");return x.optional((function(){e.assert(n,s+">=0&&"+u+">=0","invalid "+t)})),[o,a,s,u]}));return e&&(h.thisDep=h.thisDep||e.thisDep,h.contextDep=h.contextDep||e.contextDep,h.propDep=h.propDep||e.propDep),h}return e?new ie(e.thisDep,e.contextDep,e.propDep,(function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",Gt),e.def(n,".",Xt)]})):null}var a=o("viewport");if(a){var s=a;a=new ie(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=s.append(t,e),r=t.shared.context;return e.set(r,".viewportWidth",n[2]),e.set(r,".viewportHeight",n[3]),n}))}return{viewport:a,scissor_box:o("scissor.box")}}(t,b,h),w=function(t,e){var n=t.static,r=t.dynamic,i=function(){if(Ft in n){var t=n[Ft];ne(t)?t=a.getElements(a.create(t,!0)):t&&(t=a.getElements(t),x.command(t,"invalid elements",e.commandStr));var i=ae((function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r,r}return e.ELEMENTS=null,null}));return i.value=t,i}if(Ft in r){var o=r[Ft];return se(o,(function(t,e){var n=t.shared,r=n.isBufferArgs,i=n.elements,a=t.invoke(e,o),s=e.def("null"),u=e.def(r,"(",a,")"),c=t.cond(u).then(s,"=",i,".createStream(",a,");").else(s,"=",i,".getElements(",a,");");return x.optional((function(){t.assert(c.else,"!"+a+"||"+s,"invalid elements")})),e.entry(c),e.exit(t.cond(u).then(i,".destroyStream(",s,");")),t.ELEMENTS=s,s}))}return null}();function o(t,o){if(t in n){var a=0|n[t];return x.command(!o||a>=0,"invalid "+t,e.commandStr),ae((function(t,e){return o&&(t.OFFSET=a),a}))}if(t in r){var s=r[t];return se(s,(function(e,n){var r=e.invoke(n,s);return o&&(e.OFFSET=r,x.optional((function(){e.assert(n,r+">=0","invalid "+t)}))),r}))}return o&&i?ae((function(t,e){return t.OFFSET="0",0})):null}var s=o(Vt,!0);return{elements:i,primitive:function(){if(Ht in n){var t=n[Ht];return x.commandParameter(t,K,"invalid primitve",e.commandStr),ae((function(e,n){return K[t]}))}if(Ht in r){var o=r[Ht];return se(o,(function(t,e){var n=t.constants.primTypes,r=t.invoke(e,o);return x.optional((function(){t.assert(e,r+" in "+n,"invalid primitive, must be one of "+Object.keys(K))})),e.def(n,"[",r,"]")}))}return i?oe(i)?i.value?ae((function(t,e){return e.def(t.ELEMENTS,".primType")})):ae((function(){return 4})):new ie(i.thisDep,i.contextDep,i.propDep,(function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",4)})):null}(),count:function(){if(qt in n){var t=0|n[qt];return x.command("number"==typeof t&&t>=0,"invalid vertex count",e.commandStr),ae((function(){return t}))}if(qt in r){var o=r[qt];return se(o,(function(t,e){var n=t.invoke(e,o);return x.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(i){if(oe(i)){if(i)return s?new ie(s.thisDep,s.contextDep,s.propDep,(function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return x.optional((function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")})),n})):ae((function(t,e){return e.def(t.ELEMENTS,".vertCount")}));var a=ae((function(){return-1}));return x.optional((function(){a.MISSING=!0})),a}var u=new ie(i.thisDep||s.thisDep,i.contextDep||s.contextDep,i.propDep||s.propDep,(function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")}));return x.optional((function(){u.DYNAMIC=!0})),u}return null}(),instances:o(Yt,!1),offset:s}}(t,h),k=function(t,e){var n=t.static,r=t.dynamic,o={};return M.forEach((function(t){var a=E(t);function s(e,i){if(t in n){var s=e(n[t]);o[a]=ae((function(){return s}))}else if(t in r){var u=r[t];o[a]=se(u,(function(t,e){return i(t,e,t.invoke(e,u))}))}}switch(t){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return s((function(n){return x.commandType(n,"boolean",t,e.commandStr),n}),(function(e,n,r){return x.optional((function(){e.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+t,e.commandStr)})),r}));case"depth.func":return s((function(n){return x.commandParameter(n,Zt,"invalid "+t,e.commandStr),Zt[n]}),(function(e,n,r){var i=e.constants.compareFuncs;return x.optional((function(){e.assert(n,r+" in "+i,"invalid "+t+", must be one of "+Object.keys(Zt))})),n.def(i,"[",r,"]")}));case"depth.range":return s((function(t){return x.command(J(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t}),(function(t,e,n){return x.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")})),[e.def("+",n,"[0]"),e.def("+",n,"[1]")]}));case"blend.func":return s((function(t){x.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,r="srcAlpha"in t?t.srcAlpha:t.src,i="dstRGB"in t?t.dstRGB:t.dst,o="dstAlpha"in t?t.dstAlpha:t.dst;return x.commandParameter(n,Qt,a+".srcRGB",e.commandStr),x.commandParameter(r,Qt,a+".srcAlpha",e.commandStr),x.commandParameter(i,Qt,a+".dstRGB",e.commandStr),x.commandParameter(o,Qt,a+".dstAlpha",e.commandStr),x.command(-1===$t.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",e.commandStr),[Qt[n],Qt[i],Qt[r],Qt[o]]}),(function(e,n,r){var i=e.constants.blendFuncs;function o(o,a){var s=n.def('"',o,a,'" in ',r,"?",r,".",o,a,":",r,".",o);return x.optional((function(){e.assert(n,s+" in "+i,"invalid "+t+"."+o+a+", must be one of "+Object.keys(Qt))})),s}x.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var a=o("src","RGB"),s=o("dst","RGB");x.optional((function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+a+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var u=n.def(i,"[",a,"]"),c=n.def(i,"[",o("src","Alpha"),"]");return[u,n.def(i,"[",s,"]"),c,n.def(i,"[",o("dst","Alpha"),"]")]}));case"blend.equation":return s((function(n){return"string"==typeof n?(x.commandParameter(n,m,"invalid "+t,e.commandStr),[m[n],m[n]]):"object"==typeof n?(x.commandParameter(n.rgb,m,t+".rgb",e.commandStr),x.commandParameter(n.alpha,m,t+".alpha",e.commandStr),[m[n.rgb],m[n.alpha]]):void x.commandRaise("invalid blend.equation",e.commandStr)}),(function(e,n,r){var i=e.constants.blendEquations,o=n.def(),a=n.def(),s=e.cond("typeof ",r,'==="string"');return x.optional((function(){function n(t,n,r){e.assert(t,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(m))}n(s.then,t,r),e.assert(s.else,r+"&&typeof "+r+'==="object"',"invalid "+t),n(s.else,t+".rgb",r+".rgb"),n(s.else,t+".alpha",r+".alpha")})),s.then(o,"=",a,"=",i,"[",r,"];"),s.else(o,"=",i,"[",r,".rgb];",a,"=",i,"[",r,".alpha];"),n(s),[o,a]}));case"blend.color":return s((function(t){return x.command(J(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),N(4,(function(e){return+t[e]}))}),(function(t,e,n){return x.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),N(4,(function(t){return e.def("+",n,"[",t,"]")}))}));case"stencil.mask":return s((function(t){return x.commandType(t,"number",a,e.commandStr),0|t}),(function(t,e,n){return x.optional((function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")})),e.def(n,"|0")}));case"stencil.func":return s((function(n){x.commandType(n,"object",a,e.commandStr);var r=n.cmp||"keep",i=n.ref||0,o="mask"in n?n.mask:-1;return x.commandParameter(r,Zt,t+".cmp",e.commandStr),x.commandType(i,"number",t+".ref",e.commandStr),x.commandType(o,"number",t+".mask",e.commandStr),[Zt[r],i,o]}),(function(t,e,n){var r=t.constants.compareFuncs;return x.optional((function(){function i(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")})),[e.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",7680),e.def(n,".ref|0"),e.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case"stencil.opFront":case"stencil.opBack":return s((function(n){x.commandType(n,"object",a,e.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",o=n.zpass||"keep";return x.commandParameter(r,Jt,t+".fail",e.commandStr),x.commandParameter(i,Jt,t+".zfail",e.commandStr),x.commandParameter(o,Jt,t+".zpass",e.commandStr),["stencil.opBack"===t?1029:1028,Jt[r],Jt[i],Jt[o]]}),(function(e,n,r){var i=e.constants.stencilOps;function o(o){return x.optional((function(){e.assert(n,'!("'+o+'" in '+r+")||("+r+"."+o+" in "+i+")","invalid "+t+"."+o+", must be one of "+Object.keys(Jt))})),n.def('"',o,'" in ',r,"?",i,"[",r,".",o,"]:",7680)}return x.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),["stencil.opBack"===t?1029:1028,o("fail"),o("zfail"),o("zpass")]}));case"polygonOffset.offset":return s((function(t){x.commandType(t,"object",a,e.commandStr);var n=0|t.factor,r=0|t.units;return x.commandType(n,"number",a+".factor",e.commandStr),x.commandType(r,"number",a+".units",e.commandStr),[n,r]}),(function(e,n,r){return x.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),[n.def(r,".factor|0"),n.def(r,".units|0")]}));case"cull.face":return s((function(t){var n=0;return"front"===t?n=1028:"back"===t&&(n=1029),x.command(!!n,a,e.commandStr),n}),(function(t,e,n){return x.optional((function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),e.def(n,'==="front"?',1028,":",1029)}));case"lineWidth":return s((function(t){return x.command("number"==typeof t&&t>=i.lineWidthDims[0]&&t<=i.lineWidthDims[1],"invalid line width, must be a positive number between "+i.lineWidthDims[0]+" and "+i.lineWidthDims[1],e.commandStr),t}),(function(t,e,n){return x.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+i.lineWidthDims[0]+"&&"+n+"<="+i.lineWidthDims[1],"invalid line width")})),n}));case"frontFace":return s((function(t){return x.commandParameter(t,ee,a,e.commandStr),ee[t]}),(function(t,e,n){return x.optional((function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),e.def(n+'==="cw"?2304:2305')}));case"colorMask":return s((function(t){return x.command(J(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map((function(t){return!!t}))}),(function(t,e,n){return x.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),N(4,(function(t){return"!!"+n+"["+t+"]"}))}));case"sample.coverage":return s((function(t){x.command("object"==typeof t&&t,a,e.commandStr);var n="value"in t?t.value:1,r=!!t.invert;return x.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,r]}),(function(t,e,n){return x.optional((function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")})),[e.def('"value" in ',n,"?+",n,".value:1"),e.def("!!",n,".invert")]}))}})),o}(t,h),A=function(t,e,r){var i=t.static,o=t.dynamic;function a(t){if(t in i){var e=n.id(i[t]);x.optional((function(){l.shader(te[t],e,x.guessCommand())}));var r=ae((function(){return e}));return r.id=e,r}if(t in o){var a=o[t];return se(a,(function(e,n){var r=e.invoke(n,a),i=n.def(e.shared.strings,".id(",r,")");return x.optional((function(){n(e.shared.shader,".shader(",te[t],",",i,",",e.command,");")})),i}))}return null}var s,u=a(Ut),c=a(jt),f=null;return oe(u)&&oe(c)?(f=l.program(c.id,u.id,null,r),s=ae((function(t,e){return t.link(f)}))):s=new ie(u&&u.thisDep||c&&c.thisDep,u&&u.contextDep||c&&c.contextDep,u&&u.propDep||c&&c.propDep,(function(t,e){var n,r=t.shared.shader;n=u?u.append(t,e):e.def(r,".",Ut);var i=r+".program("+(c?c.append(t,e):e.def(r,".",jt))+","+n;return x.optional((function(){i+=","+t.command})),e.def(i+")")})),{frag:u,vert:c,progVar:s,program:f}}(t,0,g);function S(t){var e=_[t];e&&(k[t]=e)}S("viewport"),S(E("scissor.box"));var T=Object.keys(k).length>0,C={framebuffer:b,draw:w,shader:A,state:k,dirty:T,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(C.profile=function(t){var e,n=t.static,r=t.dynamic;if(Lt in n){var i=!!n[Lt];(e=ae((function(t,e){return i}))).enable=i}else if(Lt in r){var o=r[Lt];e=se(o,(function(t,e){return t.invoke(e,o)}))}return e}(t),C.uniforms=function(t,e){var n=t.static,r=t.dynamic,i={};return Object.keys(n).forEach((function(t){var r,o=n[t];if("number"==typeof o||"boolean"==typeof o)r=ae((function(){return o}));else if("function"==typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?r=ae((function(t){return t.link(o)})):"framebuffer"===a||"framebufferCube"===a?(x.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),r=ae((function(t){return t.link(o.color[0])}))):x.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else J(o)?r=ae((function(e){return e.global.def("[",N(o.length,(function(n){return x.command("number"==typeof o[n]||"boolean"==typeof o[n],"invalid uniform "+t,e.commandStr),o[n]})),"]")})):x.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);r.value=o,i[t]=r})),Object.keys(r).forEach((function(t){var e=r[t];i[t]=se(e,(function(t,n){return t.invoke(n,e)}))})),i}(s,h),C.drawVAO=C.scopeVAO=function(t,e){var n=t.static,r=t.dynamic;if(Wt in n){var i=n[Wt];return null!==i&&null===f.getVAO(i)&&(i=f.createVAO(i)),ae((function(t){return t.link(f.getVAO(i))}))}if(Wt in r){var o=r[Wt];return se(o,(function(t,e){var n=t.invoke(e,o);return e.def(t.shared.vao+".getVAO("+n+")")}))}return null}(t),!C.drawVAO&&A.program&&!g&&r.angle_instanced_arrays){var O=!0,P=A.program.attributes.map((function(t){var n=e.static[t];return O=O&&!!n,n}));if(O&&P.length>0){var B=f.getVAO(f.createVAO(P));C.drawVAO=new ie(null,null,null,(function(t,e){return t.link(B)})),C.useVAO=!0}}return g?C.useVAO=!0:C.attributes=function(t,e){var r=t.static,i=t.dynamic,a={};return Object.keys(r).forEach((function(t){var i=r[t],s=n.id(t),u=new v;if(ne(i))u.state=1,u.buffer=o.getBuffer(o.create(i,34962,!1,!0)),u.type=0;else{var c=o.getBuffer(i);if(c)u.state=1,u.buffer=c,u.type=0;else if(x.command("object"==typeof i&&i,"invalid data for attribute "+t,e.commandStr),"constant"in i){var f=i.constant;u.buffer="null",u.state=2,"number"==typeof f?u.x=f:(x.command(J(f)&&f.length>0&&f.length<=4,"invalid constant for attribute "+t,e.commandStr),Rt.forEach((function(t,e){e<f.length&&(u[t]=f[e])})))}else{c=ne(i.buffer)?o.getBuffer(o.create(i.buffer,34962,!1,!0)):o.getBuffer(i.buffer),x.command(!!c,'missing buffer for attribute "'+t+'"',e.commandStr);var l=0|i.offset;x.command(l>=0,'invalid offset for attribute "'+t+'"',e.commandStr);var h=0|i.stride;x.command(h>=0&&h<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',e.commandStr);var d=0|i.size;x.command(!("size"in i)||d>0&&d<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',e.commandStr);var p=!!i.normalized,g=0;"type"in i&&(x.commandParameter(i.type,F,"invalid type for attribute "+t,e.commandStr),g=F[i.type]);var m=0|i.divisor;"divisor"in i&&(x.command(0===m||y,'cannot specify divisor for attribute "'+t+'", instancing not supported',e.commandStr),x.command(m>=0,'invalid divisor for attribute "'+t+'"',e.commandStr)),x.optional((function(){var n=e.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach((function(e){x.command(r.indexOf(e)>=0,'unknown parameter "'+e+'" for attribute pointer "'+t+'" (valid parameters are '+r+")",n)}))})),u.buffer=c,u.state=1,u.size=d,u.normalized=p,u.type=g||c.dtype,u.offset=l,u.stride=h,u.divisor=m}}a[t]=ae((function(t,e){var n=t.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(u).forEach((function(t){r[t]=u[t]})),u.buffer&&(r.buffer=t.link(u.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(i).forEach((function(t){var e=i[t];a[t]=se(e,(function(n,r){var i=n.invoke(r,e),o=n.shared,a=n.constants,s=o.isBufferArgs,u=o.buffer;x.optional((function(){n.assert(r,i+"&&(typeof "+i+'==="object"||typeof '+i+'==="function")&&('+s+"("+i+")||"+u+".getBuffer("+i+")||"+u+".getBuffer("+i+".buffer)||"+s+"("+i+'.buffer)||("constant" in '+i+"&&(typeof "+i+'.constant==="number"||'+o.isArrayLike+"("+i+".constant))))",'invalid dynamic attribute "'+t+'"')}));var c={isStream:r.def(!1)},f=new v;f.state=1,Object.keys(f).forEach((function(t){c[t]=r.def(""+f[t])}));var l=c.buffer,h=c.type;function d(t){r(c[t],"=",i,".",t,"|0;")}return r("if(",s,"(",i,")){",c.isStream,"=true;",l,"=",u,".createStream(",34962,",",i,");",h,"=",l,".dtype;","}else{",l,"=",u,".getBuffer(",i,");","if(",l,"){",h,"=",l,".dtype;",'}else if("constant" in ',i,"){",c.state,"=",2,";","if(typeof "+i+'.constant === "number"){',c[Rt[0]],"=",i,".constant;",Rt.slice(1).map((function(t){return c[t]})).join("="),"=0;","}else{",Rt.map((function(t,e){return c[t]+"="+i+".constant.length>"+e+"?"+i+".constant["+e+"]:0;"})).join(""),"}}else{","if(",s,"(",i,".buffer)){",l,"=",u,".createStream(",34962,",",i,".buffer);","}else{",l,"=",u,".getBuffer(",i,".buffer);","}",h,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",l,".dtype;",c.normalized,"=!!",i,".normalized;"),d("size"),d("offset"),d("stride"),d("divisor"),r("}}"),r.exit("if(",c.isStream,"){",u,".destroyStream(",l,");","}"),c}))})),a}(e,h),C.context=function(t){var e=t.static,n=t.dynamic,r={};return Object.keys(e).forEach((function(t){var n=e[t];r[t]=ae((function(t,e){return"number"==typeof n||"boolean"==typeof n?""+n:t.link(n)}))})),Object.keys(n).forEach((function(t){var e=n[t];r[t]=se(e,(function(t,n){return t.invoke(n,e)}))})),r}(c),C}function R(t,e,n){var r=t.shared.context,i=t.scope();Object.keys(n).forEach((function(o){e.save(r,"."+o);var a=n[o];i(r,".",o,"=",a.append(t,e),";")})),e(i)}function L(t,e,n,r){var i,o=t.shared,a=o.gl,s=o.framebuffer;b&&(i=e.def(o.extensions,".webgl_draw_buffers"));var u,c=t.constants,f=c.drawBuffer,l=c.backBuffer;u=n?n.append(t,e):e.def(s,".next"),r||e("if(",u,"!==",s,".cur){"),e("if(",u,"){",a,".bindFramebuffer(",36160,",",u,".framebuffer);"),b&&e(i,".drawBuffersWEBGL(",f,"[",u,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",36160,",null);"),b&&e(i,".drawBuffersWEBGL(",l,");"),e("}",s,".cur=",u,";"),r||e("}")}function I(t,e,n){var r=t.shared,i=r.gl,o=t.current,a=t.next,s=r.current,u=r.next,c=t.cond(s,".dirty");M.forEach((function(e){var r,f,l=E(e);if(!(l in n.state))if(l in a){r=a[l],f=o[l];var h=N(_[l].length,(function(t){return c.def(r,"[",t,"]")}));c(t.cond(h.map((function(t,e){return t+"!=="+f+"["+e+"]"})).join("||")).then(i,".",A[l],"(",h,");",h.map((function(t,e){return f+"["+e+"]="+t})).join(";"),";"))}else{r=c.def(u,".",l);var d=t.cond(r,"!==",s,".",l);c(d),l in k?d(t.cond(r).then(i,".enable(",k[l],");").else(i,".disable(",k[l],");"),s,".",l,"=",r,";"):d(i,".",A[l],"(",r,");",s,".",l,"=",r,";")}})),0===Object.keys(n.state).length&&c(s,".dirty=false;"),e(c)}function j(t,e,n,r){var i=t.shared,o=t.current,a=i.current,s=i.gl;re(Object.keys(n)).forEach((function(i){var u=n[i];if(!r||r(u)){var c=u.append(t,e);if(k[i]){var f=k[i];oe(u)?e(s,c?".enable(":".disable(",f,");"):e(t.cond(c).then(s,".enable(",f,");").else(s,".disable(",f,");")),e(a,".",i,"=",c,";")}else if(J(c)){var l=o[i];e(s,".",A[i],"(",c,");",c.map((function(t,e){return l+"["+e+"]="+t})).join(";"),";")}else e(s,".",A[i],"(",c,");",a,".",i,"=",c,";")}}))}function U(t,e){y&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function H(t,e,n,r,i){var o,a,s,u=t.shared,c=t.stats,f=u.current,l=u.timer,h=n.profile;function d(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function g(t){t(o=e.def(),"=",d(),";"),"string"==typeof i?t(c,".count+=",i,";"):t(c,".count++;"),p&&(r?t(a=e.def(),"=",l,".getNumPendingQueries();"):t(l,".beginQuery(",c,");"))}function v(t){t(c,".cpuTime+=",d(),"-",o,";"),p&&(r?t(l,".pushScopeStats(",a,",",l,".getNumPendingQueries(),",c,");"):t(l,".endQuery();"))}function m(t){var n=e.def(f,".profile");e(f,".profile=",t,";"),e.exit(f,".profile=",n,";")}if(h){if(oe(h))return void(h.enable?(g(e),v(e.exit),m("true")):m("false"));m(s=h.append(t,e))}else s=e.def(f,".profile");var y=t.block();g(y),e("if(",s,"){",y,"}");var b=t.block();v(b),e.exit("if(",s,"){",b,"}")}function q(t,e,n,r,i){var o=t.shared;r.forEach((function(r){var a,s=r.name,u=n.attributes[s];if(u){if(!i(u))return;a=u.append(t,e)}else{if(!i(ue))return;var c=t.scopeAttrib(s);x.optional((function(){t.assert(e,c+".state","missing attribute "+s)})),a={},Object.keys(new v).forEach((function(t){a[t]=e.def(c,".",t)}))}!function(n,r,i){var a=o.gl,s=e.def(n,".location"),u=e.def(o.attributes,"[",s,"]"),c=i.state,f=i.buffer,l=[i.x,i.y,i.z,i.w],h=["buffer","normalized","offset","stride"];function d(){e("if(!",u,".buffer){",a,".enableVertexAttribArray(",s,");}");var n,o=i.type;if(n=i.size?e.def(i.size,"||",r):r,e("if(",u,".type!==",o,"||",u,".size!==",n,"||",h.map((function(t){return u+"."+t+"!=="+i[t]})).join("||"),"){",a,".bindBuffer(",34962,",",f,".buffer);",a,".vertexAttribPointer(",[s,n,o,i.normalized,i.stride,i.offset],");",u,".type=",o,";",u,".size=",n,";",h.map((function(t){return u+"."+t+"="+i[t]+";"})).join(""),"}"),y){var c=i.divisor;e("if(",u,".divisor!==",c,"){",t.instancing,".vertexAttribDivisorANGLE(",[s,c],");",u,".divisor=",c,";}")}}function p(){e("if(",u,".buffer){",a,".disableVertexAttribArray(",s,");",u,".buffer=null;","}if(",Rt.map((function(t,e){return u+"."+t+"!=="+l[e]})).join("||"),"){",a,".vertexAttrib4f(",s,",",l,");",Rt.map((function(t,e){return u+"."+t+"="+l[e]+";"})).join(""),"}")}1===c?d():2===c?p():(e("if(",c,"===",1,"){"),d(),e("}else{"),p(),e("}"))}(t.link(r),function(t){switch(t){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(r.info.type),a)}))}function V(t,e,r,i,o){for(var a,s=t.shared,u=s.gl,c=0;c<i.length;++c){var f,l=i[c],h=l.name,d=l.info.type,p=r.uniforms[h],g=t.link(l)+".location";if(p){if(!o(p))continue;if(oe(p)){var v=p.value;if(x.command(null!=v,'missing uniform "'+h+'"',t.commandStr),35678===d||35680===d){x.command("function"==typeof v&&(35678===d&&("texture2d"===v._reglType||"framebuffer"===v._reglType)||35680===d&&("textureCube"===v._reglType||"framebufferCube"===v._reglType)),"invalid texture for uniform "+h,t.commandStr);var m=t.link(v._texture||v.color[0]._texture);e(u,".uniform1i(",g,",",m+".bind());"),e.exit(m,".unbind();")}else if(35674===d||35675===d||35676===d){x.optional((function(){x.command(J(v),"invalid matrix for uniform "+h,t.commandStr),x.command(35674===d&&4===v.length||35675===d&&9===v.length||35676===d&&16===v.length,"invalid length for matrix uniform "+h,t.commandStr)}));var y=t.global.def("new Float32Array(["+Array.prototype.slice.call(v)+"])"),b=2;35675===d?b=3:35676===d&&(b=4),e(u,".uniformMatrix",b,"fv(",g,",false,",y,");")}else{switch(d){case 5126:x.commandType(v,"number","uniform "+h,t.commandStr),a="1f";break;case 35664:x.command(J(v)&&2===v.length,"uniform "+h,t.commandStr),a="2f";break;case 35665:x.command(J(v)&&3===v.length,"uniform "+h,t.commandStr),a="3f";break;case 35666:x.command(J(v)&&4===v.length,"uniform "+h,t.commandStr),a="4f";break;case 35670:x.commandType(v,"boolean","uniform "+h,t.commandStr),a="1i";break;case 5124:x.commandType(v,"number","uniform "+h,t.commandStr),a="1i";break;case 35671:case 35667:x.command(J(v)&&2===v.length,"uniform "+h,t.commandStr),a="2i";break;case 35672:case 35668:x.command(J(v)&&3===v.length,"uniform "+h,t.commandStr),a="3i";break;case 35673:case 35669:x.command(J(v)&&4===v.length,"uniform "+h,t.commandStr),a="4i"}e(u,".uniform",a,"(",g,",",J(v)?Array.prototype.slice.call(v):v,");")}continue}f=p.append(t,e)}else{if(!o(ue))continue;f=e.def(s.uniforms,"[",n.id(h),"]")}35678===d?e("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}"):35680===d&&e("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}"),x.optional((function(){function n(n,r){t.assert(e,n,'bad data or missing for uniform "'+h+'".  '+r)}function r(t){n("typeof "+f+'==="'+t+'"',"invalid type, expected "+t)}function i(e,r){n(s.isArrayLike+"("+f+")&&"+f+".length==="+e,"invalid vector, should have length "+e,t.commandStr)}function o(e){n("typeof "+f+'==="function"&&'+f+'._reglType==="texture'+(3553===e?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(d){case 5124:r("number");break;case 35667:i(2);break;case 35668:i(3);break;case 35669:i(4);break;case 5126:r("number");break;case 35664:i(2);break;case 35665:i(3);break;case 35666:i(4);break;case 35670:r("boolean");break;case 35671:i(2);break;case 35672:i(3);break;case 35673:case 35674:i(4);break;case 35675:i(9);break;case 35676:i(16);break;case 35678:o(3553);break;case 35680:o(34067)}}));var _=1;switch(d){case 35678:case 35680:var w=e.def(f,"._texture");e(u,".uniform1i(",g,",",w,".bind());"),e.exit(w,".unbind();");continue;case 5124:case 35670:a="1i";break;case 35667:case 35671:a="2i",_=2;break;case 35668:case 35672:a="3i",_=3;break;case 35669:case 35673:a="4i",_=4;break;case 5126:a="1f";break;case 35664:a="2f",_=2;break;case 35665:a="3f",_=3;break;case 35666:a="4f",_=4;break;case 35674:a="Matrix2fv";break;case 35675:a="Matrix3fv";break;case 35676:a="Matrix4fv"}if(e(u,".uniform",a,"(",g,","),"M"===a.charAt(0)){var M=Math.pow(d-35674+2,2),k=t.global.def("new Float32Array(",M,")");e("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",N(M,(function(t){return k+"["+t+"]="+f+"["+t+"]"})),",",k,")")}else e(_>1?N(_,(function(t){return f+"["+t+"]"})):f);e(");")}}function Y(t,e,n,r){var i=t.shared,o=i.gl,a=i.draw,s=r.draw,u=function(){var i,u=s.elements,c=e;return u?((u.contextDep&&r.contextDynamic||u.propDep)&&(c=n),i=u.append(t,c)):i=c.def(a,".",Ft),i&&c("if("+i+")"+o+".bindBuffer(34963,"+i+".buffer.buffer);"),i}();function c(i){var o=s[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(t,n):o.append(t,e):e.def(a,".",i)}var f,l,h=c(Ht),d=c(Vt),p=function(){var i,o=s.count,u=e;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(u=n),i=o.append(t,u),x.optional((function(){o.MISSING&&t.assert(e,"false","missing vertex count"),o.DYNAMIC&&t.assert(u,i+">=0","missing vertex count")}))):(i=u.def(a,".",qt),x.optional((function(){t.assert(u,i+">=0","missing vertex count")}))),i}();if("number"==typeof p){if(0===p)return}else n("if(",p,"){"),n.exit("}");y&&(f=c(Yt),l=t.instancing);var g=u+".type",v=s.elements&&oe(s.elements);function m(){function t(){n(l,".drawElementsInstancedANGLE(",[h,p,g,d+"<<(("+g+"-5121)>>1)",f],");")}function e(){n(l,".drawArraysInstancedANGLE(",[h,d,p,f],");")}u?v?t():(n("if(",u,"){"),t(),n("}else{"),e(),n("}")):e()}function b(){function t(){n(o+".drawElements("+[h,p,g,d+"<<(("+g+"-5121)>>1)"]+");")}function e(){n(o+".drawArrays("+[h,d,p]+");")}u?v?t():(n("if(",u,"){"),t(),n("}else{"),e(),n("}")):e()}y&&("number"!=typeof f||f>=0)?"string"==typeof f?(n("if(",f,">0){"),m(),n("}else if(",f,"<0){"),b(),n("}")):m():b()}function W(t,e,n,r,i){var o=D(),a=o.proc("body",i);return x.optional((function(){o.commandStr=e.commandStr,o.command=o.link(e.commandStr)})),y&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),t(o,a,n,r),o.compile().body}function G(t,e,n,r){U(t,e),n.useVAO?n.drawVAO?e(t.shared.vao,".setVAO(",n.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),q(t,e,n,r.attributes,(function(){return!0}))),V(t,e,n,r.uniforms,(function(){return!0})),Y(t,e,e,n)}function X(t,e,n,r){function i(){return!0}t.batchId="a1",U(t,e),q(t,e,n,r.attributes,i),V(t,e,n,r.uniforms,i),Y(t,e,e,n)}function Q(t,e,n,r){U(t,e);var i=n.contextDep,o=e.def(),a=e.def();t.shared.props=a,t.batchId=o;var s=t.scope(),u=t.scope();function c(t){return t.contextDep&&i||t.propDep}function f(t){return!c(t)}if(e(s.entry,"for(",o,"=0;",o,"<","a1",";++",o,"){",a,"=","a0","[",o,"];",u,"}",s.exit),n.needsContext&&R(t,u,n.context),n.needsFramebuffer&&L(t,u,n.framebuffer),j(t,u,n.state,c),n.profile&&c(n.profile)&&H(t,u,n,!1,!0),r)n.useVAO?n.drawVAO?c(n.drawVAO)?u(t.shared.vao,".setVAO(",n.drawVAO.append(t,u),");"):s(t.shared.vao,".setVAO(",n.drawVAO.append(t,s),");"):s(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(s(t.shared.vao,".setVAO(null);"),q(t,s,n,r.attributes,f),q(t,u,n,r.attributes,c)),V(t,s,n,r.uniforms,f),V(t,u,n,r.uniforms,c),Y(t,s,u,n);else{var l=t.global.def("{}"),h=n.shader.progVar.append(t,u),d=u.def(h,".id"),p=u.def(l,"[",d,"]");u(t.shared.gl,".useProgram(",h,".program);","if(!",p,"){",p,"=",l,"[",d,"]=",t.link((function(e){return W(X,t,n,e,2)})),"(",h,");}",p,".call(this,a0[",o,"],",o,");")}}function $(t,e,n){var r=e.static[n];if(r&&function(t){if("object"==typeof t&&!J(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(S.isDynamic(t[e[n]]))return!0;return!1}}(r)){var i=t.global,o=Object.keys(r),a=!1,s=!1,u=!1,c=t.global.def("{}");o.forEach((function(e){var n=r[e];if(S.isDynamic(n)){"function"==typeof n&&(n=r[e]=S.unbox(n));var o=se(n,null);a=a||o.thisDep,u=u||o.propDep,s=s||o.contextDep}else{switch(i(c,".",e,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(t.link(n))}i(";")}})),e.dynamic[n]=new S.DynamicVariable(4,{thisDep:a,contextDep:s,propDep:u,ref:c,append:function(t,e){o.forEach((function(n){var i=r[n];if(S.isDynamic(i)){var o=t.invoke(e,i);e(c,".",n,"=",o,";")}}))}}),delete e.static[n]}}return{next:w,current:_,procs:function(){var t=D(),e=t.proc("poll"),n=t.proc("refresh"),o=t.block();e(o),n(o);var a,s=t.shared,u=s.gl,c=s.next,f=s.current;o(f,".dirty=false;"),L(t,e),L(t,n,null,!0),y&&(a=t.link(y)),r.oes_vertex_array_object&&n(t.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var l=0;l<i.maxAttributes;++l){var h=n.def(s.attributes,"[",l,"]"),d=t.cond(h,".buffer");d.then(u,".enableVertexAttribArray(",l,");",u,".bindBuffer(",34962,",",h,".buffer.buffer);",u,".vertexAttribPointer(",l,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);").else(u,".disableVertexAttribArray(",l,");",u,".vertexAttrib4f(",l,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;"),n(d),y&&n(a,".vertexAttribDivisorANGLE(",l,",",h,".divisor);")}return n(t.shared.vao,".currentVAO=null;",t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"),Object.keys(k).forEach((function(r){var i=k[r],a=o.def(c,".",r),s=t.block();s("if(",a,"){",u,".enable(",i,")}else{",u,".disable(",i,")}",f,".",r,"=",a,";"),n(s),e("if(",a,"!==",f,".",r,"){",s,"}")})),Object.keys(A).forEach((function(r){var i,a,s=A[r],l=_[r],h=t.block();if(h(u,".",s,"("),J(l)){var d=l.length;i=t.global.def(c,".",r),a=t.global.def(f,".",r),h(N(d,(function(t){return i+"["+t+"]"})),");",N(d,(function(t){return a+"["+t+"]="+i+"["+t+"];"})).join("")),e("if(",N(d,(function(t){return i+"["+t+"]!=="+a+"["+t+"]"})).join("||"),"){",h,"}")}else i=o.def(c,".",r),a=o.def(f,".",r),h(i,");",f,".",r,"=",i,";"),e("if(",i,"!==",a,"){",h,"}");n(h)})),t.compile()}(),compile:function(t,e,r,i,o){var a=D();a.stats=a.link(o),Object.keys(e.static).forEach((function(t){$(a,e,t)})),Kt.forEach((function(e){$(a,t,e)}));var s=z(t,e,r,i,a);return function(t,e){var n=t.proc("draw",1);U(t,n),R(t,n,e.context),L(t,n,e.framebuffer),I(t,n,e),j(t,n,e.state),H(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)G(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var i=t.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(t.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",t.link((function(n){return W(G,t,e,n,1)})),"(",r,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}(a,s),function(t,e){var r=t.proc("scope",3);t.batchId="a2";var i=t.shared,o=i.current;function a(n){var o=e.shader[n];o&&r.set(i.shader,"."+n,o.append(t,r))}R(t,r,e.context),e.framebuffer&&e.framebuffer.append(t,r),re(Object.keys(e.state)).forEach((function(n){var o=e.state[n].append(t,r);J(o)?o.forEach((function(e,i){r.set(t.next[n],"["+i+"]",e)})):r.set(i.next,"."+n,o)})),H(t,r,e,!0,!0),[Ft,Vt,qt,Yt,Ht].forEach((function(n){var o=e.draw[n];o&&r.set(i.draw,"."+n,""+o.append(t,r))})),Object.keys(e.uniforms).forEach((function(o){r.set(i.uniforms,"["+n.id(o)+"]",e.uniforms[o].append(t,r))})),Object.keys(e.attributes).forEach((function(n){var i=e.attributes[n].append(t,r),o=t.scopeAttrib(n);Object.keys(new v).forEach((function(t){r.set(o,"."+t,i[t])}))})),e.scopeVAO&&r.set(i.vao,".targetVAO",e.scopeVAO.append(t,r)),a(jt),a(Ut),Object.keys(e.state).length>0&&(r(o,".dirty=true;"),r.exit(o,".dirty=true;")),r("a1(",t.shared.context,",a0,",t.batchId,");")}(a,s),function(t,e){var n=t.proc("batch",2);t.batchId="0",U(t,n);var r=!1,i=!0;Object.keys(e.context).forEach((function(t){r=r||e.context[t].propDep})),r||(R(t,n,e.context),i=!1);var o=e.framebuffer,a=!1;function s(t){return t.contextDep&&r||t.propDep}o?(o.propDep?r=a=!0:o.contextDep&&r&&(a=!0),a||L(t,n,o)):L(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(r=!0),I(t,n,e),j(t,n,e.state,(function(t){return!s(t)})),e.profile&&s(e.profile)||H(t,n,e,!1,"a1"),e.contextDep=r,e.needsContext=i,e.needsFramebuffer=a;var u=e.shader.progVar;if(u.contextDep&&r||u.propDep)Q(t,n,e,null);else{var c=u.append(t,n);if(n(t.shared.gl,".useProgram(",c,".program);"),e.shader.program)Q(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var f=t.global.def("{}"),l=n.def(c,".id"),h=n.def(f,"[",l,"]");n(t.cond(h).then(h,".call(this,a0,a1);").else(h,"=",f,"[",l,"]=",t.link((function(n){return W(Q,t,e,n,2)})),"(",c,");",h,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}(a,s),a.compile()}}}var fe=function(t,e){if(!e.ext_disjoint_timer_query)return null;var n=[];function r(t){n.push(t)}var i=[];function o(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var a=[];function s(t){a.push(t)}var u=[];function c(t,e,n){var r=a.pop()||new o;r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,u.push(r)}var f=[],l=[];return{beginQuery:function(t){var r=n.pop()||e.ext_disjoint_timer_query.createQueryEXT();e.ext_disjoint_timer_query.beginQueryEXT(35007,r),i.push(r),c(i.length-1,i.length,t)},endQuery:function(){e.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:c,update:function(){var t,n,o=i.length;if(0!==o){l.length=Math.max(l.length,o+1),f.length=Math.max(f.length,o+1),f[0]=0,l[0]=0;var a=0;for(t=0,n=0;n<i.length;++n){var c=i[n];e.ext_disjoint_timer_query.getQueryObjectEXT(c,34919)?(a+=e.ext_disjoint_timer_query.getQueryObjectEXT(c,34918),r(c)):i[t++]=c,f[n+1]=a,l[n+1]=t}for(i.length=t,t=0,n=0;n<u.length;++n){var h=u[n],d=h.startQueryIndex,p=h.endQueryIndex;h.sum+=f[p]-f[d];var g=l[d],v=l[p];v===g?(h.stats.gpuTime+=h.sum/1e6,s(h)):(h.startQueryIndex=g,h.endQueryIndex=v,u[t++]=h)}u.length=t}},getNumPendingQueries:function(){return i.length},clear:function(){n.push.apply(n,i);for(var t=0;t<n.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(n[t]);i.length=0,n.length=0},restore:function(){i.length=0,n.length=0}}};function le(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}return function(n){var r=P(n);if(!r)return null;var i=r.gl,o=i.getContextAttributes(),a=i.isContextLost(),s=function(t,e){var n={};function r(e){x.type(e,"string","extension name must be string");var r,i=e.toLowerCase();try{r=n[i]=t.getExtension(i)}catch(t){}return!!r}for(var i=0;i<e.extensions.length;++i){var o=e.extensions[i];if(!r(o))return e.onDestroy(),e.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(t){if(n[t]&&!r(t))throw new Error("(regl): error restoring extension "+t)}))}}}(i,r);if(!s)return null;var u,c,f=(u={"":0},c=[""],{id:function(t){var e=u[t];return e||(e=u[t]=c.length,c.push(t),e)},str:function(t){return c[t]}}),l={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},h=s.extensions,d=fe(0,h),p=T(),g=i.drawingBufferWidth,v=i.drawingBufferHeight,m={tick:0,time:0,viewportWidth:g,viewportHeight:v,framebufferWidth:g,framebufferHeight:v,drawingBufferWidth:g,drawingBufferHeight:v,pixelRatio:r.pixelRatio},y=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(34047));var r=1,i=1;e.webgl_draw_buffers&&(r=t.getParameter(34852),i=t.getParameter(36063));var o=!!e.oes_texture_float;if(o){var a=t.createTexture();t.bindTexture(3553,a),t.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var s=t.createFramebuffer();if(t.bindFramebuffer(36160,s),t.framebufferTexture2D(36160,36064,3553,a,0),t.bindTexture(3553,null),36053!==t.checkFramebufferStatus(36160))o=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(16384);var u=z.allocType(5126,4);t.readPixels(0,0,1,1,6408,5126,u),t.getError()?o=!1:(t.deleteFramebuffer(s),t.deleteTexture(a),o=1===u[0]),z.freeType(u)}}var c=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var f=t.createTexture(),l=z.allocType(5121,36);t.activeTexture(33984),t.bindTexture(34067,f),t.texImage2D(34069,0,6408,3,3,0,6408,5121,l),z.freeType(l),t.bindTexture(34067,null),t.deleteTexture(f),c=!t.getError()}return{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter((function(t){return!!e[t]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938),readFloat:o,npotTextureCube:c}}(i,h),b=function(e,n,r,i){var o=0,a={};function s(t){this.id=o++,this.buffer=e.createBuffer(),this.type=t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,r.profile&&(this.stats={size:0})}s.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){l(this)};var u=[];function c(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function f(e,n,r,i,o,a){var s,u;if(e.usage=r,Array.isArray(n)){if(e.dtype=i||5126,n.length>0)if(Array.isArray(n[0])){s=V(n);for(var f=1,l=1;l<s.length;++l)f*=s[l];e.dimension=f,c(e,u=q(n,s,e.dtype),r),a?e.persistentData=u:z.freeType(u)}else if("number"==typeof n[0]){e.dimension=o;var h=z.allocType(e.dtype,n.length);G(h,n),c(e,h,r),a?e.persistentData=h:z.freeType(h)}else t(n[0])?(e.dimension=n[0].length,e.dtype=i||W(n[0])||5126,c(e,u=q(n,[n.length,n[0].length],e.dtype),r),a?e.persistentData=u:z.freeType(u)):x.raise("invalid buffer data")}else if(t(n))e.dtype=i||W(n),e.dimension=o,c(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(R(n)){s=n.shape;var d=n.stride,p=n.offset,g=0,v=0,m=0,y=0;1===s.length?(g=s[0],v=1,m=d[0],y=0):2===s.length?(g=s[0],v=s[1],m=d[0],y=d[1]):x.raise("invalid shape"),e.dtype=i||W(n.data)||5126,e.dimension=v;var b=z.allocType(e.dtype,g*v);X(b,n.data,g,v,m,y,p),c(e,b,r),a?e.persistentData=b:z.freeType(b)}else n instanceof ArrayBuffer?(e.dtype=5121,e.dimension=o,c(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n)))):x.raise("invalid buffer data")}function l(t){n.bufferCount--,i(t);var r=t.buffer;x(r,"buffer must not be deleted already"),e.deleteBuffer(r),t.buffer=null,delete a[t.id]}return r.profile&&(n.getTotalBufferSize=function(){var t=0;return Object.keys(a).forEach((function(e){t+=a[e].stats.size})),t}),{create:function(i,o,u,c){n.bufferCount++;var h=new s(o);function d(n){var i=35044,o=null,a=0,s=0,u=1;return Array.isArray(n)||t(n)||R(n)||n instanceof ArrayBuffer?o=n:"number"==typeof n?a=0|n:n&&(x.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(x(null===o||Array.isArray(o)||t(o)||R(o),"invalid data for buffer"),o=n.data),"usage"in n&&(x.parameter(n.usage,H,"invalid buffer usage"),i=H[n.usage]),"type"in n&&(x.parameter(n.type,F,"invalid buffer type"),s=F[n.type]),"dimension"in n&&(x.type(n.dimension,"number","invalid dimension"),u=0|n.dimension),"length"in n&&(x.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),h.bind(),o?f(h,o,i,s,u,c):(a&&e.bufferData(h.type,a,i),h.dtype=s||5121,h.usage=i,h.dimension=u,h.byteLength=a),r.profile&&(h.stats.size=h.byteLength*Y[h.dtype]),d}function p(t,n){x(n+t.byteLength<=h.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+h.byteLength),e.bufferSubData(h.type,n,t)}return a[h.id]=h,u||d(i),d._reglType="buffer",d._buffer=h,d.subdata=function(e,n){var r,i=0|(n||0);if(h.bind(),t(e)||e instanceof ArrayBuffer)p(e,i);else if(Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var o=z.allocType(h.dtype,e.length);G(o,e),p(o,i),z.freeType(o)}else if(Array.isArray(e[0])||t(e[0])){r=V(e);var a=q(e,r,h.dtype);p(a,i),z.freeType(a)}else x.raise("invalid buffer data")}else if(R(e)){r=e.shape;var s=e.stride,u=0,c=0,f=0,l=0;1===r.length?(u=r[0],c=1,f=s[0],l=0):2===r.length?(u=r[0],c=r[1],f=s[0],l=s[1]):x.raise("invalid shape");var g=Array.isArray(e.data)?h.dtype:W(e.data),v=z.allocType(g,u*c);X(v,e.data,u,c,f,l,e.offset),p(v,i),z.freeType(v)}else x.raise("invalid data for buffer subdata");return d},r.profile&&(d.stats=h.stats),d.destroy=function(){l(h)},d},createStream:function(t,e){var n=u.pop();return n||(n=new s(t)),n.bind(),f(n,e,35040,0,1,!1),n},destroyStream:function(t){u.push(t)},clear:function(){L(a).forEach(l),u.forEach(l)},getBuffer:function(t){return t&&t._buffer instanceof s?t._buffer:null},restore:function(){L(a).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))},_initBuffer:f}}(i,l,r,(function(t){return _.destroyBuffer(t)})),_=function(e,n,r,i,o){for(var a=r.maxAttributes,s=new Array(a),u=0;u<a;++u)s[u]=new Nt;var c=0,f={},l={Record:Nt,scope:{},state:s,currentVAO:null,targetVAO:null,restore:h()?function(){h()&&L(f).forEach((function(t){t.refresh()}))}:function(){},createVAO:function(e){var r=new p;function s(e){x(Array.isArray(e),"arguments to vertex array constructor must be an array"),x(e.length<a,"too many attributes"),x(e.length>0,"must specify at least one attribute");for(var i=0;i<r.buffers.length;++i)r.buffers[i].destroy();r.buffers.length=0;var u=r.attributes;u.length=e.length;for(var c=0;c<e.length;++c){var f=e[c],l=u[c]=new Nt;if(Array.isArray(f)||t(f)||R(f)){var h=o.create(f,34962,!1,!0);l.buffer=o.getBuffer(h),l.size=0|l.buffer.dimension,l.normalized=!1,l.type=l.buffer.dtype,l.offset=0,l.stride=0,l.divisor=0,l.state=1,r.buffers.push(h)}else o.getBuffer(f)?(l.buffer=o.getBuffer(f),l.size=0|l.buffer.dimension,l.normalized=!1,l.type=l.buffer.dtype,l.offset=0,l.stride=0,l.divisor=0,l.state=1):o.getBuffer(f.buffer)?(l.buffer=o.getBuffer(f.buffer),l.size=0|(+f.size||l.buffer.dimension),l.normalized=!!f.normalized||!1,"type"in f?(x.parameter(f.type,F,"invalid buffer type"),l.type=F[f.type]):l.type=l.buffer.dtype,l.offset=0|(f.offset||0),l.stride=0|(f.stride||0),l.divisor=0|(f.divisor||0),l.state=1,x(l.size>=1&&l.size<=4,"size must be between 1 and 4"),x(l.offset>=0,"invalid offset"),x(l.stride>=0&&l.stride<=255,"stride must be between 0 and 255"),x(l.divisor>=0,"divisor must be positive"),x(!l.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in f?(x(c>0,"first attribute must not be a constant"),l.x=+f.x||0,l.y=+f.y||0,l.z=+f.z||0,l.w=+f.w||0,l.state=2):x(!1,"invalid attribute spec for location "+c)}return r.refresh(),s}return i.vaoCount+=1,s.destroy=function(){r.destroy()},s._vao=r,s._reglType="vao",s(e)},getVAO:function(t){return"function"==typeof t&&t._vao?t._vao:null},destroyBuffer:function(t){for(var n=0;n<s.length;++n){var r=s[n];r.buffer===t&&(e.disableVertexAttribArray(n),r.buffer=null)}},setVAO:h()?function(t){if(t!==l.currentVAO){var e=h();t?e.bindVertexArrayOES(t.vao):e.bindVertexArrayOES(null),l.currentVAO=t}}:function(t){if(t!==l.currentVAO){if(t)t.bindAttrs();else for(var n=d(),r=0;r<s.length;++r){var i=s[r];i.buffer?(e.enableVertexAttribArray(r),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offfset),n&&n.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}l.currentVAO=t}},clear:h()?function(){L(f).forEach((function(t){t.destroy()}))}:function(){}};function h(){return n.oes_vertex_array_object}function d(){return n.angle_instanced_arrays}function p(){this.id=++c,this.attributes=[];var t=h();this.vao=t?t.createVertexArrayOES():null,f[this.id]=this,this.buffers=[]}return p.prototype.bindAttrs=function(){for(var t=d(),n=this.attributes,r=0;r<n.length;++r){var i=n[r];i.buffer?(e.enableVertexAttribArray(r),e.bindBuffer(34962,i.buffer.buffer),e.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offset),t&&t.vertexAttribDivisorANGLE(r,i.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}for(var o=n.length;o<a;++o)e.disableVertexAttribArray(o)},p.prototype.refresh=function(){var t=h();t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),l.currentVAO=this)},p.prototype.destroy=function(){if(this.vao){var t=h();this===l.currentVAO&&(l.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}f[this.id]&&(delete f[this.id],i.vaoCount-=1)},l}(i,h,y,l,b),w=function(e,n,r,i){var o={},a=0,s={uint8:5121,uint16:5123};function u(t){this.id=a++,o[this.id]=this,this.buffer=t,this.primType=4,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(s.uint32=5125),u.prototype.bind=function(){this.buffer.bind()};var c=[];function f(i,o,a,s,u,c,f){var l;if(i.buffer.bind(),o){var h=f;f||t(o)&&(!R(o)||t(o.data))||(h=n.oes_element_index_uint?5125:5123),r._initBuffer(i.buffer,o,a,h,3)}else e.bufferData(34963,c,a),i.buffer.dtype=l||5121,i.buffer.usage=a,i.buffer.dimension=3,i.buffer.byteLength=c;if(l=f,!f){switch(i.buffer.dtype){case 5121:case 5120:l=5121;break;case 5123:case 5122:l=5123;break;case 5125:case 5124:l=5125;break;default:x.raise("unsupported type for element array")}i.buffer.dtype=l}i.type=l,x(5125!==l||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var d=u;d<0&&(d=i.buffer.byteLength,5123===l?d>>=1:5125===l&&(d>>=2)),i.vertCount=d;var p=s;if(s<0){p=4;var g=i.buffer.dimension;1===g&&(p=0),2===g&&(p=1),3===g&&(p=4)}i.primType=p}function l(t){i.elementsCount--,x(null!==t.buffer,"must not double destroy elements"),delete o[t.id],t.buffer.destroy(),t.buffer=null}return{create:function(e,n){var o=r.create(null,34963,!0),a=new u(o._buffer);function c(e){if(e)if("number"==typeof e)o(e),a.primType=4,a.vertCount=0|e,a.type=5121;else{var n=null,r=35044,i=-1,u=-1,l=0,h=0;Array.isArray(e)||t(e)||R(e)?n=e:(x.type(e,"object","invalid arguments for elements"),"data"in e&&(n=e.data,x(Array.isArray(n)||t(n)||R(n),"invalid data for element buffer")),"usage"in e&&(x.parameter(e.usage,H,"invalid element buffer usage"),r=H[e.usage]),"primitive"in e&&(x.parameter(e.primitive,K,"invalid element buffer primitive"),i=K[e.primitive]),"count"in e&&(x("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),u=0|e.count),"type"in e&&(x.parameter(e.type,s,"invalid buffer type"),h=s[e.type]),"length"in e?l=0|e.length:(l=u,5123===h||5122===h?l*=2:5125!==h&&5124!==h||(l*=4))),f(a,n,r,i,u,l,h)}else o(),a.primType=4,a.vertCount=0,a.type=5121;return c}return i.elementsCount++,c(e),c._reglType="elements",c._elements=a,c.subdata=function(t,e){return o.subdata(t,e),c},c.destroy=function(){l(a)},c},createStream:function(t){var e=c.pop();return e||(e=new u(r.create(null,34963,!0,!1)._buffer)),f(e,t,35040,-1,-1,0,0),e},destroyStream:function(t){c.push(t)},getElements:function(t){return"function"==typeof t&&t._elements instanceof u?t._elements:null},clear:function(){L(o).forEach(l)}}}(i,h,b,l),M=function(t,e,n,r){var i={},o={};function a(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function s(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function u(n,r,a){var s=35632===n?i:o,u=s[r];if(!u){var c=e.str(r);u=t.createShader(n),t.shaderSource(u,c),t.compileShader(u),x.shaderError(t,u,c,n,a),s[r]=u}return u}var c={},f=[],l=0;function h(t,e){this.id=l++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function d(n,i,o){var c,f,l=u(35632,n.fragId),h=u(35633,n.vertId),d=n.program=t.createProgram();if(t.attachShader(d,l),t.attachShader(d,h),o)for(c=0;c<o.length;++c){var p=o[c];t.bindAttribLocation(d,p[0],p[1])}t.linkProgram(d),x.linkError(t,d,e.str(n.fragId),e.str(n.vertId),i);var g=t.getProgramParameter(d,35718);r.profile&&(n.stats.uniformsCount=g);var v=n.uniforms;for(c=0;c<g;++c)if(f=t.getActiveUniform(d,c))if(f.size>1)for(var m=0;m<f.size;++m){var y=f.name.replace("[0]","["+m+"]");s(v,new a(y,e.id(y),t.getUniformLocation(d,y),f))}else s(v,new a(f.name,e.id(f.name),t.getUniformLocation(d,f.name),f));var b=t.getProgramParameter(d,35721);r.profile&&(n.stats.attributesCount=b);var _=n.attributes;for(c=0;c<b;++c)(f=t.getActiveAttrib(d,c))&&s(_,new a(f.name,e.id(f.name),t.getAttribLocation(d,f.name),f))}return r.profile&&(n.getMaxUniformsCount=function(){var t=0;return f.forEach((function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)})),t},n.getMaxAttributesCount=function(){var t=0;return f.forEach((function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)})),t}),{clear:function(){var e=t.deleteShader.bind(t);L(i).forEach(e),i={},L(o).forEach(e),o={},f.forEach((function(e){t.deleteProgram(e.program)})),f.length=0,c={},n.shaderCount=0},program:function(t,e,r,i){x.command(t>=0,"missing vertex shader",r),x.command(e>=0,"missing fragment shader",r);var o=c[e];o||(o=c[e]={});var a=o[t];if(a&&!i)return a;var s=new h(e,t);return n.shaderCount++,d(s,r,i),a||(o[t]=s),f.push(s),s},restore:function(){i={},o={};for(var t=0;t<f.length;++t)d(f[t],null,f[t].attributes.map((function(t){return[t.location,t.name]})))},shader:u,frag:-1,vert:-1}}(i,f,l,r),k=kt(i,h,y,(function(){O.procs.poll()}),m,l,r),A=function(t,e,n,r,i){var o={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(o.srgba=35907),e.ext_color_buffer_half_float&&(o.rgba16f=34842,o.rgb16f=34843),e.webgl_color_buffer_float&&(o.rgba32f=34836);var a=[];Object.keys(o).forEach((function(t){var e=o[t];a[e]=t}));var s=0,u={};function c(t){this.id=s++,this.refCount=1,this.renderbuffer=t,this.format=32854,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function f(e){var n=e.renderbuffer;x(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(36161,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete u[e.id],r.renderbufferCount--}return c.prototype.decRef=function(){--this.refCount<=0&&f(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(u).forEach((function(e){t+=u[e].stats.size})),t}),{create:function(e,s){var f=new c(t.createRenderbuffer());function l(e,r){var s=0,u=0,c=32854;if("object"==typeof e&&e){var h=e;if("shape"in h){var d=h.shape;x(Array.isArray(d)&&d.length>=2,"invalid renderbuffer shape"),s=0|d[0],u=0|d[1]}else"radius"in h&&(s=u=0|h.radius),"width"in h&&(s=0|h.width),"height"in h&&(u=0|h.height);"format"in h&&(x.parameter(h.format,o,"invalid renderbuffer format"),c=o[h.format])}else"number"==typeof e?(s=0|e,u="number"==typeof r?0|r:s):e?x.raise("invalid arguments to renderbuffer constructor"):s=u=1;if(x(s>0&&u>0&&s<=n.maxRenderbufferSize&&u<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==f.width||u!==f.height||c!==f.format)return l.width=f.width=s,l.height=f.height=u,f.format=c,t.bindRenderbuffer(36161,f.renderbuffer),t.renderbufferStorage(36161,c,s,u),x(0===t.getError(),"invalid render buffer format"),i.profile&&(f.stats.size=St(f.format,f.width,f.height)),l.format=a[f.format],l}return u[f.id]=f,r.renderbufferCount++,l(e,s),l.resize=function(e,r){var o=0|e,a=0|r||o;return o===f.width&&a===f.height||(x(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),l.width=f.width=o,l.height=f.height=a,t.bindRenderbuffer(36161,f.renderbuffer),t.renderbufferStorage(36161,f.format,o,a),x(0===t.getError(),"invalid render buffer format"),i.profile&&(f.stats.size=St(f.format,f.width,f.height))),l},l._reglType="renderbuffer",l._renderbuffer=f,i.profile&&(l.stats=f.stats),l.destroy=function(){f.decRef()},l},clear:function(){L(u).forEach(f)},restore:function(){L(u).forEach((function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,e.renderbuffer),t.renderbufferStorage(36161,e.format,e.width,e.height)})),t.bindRenderbuffer(36161,null)}}}(i,h,y,l,r),C=function(t,n,r,i,o,a){var s={cur:null,next:null,dirty:!1,setFBO:null},u=["rgba"],c=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&c.push("srgba"),n.ext_color_buffer_half_float&&c.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&c.push("rgba32f");var f=["uint8"];function l(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=0,i=0;e?(r=e.width,i=e.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function h(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function d(t,e,n){if(t)if(t.texture){var r=t.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height);x(i===e&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=t.renderbuffer._renderbuffer;x(a.width===e&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function p(e,n){n&&(n.texture?t.framebufferTexture2D(36160,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(36160,e,36161,n.renderbuffer._renderbuffer.renderbuffer))}function g(t){var e=3553,n=null,r=null,i=t;"object"==typeof t&&(i=t.data,"target"in t&&(e=0|t.target)),x.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(n=i,x(3553===e)):"textureCube"===o?(n=i,x(e>=34069&&e<34075,"invalid cube map target")):"renderbuffer"===o?(r=i,e=36161):x.raise("invalid regl object for attachment"),new l(e,n,r)}function v(t,e,n,r,a){if(n){var s=i.create2D({width:t,height:e,format:r,type:a});return s._texture.refCount=0,new l(3553,s,null)}var u=o.create({width:t,height:e,format:r});return u._renderbuffer.refCount=0,new l(36161,null,u)}function m(t){return t&&(t.texture||t.renderbuffer)}function y(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}n.oes_texture_half_float&&f.push("half float","float16"),n.oes_texture_float&&f.push("float","float32");var b=0,_={};function w(){this.id=b++,_[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function M(t){t.colorAttachments.forEach(h),h(t.depthAttachment),h(t.stencilAttachment),h(t.depthStencilAttachment)}function k(e){var n=e.framebuffer;x(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,a.framebufferCount--,delete _[e.id]}function A(e){var n;t.bindFramebuffer(36160,e.framebuffer);var i=e.colorAttachments;for(n=0;n<i.length;++n)p(36064+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(36160,36064+n,3553,null,0);t.framebufferTexture2D(36160,33306,3553,null,0),t.framebufferTexture2D(36160,36096,3553,null,0),t.framebufferTexture2D(36160,36128,3553,null,0),p(36096,e.depthAttachment),p(36128,e.stencilAttachment),p(33306,e.depthStencilAttachment);var o=t.checkFramebufferStatus(36160);t.isContextLost()||36053===o||x.raise("framebuffer configuration not supported, status = "+Pt[o]),t.bindFramebuffer(36160,s.next?s.next.framebuffer:null),s.cur=s.next,t.getError()}function S(t,i){var o=new w;function l(t,e){var i;x(s.next!==o,"can not update framebuffer which is currently in use");var a=0,h=0,p=!0,y=!0,b=null,_=!0,w="rgba",k="uint8",S=1,E=null,T=null,C=null,O=!1;if("number"==typeof t)a=0|t,h=0|e||a;else if(t){x.type(t,"object","invalid arguments for framebuffer");var P=t;if("shape"in P){var N=P.shape;x(Array.isArray(N)&&N.length>=2,"invalid shape for framebuffer"),a=N[0],h=N[1]}else"radius"in P&&(a=h=P.radius),"width"in P&&(a=P.width),"height"in P&&(h=P.height);("color"in P||"colors"in P)&&(b=P.color||P.colors,Array.isArray(b)&&x(1===b.length||n.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in P&&(S=0|P.colorCount,x(S>0,"invalid color buffer count")),"colorTexture"in P&&(_=!!P.colorTexture,w="rgba4"),"colorType"in P&&(k=P.colorType,_?(x(n.oes_texture_float||!("float"===k||"float32"===k),"you must enable OES_texture_float in order to use floating point framebuffer objects"),x(n.oes_texture_half_float||!("half float"===k||"float16"===k),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===k||"float16"===k?(x(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),w="rgba16f"):"float"!==k&&"float32"!==k||(x(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),w="rgba32f"),x.oneOf(k,f,"invalid color type")),"colorFormat"in P&&(w=P.colorFormat,u.indexOf(w)>=0?_=!0:c.indexOf(w)>=0?_=!1:_?x.oneOf(P.colorFormat,u,"invalid color format for texture"):x.oneOf(P.colorFormat,c,"invalid color format for renderbuffer"))),("depthTexture"in P||"depthStencilTexture"in P)&&(O=!(!P.depthTexture&&!P.depthStencilTexture),x(!O||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in P&&("boolean"==typeof P.depth?p=P.depth:(E=P.depth,y=!1)),"stencil"in P&&("boolean"==typeof P.stencil?y=P.stencil:(T=P.stencil,p=!1)),"depthStencil"in P&&("boolean"==typeof P.depthStencil?p=y=P.depthStencil:(C=P.depthStencil,p=!1,y=!1))}else a=h=1;var B=null,D=null,z=null,R=null;if(Array.isArray(b))B=b.map(g);else if(b)B=[g(b)];else for(B=new Array(S),i=0;i<S;++i)B[i]=v(a,h,_,w,k);x(n.webgl_draw_buffers||B.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),x(B.length<=r.maxColorAttachments,"too many color attachments, not supported"),a=a||B[0].width,h=h||B[0].height,E?D=g(E):p&&!y&&(D=v(a,h,O,"depth","uint32")),T?z=g(T):y&&!p&&(z=v(a,h,!1,"stencil","uint8")),C?R=g(C):!E&&!T&&y&&p&&(R=v(a,h,O,"depth stencil","depth stencil")),x(!!E+!!T+!!C<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var L=null;for(i=0;i<B.length;++i)if(d(B[i],a,h),x(!B[i]||B[i].texture&&Et.indexOf(B[i].texture._texture.format)>=0||B[i].renderbuffer&&Ot.indexOf(B[i].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+i+" is invalid"),B[i]&&B[i].texture){var I=Tt[B[i].texture._texture.format]*Ct[B[i].texture._texture.type];null===L?L=I:x(L===I,"all color attachments much have the same number of bits per pixel.")}return d(D,a,h),x(!D||D.texture&&6402===D.texture._texture.format||D.renderbuffer&&33189===D.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object"),d(z,a,h),x(!z||z.renderbuffer&&36168===z.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object"),d(R,a,h),x(!R||R.texture&&34041===R.texture._texture.format||R.renderbuffer&&34041===R.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object"),M(o),o.width=a,o.height=h,o.colorAttachments=B,o.depthAttachment=D,o.stencilAttachment=z,o.depthStencilAttachment=R,l.color=B.map(m),l.depth=m(D),l.stencil=m(z),l.depthStencil=m(R),l.width=o.width,l.height=o.height,A(o),l}return a.framebufferCount++,l(t,i),e(l,{resize:function(t,e){x(s.next!==o,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),r=Math.max(0|e||n,1);if(n===o.width&&r===o.height)return l;for(var i=o.colorAttachments,a=0;a<i.length;++a)y(i[a],n,r);return y(o.depthAttachment,n,r),y(o.stencilAttachment,n,r),y(o.depthStencilAttachment,n,r),o.width=l.width=n,o.height=l.height=r,A(o),l},_reglType:"framebuffer",_framebuffer:o,destroy:function(){k(o),M(o)},use:function(t){s.setFBO({framebuffer:l},t)}})}return e(s,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof w)return e}return null},create:S,createCube:function(t){var o=Array(6);function a(t){var r;x(o.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var c,l={color:null},h=0,d=null,p="rgba",g="uint8",v=1;if("number"==typeof t)h=0|t;else if(t){x.type(t,"object","invalid arguments for framebuffer");var m=t;if("shape"in m){var y=m.shape;x(Array.isArray(y)&&y.length>=2,"invalid shape for framebuffer"),x(y[0]===y[1],"cube framebuffer must be square"),h=y[0]}else"radius"in m&&(h=0|m.radius),"width"in m?(h=0|m.width,"height"in m&&x(m.height===h,"must be square")):"height"in m&&(h=0|m.height);("color"in m||"colors"in m)&&(d=m.color||m.colors,Array.isArray(d)&&x(1===d.length||n.webgl_draw_buffers,"multiple render targets not supported")),d||("colorCount"in m&&(v=0|m.colorCount,x(v>0,"invalid color buffer count")),"colorType"in m&&(x.oneOf(m.colorType,f,"invalid color type"),g=m.colorType),"colorFormat"in m&&(p=m.colorFormat,x.oneOf(m.colorFormat,u,"invalid color format for texture"))),"depth"in m&&(l.depth=m.depth),"stencil"in m&&(l.stencil=m.stencil),"depthStencil"in m&&(l.depthStencil=m.depthStencil)}else h=1;if(d)if(Array.isArray(d))for(c=[],r=0;r<d.length;++r)c[r]=d[r];else c=[d];else{c=Array(v);var b={radius:h,format:p,type:g};for(r=0;r<v;++r)c[r]=i.createCube(b)}for(l.color=Array(c.length),r=0;r<c.length;++r){var _=c[r];x("function"==typeof _&&"textureCube"===_._reglType,"invalid cube map"),h=h||_.width,x(_.width===h&&_.height===h,"invalid cube map shape"),l.color[r]={target:34069,data:c[r]}}for(r=0;r<6;++r){for(var w=0;w<c.length;++w)l.color[w].target=34069+r;r>0&&(l.depth=o[0].depth,l.stencil=o[0].stencil,l.depthStencil=o[0].depthStencil),o[r]?o[r](l):o[r]=S(l)}return e(a,{width:h,height:h,color:c})}return a(t),e(a,{faces:o,resize:function(t){var e,n=0|t;if(x(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var i=a.color;for(e=0;e<i.length;++e)i[e].resize(n);for(e=0;e<6;++e)o[e].resize(n);return a.width=a.height=n,a},_reglType:"framebufferCube",destroy:function(){o.forEach((function(t){t.destroy()}))}})},clear:function(){L(_).forEach(k)},restore:function(){s.cur=null,s.next=null,s.dirty=!0,L(_).forEach((function(e){e.framebuffer=t.createFramebuffer(),A(e)}))}})}(i,h,y,k,A,l),O=ce(i,f,h,y,b,w,0,C,{},_,M,{elements:null,primitive:4,count:-1,offset:0,instances:-1},m,d,r),N=Bt(i,C,O.procs.poll,m,o,h,y),B=O.next,D=i.canvas,I=[],j=[],U=[],Q=[r.onDestroy],$=null;function Z(){if(0===I.length)return d&&d.update(),void($=null);$=E.next(Z),ut();for(var t=I.length-1;t>=0;--t){var e=I[t];e&&e(m,null,0)}i.flush(),d&&d.update()}function J(){!$&&I.length>0&&($=E.next(Z))}function tt(){$&&(E.cancel(Z),$=null)}function et(t){t.preventDefault(),a=!0,tt(),j.forEach((function(t){t()}))}function nt(t){i.getError(),a=!1,s.restore(),M.restore(),b.restore(),k.restore(),A.restore(),C.restore(),_.restore(),d&&d.restore(),O.procs.refresh(),J(),U.forEach((function(t){t()}))}function rt(t){function n(t){var e={},n={};return Object.keys(t).forEach((function(r){var i=t[r];S.isDynamic(i)?n[r]=S.unbox(i,r):e[r]=i})),{dynamic:n,static:e}}x(!!t,"invalid args to regl({...})"),x.type(t,"object","invalid args to regl({...})");var r=n(t.context||{}),i=n(t.uniforms||{}),o=n(t.attributes||{}),s=n(function(t){var n=e({},t);function r(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach((function(r){n[t+"."+r]=e[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in t&&(n.vao=t.vao),n}(t)),u={gpuTime:0,cpuTime:0,count:0},c=O.compile(s,o,i,r,u),f=c.draw,l=c.batch,h=c.scope,d=[];return e((function(t,e){var n;if(a&&x.raise("context lost"),"function"==typeof t)return h.call(this,null,t,0);if("function"==typeof e)if("number"==typeof t)for(n=0;n<t;++n)h.call(this,null,e,n);else{if(!Array.isArray(t))return h.call(this,t,e,0);for(n=0;n<t.length;++n)h.call(this,t[n],e,n)}else if("number"==typeof t){if(t>0)return l.call(this,function(t){for(;d.length<t;)d.push(null);return d}(0|t),0|t)}else{if(!Array.isArray(t))return f.call(this,t);if(t.length)return l.call(this,t,t.length)}}),{stats:u})}D&&(D.addEventListener("webglcontextlost",et,!1),D.addEventListener("webglcontextrestored",nt,!1));var it=C.setFBO=rt({framebuffer:S.define.call(null,1,"framebuffer")});function ot(t,e){var n=0;O.procs.poll();var r=e.color;r&&(i.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=16384),"depth"in e&&(i.clearDepth(+e.depth),n|=256),"stencil"in e&&(i.clearStencil(0|e.stencil),n|=1024),x(!!n,"called regl.clear with no buffer specified"),i.clear(n)}function at(t){return x.type(t,"function","regl.frame() callback must be a function"),I.push(t),J(),{cancel:function(){var e=le(I,t);x(e>=0,"cannot cancel a frame twice"),I[e]=function t(){var e=le(I,t);I[e]=I[I.length-1],I.length-=1,I.length<=0&&tt()}}}}function st(){var t=B.viewport,e=B.scissor_box;t[0]=t[1]=e[0]=e[1]=0,m.viewportWidth=m.framebufferWidth=m.drawingBufferWidth=t[2]=e[2]=i.drawingBufferWidth,m.viewportHeight=m.framebufferHeight=m.drawingBufferHeight=t[3]=e[3]=i.drawingBufferHeight}function ut(){m.tick+=1,m.time=ft(),st(),O.procs.poll()}function ct(){st(),O.procs.refresh(),d&&d.update()}function ft(){return(T()-p)/1e3}ct();var lt=e(rt,{clear:function(t){if(x("object"==typeof t&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var n=0;n<6;++n)it(e({framebuffer:t.framebuffer.faces[n]},t),ot);else it(t,ot);else ot(0,t)},prop:S.define.bind(null,1),context:S.define.bind(null,2),this:S.define.bind(null,3),draw:rt({}),buffer:function(t){return b.create(t,34962,!1,!1)},elements:function(t){return w.create(t,!1)},texture:k.create2D,cube:k.createCube,renderbuffer:A.create,framebuffer:C.create,framebufferCube:C.createCube,vao:_.createVAO,attributes:o,frame:at,on:function(t,e){var n;switch(x.type(e,"function","listener callback must be a function"),t){case"frame":return at(e);case"lost":n=j;break;case"restore":n=U;break;case"destroy":n=Q;break;default:x.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}},limits:y,hasExtension:function(t){return y.extensions.indexOf(t.toLowerCase())>=0},read:N,destroy:function(){I.length=0,tt(),D&&(D.removeEventListener("webglcontextlost",et),D.removeEventListener("webglcontextrestored",nt)),M.clear(),C.clear(),A.clear(),k.clear(),w.clear(),b.clear(),_.clear(),d&&d.clear(),Q.forEach((function(t){t()}))},_gl:i,_refresh:ct,poll:function(){ut(),d&&d.update()},now:ft,stats:l});return r.onDone(null,lt),lt}}()},,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);var r=n(5),i=n(84),o=n(13),a=n(6),s=n(82),u=n(2),c=n(7);Object(c.setupNav)(),Object(c.setupVersion)();var f=function(){null!==m.vis&&(m.vis.destroy(),m.vis=null)},l=new c.StateManager((function(){if("selection"!==l.urlState.view&&"nUuid"in l.urlState)if("export"===l.urlState.view)f(),g();else if(null!==m.vis&&l.urlState.view===m.vis.visType)m.vis.updateView();else{f(),v();var t=void 0;if(l.urlState.nUuid in m.networks)t=Promise.resolve();else{var e=m.scrapes[m.scrapeKeys[l.urlState.nUuid]];t=r.get("s--"+e.service+"--a--"+e.screenName+"-"+e.nUuid+"--nw").then((function(t){return m.networks[l.urlState.nUuid]=t,Promise.resolve()}))}t.then((function(){switch(l.urlState.view){case"list":m.vis=new s.ListVis(l);break;case"network":m.vis=new s.NetworkVis(l);break;case"overview":m.vis=new s.OverviewVis(l);break;case"cluster":m.vis=new s.ClusterVis(l)}Object(u.select)("#visContainer").attr("class",l.urlState.view),m.vis.build(m.networks[l.urlState.nUuid],m.scrapes[m.scrapeKeys[l.urlState.nUuid]]),Object(u.selectAll)("#spinnerOverlay").remove()}))}else f(),h();p()})),h=function(){Object(u.selectAll)("#page *").remove();var t=Object(u.select)("#page").append("div").attr("id","scrape-container");if(t.append("h1").html(""+browser.i18n.getMessage("selectionTitle")),t.append("p").classed("intro",!0).html(browser.i18n.getMessage("selectionIntro",['<img src="../assets/images/navbar--icon-vis-goto-overview-inline.png"       srcset="../assets/images/navbar--icon-vis-goto-overview-inline.png 1x,       ../assets/images/navbar--icon-vis-goto-overview-inline@2x.png 2x">','<img src="../assets/images/navbar--icon-vis-goto-network-inline.png"       srcset="../assets/images/navbar--icon-vis-goto-network-inline.png 1x,       ../assets/images/navbar--icon-vis-goto-network-inline@2x.png 2x">','<img src="../assets/images/navbar--icon-vis-goto-cluster-inline.png"       srcset="../assets/images/navbar--icon-vis-goto-cluster-inline.png 1x,       ../assets/images/navbar--icon-vis-goto-cluster-inline@2x.png 2x">','<img src="../assets/images/navbar--icon-vis-goto-list-inline.png"       srcset="../assets/images/navbar--icon-vis-goto-list-inline.png 1x,       ../assets/images/navbar--icon-vis-goto-list-inline@2x.png 2x">','<img src="../assets/images/navbar--icon-vis-download-inline.png"       srcset="../assets/images/navbar--icon-vis-download-inline.png 1x,       ../assets/images/navbar--icon-vis-download-inline@2x.png 2x">','<img src="../assets/images/navbar--icon-vis-delete-inline.png"       srcset="../assets/images/navbar--icon-vis-delete-inline.png 1x,       ../assets/images/navbar--icon-vis-delete-inline@2x.png 2x">'])),m.scrapes.length<1)t.append("div").attr("id","nodatayet").append("p").html(browser.i18n.getMessage("noDataYet"));else{var e=t.append("ul"),n="";m.scrapes.forEach((function(t){var i=!1;("complete"!==t.state&&void 0===t.completed||"complete"!==t.state&&!t.completed)&&(i=!0),t.service!==n&&(e.append("li").classed("scrapeTitle",!0).text(t.service),n=t.service);var o=e.append("li").classed("scrapeItem",!0).classed("incomplete",i).on("click",(function(){l.urlState.nUuid=t.nUuid,l.urlState.view="overview",l.update()}));o.append("span").classed("scrapeImage",!0).append("img").on("error",(function(t,e,n){Object(u.select)(n[e]).attr("src","https://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png")})).attr("src",m.userImages[t.screenName]),o.append("span").text(t.screenName).classed("scrapeName",!0),o.append("a").datum(t).classed("scrapeDelete",!0).html('<img src="../assets/images/navbar--icon-vis-delete.png"     srcset="../assets/images/navbar--icon-vis-delete.png 1x,     ../assets/images/navbar--icon-vis-delete@2x.png 2x" >').on("click",(function(t){u.event.stopPropagation(),!0===confirm(browser.i18n.getMessage("confirmDelete"))&&(o.style("opacity",.5).style("pointer-events","none"),browser.runtime.sendMessage({centralNode:t.screenName,id:t.nUuid,service:t.service,type:"removeFromQueue"}).then((function(){return Promise.all([r.remove("s--"+t.service+"--a--"+t.screenName+"-"+t.nUuid+"--c"),r.remove("s--"+t.service+"--a--"+t.screenName+"-"+t.nUuid+"--n"),r.remove("s--"+t.service+"--a--"+t.screenName+"-"+t.nUuid+"--nw")])})).then((function(){return r.get("s--"+t.service+"--nw--"+t.screenName)})).then((function(e){return delete e[t.nUuid],r.set("s--"+t.service+"--nw--"+t.screenName,e)})).then((function(){y()})))})),i||(o.append("a").classed("scrapeExport",!0).html('<img src="../assets/images/navbar--icon-vis-download.png"       srcset="../assets/images/navbar--icon-vis-download.png 1x,       ../assets/images/navbar--icon-vis-download@2x.png 2x" >').on("click",(function(){u.event.stopPropagation(),l.urlState.nUuid=t.nUuid,l.urlState.view="export",l.update()})),o.append("span").attr("class","scrapeDivider").append("span"),o.append("a").classed("scrapeVisList",!0).html('<img src="../assets/images/navbar--icon-vis-goto-list.png"       srcset="../assets/images/navbar--icon-vis-goto-list.png 1x,       ../assets/images/navbar--icon-vis-goto-list@2x.png 2x" >').on("click",(function(){u.event.stopPropagation(),l.urlState.nUuid=t.nUuid,l.urlState.view="list",l.update()})),o.append("a").classed("scrapeVisCluster",!0).classed("notRecommended",t.nodeCount>=1e3).html('<img src="../assets/images/navbar--icon-vis-goto-cluster.png"       srcset="../assets/images/navbar--icon-vis-goto-cluster.png 1x,       ../assets/images/navbar--icon-vis-goto-cluster@2x.png 2x" >').on("click",(function(){u.event.stopPropagation(),l.urlState.nUuid=t.nUuid,l.urlState.view="cluster",l.update()})),o.append("a").classed("scrapeVisNetwork",!0).classed("notRecommended",t.nodeCount>=1e3).html('<img src="../assets/images/navbar--icon-vis-goto-network.png"       srcset="../assets/images/navbar--icon-vis-goto-network.png 1x,       ../assets/images/navbar--icon-vis-goto-network@2x.png 2x" >').on("click",(function(){u.event.stopPropagation(),l.urlState.nUuid=t.nUuid,l.urlState.view="network",l.update()})),o.append("a").classed("scrapeVisOverview",!0).classed("notRecommended",t.nodeCount>=1e3).html('<img src="../assets/images/navbar--icon-vis-goto-overview.png"       srcset="../assets/images/navbar--icon-vis-goto-overview.png 1x,       ../assets/images/navbar--icon-vis-goto-overview@2x.png 2x" >').on("click",(function(){u.event.stopPropagation(),l.urlState.nUuid=t.nUuid,l.urlState.view="overview",l.update()})),o.append("span").attr("class","scrapeDivider").append("span"));var s=o.append("span").classed("scrapeMeta",!0);i&&s.append("span").text(browser.i18n.getMessage("selectionInProgress")).classed("scrapeState",!0);var c=new Date(t.date);s.append("span").html("&nbsp;"+Object(a.formatDate)(c,!0)).classed("scrapeDate",!0),s.append("br"),s.append("span").text(t.nodeCount+" Nodes").classed("scrapeCount",!0),o.append("hr")}))}t.append("p").classed("outro",!0).html(browser.i18n.getMessage("selectionOutro"))},d=function(){Object(u.select)("#page").append("a").attr("id","backButton").html("&larr;&nbsp;"+browser.i18n.getMessage("backToOverview")).attr("href","vis.html")},p=function(){var t=Object(u.select)("#backButton");t.empty()||("subView"in l.urlState&&"level0"!==l.urlState.subView?t.on("click",(function(){window.history.back()})).html("&larr;&nbsp;"+browser.i18n.getMessage("back")).attr("href",null):t.on("click",null).html("&larr;&nbsp;"+browser.i18n.getMessage("backToOverview")).attr("href","vis.html"))},g=function(){var t=m.scrapes[m.scrapeKeys[l.urlState.nUuid]];Object(u.selectAll)("#page *").remove(),d();var e=Object(u.select)("#page").append("div").attr("id","exportContainer");e.append("h1").html("<span>"+t.service+"</span>: "+t.screenName+" ("+Object(a.formatDate)(new Date(t.date),!0)+")"),e.append("p").classed("intro",!0).html(browser.i18n.getMessage("exportMessage")+":");var n=e.append("ul").selectAll("li").data(i.exportFormats.sort((function(t,e){return t.label>e.label?1:t.label<e.label?-1:0}))).enter().append("li").classed("scrapeItem",!0).on("click",(function(e){Object(i.exportNetwork)(t.service,t.screenName,t.nUuid,e.id)}));n.append("span").classed("scrapeImage",!0).append("img").attr("src",(function(t){return"../assets/images/navbar--icon-vis-file-"+t.icon+"@2x.png"})),n.append("span").text((function(t){return t.label})).style("float","none").classed("scrapeName",!0),n.append("br"),n.append("span").text((function(t){return t.description})).classed("scrapeSub",!0),n.append("hr")},v=function(){Object(u.selectAll)("#page *").remove();Object(u.select)("#page").append("div").attr("id","visContainer");Object(u.select)("#page").append("div").attr("id","spinnerOverlay").append("img").attr("src","../assets/images/logo-animation.gif");Object(u.select)("#page").append("div").attr("id","visNav").html('<ul>\n    <li class="'+("overview"===l.urlState.view?"active":"")+'">\n      <a href="vis.html?view=overview&nUuid='+l.urlState.nUuid+'">\n        <span class="icon">\n        <img src="../assets/images/navbar--icon-vis-overview.png"         srcset="../assets/images/navbar--icon-vis-overview.png 1x,         ../assets/images/navbar--icon-vis-overview@2x.png 2x" >\n        </span>\n        <span>'+browser.i18n.getMessage("visMenuOverview")+'</span>\n      </a>\n    </li>\n    <li class="'+("network"===l.urlState.view?"active":"")+'">\n      <a href="vis.html?view=network&nUuid='+l.urlState.nUuid+'">\n        <span class="icon">\n        <img src="../assets/images/navbar--icon-vis-network.png"         srcset="../assets/images/navbar--icon-vis-network.png 1x,         ../assets/images/navbar--icon-vis-network@2x.png 2x" >\n        </span>\n        <span>'+browser.i18n.getMessage("visMenuNetwork")+'</span>\n      </a>\n    </li>\n    <li class="'+("cluster"===l.urlState.view?"active":"")+'">\n      <a href="vis.html?view=cluster&nUuid='+l.urlState.nUuid+'">\n        <span class="icon">\n        <img src="../assets/images/navbar--icon-vis-cluster.png"         srcset="../assets/images/navbar--icon-vis-cluster.png 1x,         ../assets/images/navbar--icon-vis-cluster@2x.png 2x" >\n        </span>\n        <span>'+browser.i18n.getMessage("visMenuCluster")+'</span>\n      </a>\n    </li>\n    <li class="'+("list"===l.urlState.view?"active":"")+'">\n      <a href="vis.html?view=list&nUuid='+l.urlState.nUuid+'">\n        <span class="icon">\n        <img src="../assets/images/navbar--icon-vis-list.png"         srcset="../assets/images/navbar--icon-vis-list.png 1x,         ../assets/images/navbar--icon-vis-list@2x.png 2x" >\n        </span>\n        <span>'+browser.i18n.getMessage("visMenuList")+"</span>\n      </a>\n    </li>\n    </ul>"),Object(u.select)("#page").append("div").attr("id","visHelp").html('<span><span class="icon">\n    <img src="../assets/images/navbar--icon-chatbot.png"     srcset="../assets/images/navbar--icon-chatbot.png 1x,     ../assets/images/navbar--icon-chatbot@2x.png 2x" >\n    </span>\n    <span>'+browser.i18n.getMessage("navHelp")+"</span></span>");d()},m={networks:{},scrapeKeys:{},scrapes:[],userImages:{},vis:null},y=function(){"selection"===l.urlState.view&&b().then((function(){h()}))},b=function(){return Object(o.getScrapes)().then((function(t){return Promise.all(t.map((function(t){return r.get("s--"+t.service+"--a--"+t.screenName+"-"+t.nUuid+"--c",{})}))).then((function(e){return m.userImages={},e.forEach((function(t){m.userImages[t.handle]=t.image})),t.sort((function(t,e){return t.service===e.service?t.screenName<e.screenName?1:t.screenName>e.screenName||t.date<e.date?-1:t.date>e.date?1:0:t.service<e.service?-1:t.service>e.service?1:void 0})),m.scrapes=t,m.scrapes.forEach((function(t,e){m.scrapeKeys[t.nUuid]=e,t.image=m.userImages[t.screenName]})),Promise.resolve()}))}))};b().then((function(){l.retrieveUrl(),setInterval(y,15e3)}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.throttle=function(t){return new Promise((function(e){setTimeout(e,t)}))};e.uuid=function(){return"xxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))};e.formatDate=function(t,e){void 0===e&&(e=!1);return r(t.getFullYear())+"/"+r(t.getMonth()+1)+"/"+r(t.getDate())+(e?" "+r(t.getHours())+":"+r(t.getMinutes()):"")};var r=function(t){return t<10?"0"+t:""+t},i=function(t){return t===Math.floor(t)?t:parseFloat(t.toFixed(1))===parseFloat(t.toFixed(2))?t.toFixed(1):t.toFixed(2)};e.formatDuration=function(t){return(t/=1e3)<60?Math.floor(t)+" "+browser.i18n.getMessage("secondsShort"):(t/=60)<60?i(t)+" "+browser.i18n.getMessage("minutesShort"):(t/=60)<24?i(t)+" "+browser.i18n.getMessage("hoursShort"):i(t/=24)+" "+browser.i18n.getMessage("daysShort")};e.objEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};e.downloadFile=function(t,e,n){var r=new Blob([t],{type:e});return browser.downloads.download({filename:n,saveAs:!0,url:URL.createObjectURL(r)}).then((function(t){return Promise.resolve()})).catch((function(t){throw new Error("Download failed. "+JSON.stringify(t))}))};e.debounce=function(t,e,n){void 0===e&&(e=200),void 0===n&&(n=!1);var r=null,i=!1;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=n&&null===r,u=function(){return t.apply(null,o)};null===r?r=setTimeout((function(){r=null,i&&(u(),i=!1)}),e):i=!0,s&&u()}}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ClusterVis=void 0;var o=n(2),a=function(t){function e(e){var n=t.call(this,e)||this;return n.visType="cluster",n.imageSize=48,n.showEdges=!1,n.showProxies=!1,n.showUserEdges=!1,n.level=0,n.graph={links:[],nodeMap:{},nodes:[],proxieLinks:[],userLinks:[],userProxyLinks:[]},n.simulation=null,n.helpData=[browser.i18n.getMessage("helpCluster_1"),browser.i18n.getMessage("helpCluster_2"),browser.i18n.getMessage("helpCluster_3"),browser.i18n.getMessage("helpCluster_4")],n.asyncGetIxState(),n}return i(e,t),e.prototype.zoom=function(t){this.container.selectAll("#tooltip").remove(),t.canvasTransform=o.event.transform,this.paint()},e.prototype.hitTest=function(t,e){for(var n=0,r=this.graph.nodes;n<r.length;n++){var i=r[n];if(Math.sqrt(Math.pow(t-(i.x*this.canvasTransform.k+this.canvasTransform.x),2)+Math.pow(e-(i.y*this.canvasTransform.k+this.canvasTransform.y),2))<=i.r*this.canvasTransform.k)return i}return!1},e.prototype.updateView=function(){"subView"in this.stateManager.urlState?"level0"===this.stateManager.urlState.subView?this.buildLevel0():"level1"===this.stateManager.urlState.subView?this.buildLevel1(parseInt(this.stateManager.urlState.subViewId,10)):"level2"===this.stateManager.urlState.subView&&this.buildLevel2(parseInt(this.stateManager.urlState.subViewId,10)):(this.stateManager.urlState.subView="level0",this.stateManager.urlState.subViewId=0,this.stateManager.update())},e.prototype.build=function(t,e){var n=this;this.paintCluster=t.cluster,this.paintNodes=t.nodes,this.paintEdges=t.edges,this.paintCentralNode=e,this.canvas=this.container.append("canvas"),this.ctx=this.canvas.node().getContext("2d"),this.zoomObj=o.zoom().scaleExtent([.1,8]).on("zoom",(function(){n.zoom(n)})),this.outerSvg=this.container.append("svg").call(this.zoomObj),this.outerSvg.append("defs").append("clipPath").attr("id","userClip").append("circle").attr("cx",this.imageSize/2).attr("cy",this.imageSize/2).attr("r",(this.imageSize-4)/2).style("fill","black"),this.svg=this.outerSvg.append("g"),this.edgeToggle=this.outerSvg.append("g").attr("id","cluster-vis-showEdges-toggle").on("click",(function(){n.showEdges=!n.showEdges,n.showEdges&&(n.showUserEdges=!1),n.paint()}));var r=this.edgeToggle.append("g");r.append("image").attr("class","cluster-vis-showEdges-normal").attr("width",51).attr("height",33).attr("xlink:href","../assets/images/vis--cluster--showEdges-normal@2x.png"),r.append("image").attr("class","cluster-vis-showEdges-active").attr("width",51).attr("height",33).attr("xlink:href","../assets/images/vis--cluster--showEdges-active@2x.png"),r.append("text").attr("text-anchor","end").attr("transform","translate(-4, 20)").html(browser.i18n.getMessage("visClusterToggleOff")),this.proxyToggle=this.outerSvg.append("g").attr("id","cluster-vis-showProxies-toggle").on("click",(function(){n.showProxies=!n.showProxies,n.showProxies&&(n.showEdges=!0),n.paint()}));var i=this.proxyToggle.append("g");i.append("image").attr("class","cluster-vis-showProxies-normal").attr("width",51).attr("height",33).attr("xlink:href","../assets/images/vis--cluster--showProxies-normal@2x.png"),i.append("image").attr("class","cluster-vis-showProxies-active").attr("width",51).attr("height",33).attr("xlink:href","../assets/images/vis--cluster--showProxies-active@2x.png"),i.append("text").attr("text-anchor","end").attr("transform","translate(-4, 23)").html(browser.i18n.getMessage("visProxiesToggleOff")),this.resize(!0),this.updateView()},e.prototype.buildLevel0=function(){var t=this;this.resetCluster(),this.showEdges=!0,this.showProxies=!1,this.level=0,this.outerSvg.on("click",null);var e={};this.paintNodes.forEach((function(n){var r=n[6][t.clusterId];r in e||(e[r]=0),e[r]+=1}));var n=this.svg.append("g").attr("class","centerGroup").attr("transform","translate("+this.width/2+", "+this.height/2+")");n.append("image").attr("transform","translate(-"+this.imageSize/2+", -"+this.imageSize/2+")").attr("xlink:href",this.paintCentralNode.image).style("width",this.imageSize).style("height",this.imageSize).attr("clip-path","url(#userClip)"),n.append("circle").attr("cx",0).attr("cy",0).attr("r",this.imageSize/2+2).style("fill","transparent").style("stroke","rgba(0,0,0,0.2)");var r=Object.keys(this.paintCluster[this.clusterId].clusters),i=this.height/4,a=2*Math.PI/r.length,s={},u=0,c=Number.MAX_VALUE;this.eMax=0,this.eMin=Number.MAX_VALUE,this.ePMax=0,this.ePMin=Number.MAX_VALUE;var f=[];r.forEach((function(n,o){e[n]>u&&(u=e[n]),e[n]<c&&(c=e[n]),s[n]=[i*Math.cos(o*a),i*Math.sin(o*a)],r.forEach((function(e){if(e in t.paintCluster[t.clusterId].clusters[n].edges&&n!==e&&n<e){var r=t.paintCluster[t.clusterId].clusters[n].edges[e][0];r>t.eMax&&(t.eMax=r),r<t.eMin&&(t.eMin=r);var i=t.paintCluster[t.clusterId].clusters[n].edges[e][1]+r;i>t.ePMax&&(t.ePMax=i),i<t.ePMin&&(t.ePMin=i),f.push([n,e,r,i])}}))}));var l=o.scaleLinear().domain([1,u]).range([5,40]);this.edgeScale=o.scaleLinear().domain([0,this.eMax]).range([0,20]),this.edgeProxyScale=o.scaleLinear().domain([0,this.ePMax]).range([0,20]),n.selectAll("line").data(f).enter().append("line").attr("x1",(function(t){return s[t[0]][0]})).attr("x2",(function(t){return s[t[1]][0]})).attr("y1",(function(t){return s[t[0]][1]})).attr("y2",(function(t){return s[t[1]][1]})).style("stroke","rgba(0,0,0,0.3)");var h=n.selectAll("g").data(r).enter().append("g").attr("class","cluster-vis-entry").attr("transform",(function(t){return"translate("+s[t].join(",")+")"}));h.append("circle").style("fill",(function(e){return t.paintCluster[t.clusterId].clusters[e].color})).attr("r",(function(t){return l(e[t])}));var d=h.append("text").attr("transform",(function(t){return"translate(0,"+(l(e[t])+15)+")"}));d.append("tspan").attr("x",0).attr("text-anchor","middle").style("font-weight","bold").text((function(e){return t.paintCluster[t.clusterId].clusters[e].name})),d.append("tspan").attr("x",0).attr("dy",15).attr("text-anchor","middle").text((function(t){return"("+e[t]+")"})),h.on("click",(function(e){t.setSubView("level1",e)})),this.circleLegend(c,u,browser.i18n.getMessage("visLegendNumberOfUsers")),this.paint()},e.prototype.setSubView=function(t,e){this.stateManager.urlState.subView=t,this.stateManager.urlState.subViewId=e,this.stateManager.update()},e.prototype.resetCluster=function(){this.svg.selectAll("*").remove(),this.edgeToggle.classed("active",!1),this.showEdges=!1,this.proxyToggle.classed("active",!1),this.showProxies=!1,null!==this.simulation&&this.simulation.stop(),this.outerSvg.call(this.zoomObj.transform,o.zoomIdentity),this.graph={links:[],nodeMap:{},nodes:[],proxieLinks:[],userLinks:[],userProxyLinks:[]}},e.prototype.setupClick=function(){var t=this;this.outerSvg.on("click",(function(){if(t.level>0){var e=o.event.pageX,n=o.event.pageY,r=t.hitTest(e,n);if(r&&"cluster"!==r[1]){var i="#555555";t.showUserEdges=!0,t.showEdges=!1,t.graph.userLinks=[],t.graph.userProxyLinks=[],t.graph.links.forEach((function(e){e.source[0]!==r[0]&&e.target[0]!==r[0]||t.graph.userLinks.push(e)})),t.graph.proxieLinks.forEach((function(e){e.source!==r.index&&e.target!==r.index||t.graph.userProxyLinks.push(e)})),"color"in r&&(i=r.color),t.tooltip(r,r.x*t.canvasTransform.k+t.canvasTransform.x,r.y*t.canvasTransform.k+t.canvasTransform.y,i,[{callback:function(e){t.container.selectAll("#tooltip").remove(),t.setSubView("level2",e[0])},label:"Show connections to this user &raquo;"}]),t.paint()}else t.container.selectAll("#tooltip").remove()}}))},e.prototype.setupSimulation=function(t){var e=this;this.simulation=o.forceSimulation().force("link",o.forceLink().id((function(t){return t[0]}))).force("charge",o.forceManyBody().strength(-250)).force("collide",o.forceCollide().radius((function(t){return t.r+20})).iterations(2)).force("center",o.forceCenter(this.width/2,this.height/2+20));var n=o.scaleLinear().range([5,this.imageSize/4]).domain(o.extent(this.graph.nodes,t));this.graph.nodes.forEach((function(e){var r=20;13 in e&&(r=n(t(e))),e.r=r}));this.simulation.nodes(this.graph.nodes).on("tick",(function(){e.paint()})),this.simulation.force("link").links(this.graph.links)},e.prototype.buildLevel1=function(t){var e=this;this.resetCluster(),this.setupClick(),this.level=1;var n=Number.MAX_VALUE,r=0,i={},o=0,a=Object.keys(this.paintCluster[this.clusterId].clusters);a.forEach((function(n){n.toString()!==t.toString()&&0!==e.paintCluster[e.clusterId].clusters[n].edges[n][0]||(o+=1)}));var s=2*Math.PI/(a.length-o),u=this.height;u>this.width&&(u=this.width),u=u/2-70,this.paintNodes.forEach((function(i){if(i[6][e.clusterId][0].toString()===t.toString()){if(i[13][e.clusterId][t][0]>r&&(r=i[13][e.clusterId][t][0]),i[13][e.clusterId][t][0]<n&&(n=i[13][e.clusterId][t][0]),void 0!==i[14]&&null!==i[14]){var o=document.createElement("img");o.onerror=function(t){t.path[0].src="../assets/images/twitter_default_profile_normal.png"},o.onload=function(t){i.imageLoad=!0},o.width=e.imageSize,o.height=e.imageSize,i.imageLoad=!1,i.image=o,o.src=i[14]}e.graph.nodes.push(i),e.graph.nodeMap[i[0]]=e.graph.nodes.length-1}}));var c=0;a.forEach((function(n){if(n.toString()!==t.toString()&&e.paintCluster[e.clusterId].clusters[n].edges[n][0]>0){var r=1e9+parseInt(n.toString(),10);e.graph.nodes.push({0:r,1:"cluster",2:e.paintCluster[e.clusterId].clusters[n].name,ci:c,color:e.paintCluster[e.clusterId].clusters[n].color,fixed:!0,fx:u*Math.cos(c*s)+e.width/2,fy:u*Math.sin(c*s)+e.height/2,r:20,theta:s}),i[n]=r,e.graph.nodeMap[r]=e.graph.nodes.length-1,c+=1}}));var f={};this.paintEdges.forEach((function(n){var r=e.paintNodes[n[0]][6][e.clusterId][0],o=e.paintNodes[n[1]][6][e.clusterId][0];if(r.toString()===t.toString()&&o.toString()===t.toString())n[2]>=2?e.graph.links.push({source:n[0],target:n[1]}):e.graph.proxieLinks.push({source:e.graph.nodeMap[n[0]],target:e.graph.nodeMap[n[1]]});else if(r.toString()===t.toString()||o.toString()===t.toString()){var a=n[1],s=n[0];o.toString()===t.toString()&&(a=n[0],s=n[1]);var u=i[e.paintNodes[a][6][e.clusterId][0]],c=s+"-"+u;n[2]>=2?c in f?f[c]+=1:(f[c]=1,e.graph.links.push({source:s,target:u})):c in f?f[c]+=1:(f[c]=1,e.graph.proxieLinks.push({source:e.graph.nodeMap[s],target:e.graph.nodeMap[u]}))}})),this.setupSimulation((function(n){return 13 in n?n[13][e.clusterId][t][0]:e.graph.nodes.length})),this.circleLegend(n,r,browser.i18n.getMessage("visLegendNumberOfConnections"))},e.prototype.buildLevel2=function(t){var e=this;this.resetCluster(),this.setupClick(),this.level=2;var n=0;this.paintEdges.forEach((function(n){n[0]!==t&&n[1]!==t||[n[0],n[1]].forEach((function(n){if(!(n in e.graph.nodeMap)){if(void 0!==e.paintNodes[n][14]&&null!==e.paintNodes[n][14]){var r=document.createElement("img");r.onerror=function(t){t.path[0].src="../assets/images/twitter_default_profile_normal.png"},r.onload=function(t){e.paintNodes[n].imageLoad=!0},r.width=e.imageSize,r.height=e.imageSize,e.paintNodes[n].imageLoad=!1,e.paintNodes[n].image=r,r.src=e.paintNodes[n][14]}e.paintNodes[n].rUserCount=0,e.paintNodes[n].isCentral=!1,n===t&&(e.paintNodes[n].isCentral=!0),e.graph.nodes.push(e.paintNodes[n]),e.graph.nodeMap[n]=e.graph.nodes.length-1}}))})),this.paintEdges.forEach((function(t){t[0]in e.graph.nodeMap&&t[1]in e.graph.nodeMap&&(t[2]>=2?(e.graph.links.push({source:t[0],target:t[1]}),[t[0],t[1]].forEach((function(t){e.graph.nodes[e.graph.nodeMap[t]].rUserCount+=1,e.graph.nodes[e.graph.nodeMap[t]].rUserCount>n&&(n=e.graph.nodes[e.graph.nodeMap[t]].rUserCount)}))):e.graph.proxieLinks.push({source:e.graph.nodeMap[t[0]],target:e.graph.nodeMap[t[1]]}))})),this.setupSimulation((function(t){return t.rUserCount})),this.circleLegend(o.min(this.graph.nodes,(function(t){return t.rUserCount})),n,browser.i18n.getMessage("visLegendNumberOfConnections"))},e.prototype.paint=function(){var t=this;this.showIxMessage&&this.ixMessage(browser.i18n.getMessage("visClusterIntro")),this.ctx.clearRect(0,0,2*this.width,2*this.height),this.showProxies?this.proxyToggle.select("text").html(browser.i18n.getMessage("visProxiesToggleOn")):this.proxyToggle.select("text").html(browser.i18n.getMessage("visProxiesToggleOff")),this.proxyToggle.classed("active",this.showProxies),this.showEdges?this.edgeToggle.select("text").html(browser.i18n.getMessage("visClusterToggleOn")):this.edgeToggle.select("text").html(browser.i18n.getMessage("visClusterToggleOff")),this.edgeToggle.classed("active",this.showEdges),0===this.level?this.showEdges?(this.showProxies?this.lineLegend(this.ePMin,this.ePMax):this.lineLegend(this.eMin,this.eMax),this.svg.selectAll(".centerGroup line").style("opacity",1).style("stroke-width",(function(e){return t.showProxies?t.edgeProxyScale(e[3]):t.edgeScale(e[2])}))):this.svg.selectAll(".centerGroup line").style("opacity",0):this.level>=1&&(o.selectAll("#line-legend").remove(),this.ctx.save(),this.ctx.translate(2*this.canvasTransform.x,2*this.canvasTransform.y),this.ctx.scale(this.canvasTransform.k,this.canvasTransform.k),this.ctx.strokeStyle="rgba(0,0,0,0.2)",this.showUserEdges?(this.graph.userLinks.forEach((function(e){t.positionLink(e,!0)})),this.showProxies&&this.graph.userProxyLinks.forEach((function(e){t.positionLink({source:t.graph.nodes[e.source],target:t.graph.nodes[e.target]},!0)}))):this.showEdges&&(this.graph.links.forEach((function(e){t.positionLink(e,!0)})),this.showProxies&&this.graph.proxieLinks.forEach((function(e){t.positionLink({source:t.graph.nodes[e.source],target:t.graph.nodes[e.target]},!0)}))),this.graph.nodes.forEach((function(e){if(t.ctx.fillStyle="#000000","image"in e&&e.imageLoad&&e.image.complete){var n=1;2===t.level&&(n=2,t.ctx.fillStyle=t.paintCluster[t.clusterId].clusters[e[6][t.clusterId][0]].color,e.isCentral&&(n=4)),t.ctx.beginPath(),t.ctx.arc(2*e.x,2*e.y,2*e.r+n,0,2*Math.PI),t.ctx.closePath(),t.ctx.fill(),t.ctx.save(),t.ctx.beginPath(),t.ctx.arc(2*e.x,2*e.y,2*e.r,0,2*Math.PI),t.ctx.closePath(),t.ctx.clip(),t.ctx.drawImage(e.image,2*e.x-2*e.r,2*e.y-2*e.r,4*e.r,4*e.r),t.ctx.restore()}else"color"in e&&(t.ctx.fillStyle=e.color),t.ctx.beginPath(),t.ctx.arc(2*e.x,2*e.y,2*e.r,0,2*Math.PI),t.ctx.closePath(),t.ctx.fill()})),this.ctx.restore())},e.prototype.update=function(t){var e=this;this.outerSvg.attr("width",this.width).attr("height",this.height),this.edgeToggle.attr("transform","translate("+(this.width-73)+", 67)"),this.proxyToggle.attr("transform","translate("+(this.width-73)+", 127)"),this.canvas.style("width",this.width+"px").style("height",this.height+"px").attr("width",2*this.width).attr("height",2*this.height),this.svg.selectAll(".centerGroup").attr("transform","translate("+this.width/2+", "+this.height/2+")");var n=this.height;n>this.width&&(n=this.width),n=n/2-70,this.simulation&&(this.graph.nodes.forEach((function(t){"ci"in t&&(t.fx=n*Math.cos(t.ci*t.theta)+e.width/2,t.fy=n*Math.sin(t.ci*t.theta)+e.height/2)})),this.simulation.force("center",o.forceCenter(this.width/2,this.height/2+20)).alpha(0).restart())},e.prototype.circlePath=function(t,e,n,r){return"M"+t+","+e+"       m"+-n+", 0       a"+n+","+n+" 0 "+(r?"0":"1")+","+(r?"1":"0")+" "+2*n+",0       a"+n+","+n+" 0 "+(r?"0":"1")+","+(r?"1":"0")+" "+2*-n+",0Z"},e.prototype.positionLink=function(t,e){void 0===e&&(e=!1);var n=Math.sqrt(Math.pow(t.source.x-t.target.x,2)+Math.pow(t.source.y-t.target.y,2))/10,r=(t.source.x+t.target.x)/2,i=(t.source.y+t.target.y)/2,o=t.target.x-t.source.x,a=t.target.y-t.source.y,s=Math.sqrt(o*o+a*a),u=r+n*(a/s),c=i-n*(o/s);if(!e)return"M"+t.source.x+", "+t.source.y+"S"+u+", "+c+" "+t.target.x+", "+t.target.y;this.ctx.beginPath(),this.ctx.moveTo(2*t.source.x,2*t.source.y),this.ctx.bezierCurveTo(2*u,2*c,2*u,2*c,2*t.target.x,2*t.target.y),this.ctx.stroke()},e}(n(83).Vis);e.ClusterVis=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ListVis=void 0;var o=n(2),a=function(t){function e(e){var n=t.call(this,e)||this;return n.visType="list",n.helpData=[browser.i18n.getMessage("helpList_1"),browser.i18n.getMessage("helpList_2"),browser.i18n.getMessage("helpList_3"),browser.i18n.getMessage("helpList_4"),browser.i18n.getMessage("helpList_5")],n.asyncGetIxState(),n}return i(e,t),e.prototype.build=function(t,e){var n=this,r=[],i=[],a=[];Object.keys(t.cluster[this.clusterId].clusters).forEach((function(e,o){i.push({clusters:[],edit:!0,id:e,info:t.cluster[n.clusterId].clusters[e],max:0}),r[e]=o})),i.push({clusters:[],edit:!1,info:{name:browser.i18n.getMessage("noCluster"),color:"#555555"}}),t.nodes.forEach((function(t){t[6][n.clusterId][0]in r?(i[r[t[6][n.clusterId][0]]].max<t[10]&&(i[r[t[6][n.clusterId][0]]].max=t[10]),i[r[t[6][n.clusterId][0]]].clusters.push(t)):i[i.length-1].clusters.push(t)})),i.forEach((function(t){t.clusters.sort((function(t,e){return e[10]-t[10]})),a.push(o.scaleLinear().range([0,12]).domain([0,t.max]))})),this.container.selectAll("*").remove();var s=browser.i18n.getMessage("visListLegend").split(";");this.container.append("div").attr("id","clusterList-legend").html("<div>\n      <span><strong>"+s[0]+":</strong></span>\n      <span>"+s[1]+'</span>\n      <span><img src="../assets/images/vis--legend--list--circle.png"       srcset="../assets/images/vis--legend--list--circle.png 1x,       ../assets/images/vis--legend--list--circle@2x.png 2x" ></span>\n      <span>'+s[2]+'</span>\n      <span class="clusterList-legend-divider"></span>\n      <span><strong>'+s[3]+'</strong></span>\n      <span><img src="../assets/images/vis--icon--hide.png"       srcset="../assets/images/vis--icon--hide.png 1x,       ../assets/images/vis--icon--hide@2x.png 2x" ></span>\n      <span>'+s[4]+'</span>\n      <span><img src="../assets/images/vis--icon--hidden.png"       srcset="../assets/images/vis--icon--hidden.png 1x,       ../assets/images/vis--icon--hidden@2x.png 2x" ></span>\n    </div>'),this.listContainer=this.container.append("div").attr("id","clusterList-wrapper").selectAll("div.clusterList-container").data(i).enter().append("div").attr("class","clusterList-container");var u=this.listContainer.append("div").attr("class","clusterList-title").html((function(t){return'<span><svg width="24" height="24">\n  <circle cx="12" cy="12" r="12" style="fill:'+t.info.color+';" />\n</svg></span>\n<span><h2>'+t.info.name+'</h2></span>\n<span><a\n  style="display:'+(t.edit?"inline-block":"none")+';"\n  class="clusterList-editButton"><img src="../assets/images/vis--icon--edit.png"   srcset="../assets/images/vis--icon--edit.png 1x,   ../assets/images/vis--icon--edit@2x.png 2x" ></a></span>  <span><a\n  style="display:'+(t.edit?"inline-block":"none")+';"\n  class="clusterList-hideButton">  <img src="../assets/images/vis--icon--'+(t.info.modified?"hide":"hidden")+'.png"   srcset="../assets/images/vis--icon--'+(t.info.modified?"hide":"hidden")+".png 1x,   ../assets/images/vis--icon--"+(t.info.modified?"hide":"hidden")+'@2x.png 2x" >  </a></span>'}));u.select(".clusterList-editButton").on("click",(function(t){n.editCluster(t,e)})),u.select(".clusterList-hideButton").on("click",(function(t){n.hideCluster(t,e)}));var c=this.listContainer.append("ul").style("fill",(function(t){return t.info.color})).selectAll("li").data((function(t){return t.clusters})).enter().append("li");c.append("span").append("svg").attr("width",24).attr("height",24).style("display",(function(t){return r[t[6][n.clusterId][0]]in a?null:"none"})).append("circle").attr("cx",12).attr("cy",12).attr("r",(function(t){return r[t[6][n.clusterId][0]]in a?a[r[t[6][n.clusterId][0]]](t[10]):0})),c.append("span").append("img").on("error",(function(t,e,n){o.select(n[e]).attr("src","https://abs.twimg.com/sticky/default_profile_images/default_profile_normal.png")})).attr("src",(function(t){return t[14]})),c.append("span").attr("class","actionContainer").html((function(t){return'<span class="username">'+t[15]+'</span><br /><span class="actions"><a href="vis.html?view=cluster&nUuid='+n.stateManager.urlState.nUuid+"&subView=level2&subViewId="+t[0]+'">'+browser.i18n.getMessage("visListUserNetwork")+'&nbsp;&raquo;</a><br /><a href="https://www.twitter.com/'+t[1]+'">'+browser.i18n.getMessage("visListUserSocialProfile")+"&nbsp;&raquo;</a></span>"})),this.container.append("div").attr("id","clusterList-search").append("input").attr("id","clusterList-search-field").attr("type","text").attr("placeholder","Search for Username").on("input",(function(){var t=o.select("#clusterList-search-field").property("value").toLowerCase();0===t.length?c.style("display",null):c.style("display",(function(e){return e[15].toLowerCase().indexOf(t)>=0?null:"none"}))}))},e}(n(83).Vis);e.ListVis=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.NetworkVis=void 0;var o=n(2),a=n(85),s=function(t){function e(e){var n=t.call(this,e)||this;return n.visType="network",n.showProxies=!1,n.pointMode="single",n.time=0,n.frameLoop=!1,n.helpData=[browser.i18n.getMessage("helpNetwork_1"),browser.i18n.getMessage("helpNetwork_2"),browser.i18n.getMessage("helpNetwork_3"),browser.i18n.getMessage("helpNetwork_4"),browser.i18n.getMessage("helpNetwork_5"),browser.i18n.getMessage("helpNetwork_6"),browser.i18n.getMessage("helpNetwork_7")],n.asyncGetIxState(),n}return i(e,t),e.prototype.destroy=function(){this.destroyed=!0,this.container.selectAll("#tooltip").remove()},e.prototype.zoom=function(t){this.container.selectAll("#tooltip").remove(),t.canvasTransform=o.event.transform,this.glAnimate()},e.prototype.build=function(t,e){var n=this;this.paintCluster=t.cluster;var r=[],i=[],s=[],u=[],c=[],f=[],l=0,h=Number.MAX_VALUE;t.nodes.forEach((function(t){t[5]>l&&(l=t[5]),t[5]<h&&(h=t[5]);var e=[85/255,85/255,85/255];if(t[6][n.clusterId].length>0&&t[6][n.clusterId][0]in n.paintCluster[n.clusterId].clusters){var a=o.color(n.paintCluster[n.clusterId].clusters[t[6][n.clusterId]].color).rgb();e=[a.r/255,a.g/255,a.b/255]}r.push(e),i.push([t[11]+n.width/2,t[12]+n.height/2]),s.push(4*t[10]);var d=0;Object.keys(t[13][n.clusterId]).forEach((function(e){d+=t[13][n.clusterId][e][0]}));var p=function(t,e,r){if(t[13][n.clusterId][e][0]>0){var i=[85/255,85/255,85/255];if(e in n.paintCluster[n.clusterId].clusters){var a=o.color(n.paintCluster[n.clusterId].clusters[e].color).rgb();i=[a.r/255,a.g/255,a.b/255]}u.push(i),c.push([t[11]+n.width/2,t[12]+n.height/2]),r+=t[13][n.clusterId][e][0],f.push(Math.sqrt(Math.PI*Math.pow(4*t[10],2)/d*r/Math.PI))}return r};if(t[6][n.clusterId].length>0&&t[6][n.clusterId][0]in n.paintCluster[n.clusterId].clusters&&t[13][n.clusterId][t[6][n.clusterId][0]][0]>0){var g=p(t,t[6][n.clusterId][0],0);Object.keys(t[13][n.clusterId]).forEach((function(e){parseInt(e,10)!==t[6][n.clusterId][0]&&(g=p(t,e,g))}))}else u.push([85/255,85/255,85/255]),c.push([t[11]+n.width/2,t[12]+n.height/2]),f.push(4*t[10])})),this.paintEdges=[],this.paintProxyEdges=[],t.edges.forEach((function(t){t[2]>=5?n.paintEdges.push([t[0],t[1]]):n.paintProxyEdges.push([parseInt(t[0],10),parseInt(t[1],10)])})),this.resize(!1);this.container.append("div").style("width",this.width+"px").style("height",this.height+"px").attr("id","overview-regl-canvas");var d=this.container.append("svg").attr("id","overview-svg").style("z-index",2).on("click",(function(){var e=o.event.pageX,r=o.event.pageY,a=!1;i.forEach((function(i,u){if(Math.sqrt(Math.pow(e-(i[0]*n.canvasTransform.k+n.canvasTransform.x),2)+Math.pow(r-(i[1]*n.canvasTransform.k+n.canvasTransform.y),2))<=s[u]/4*n.canvasTransform.k){var c="#555555",f=[];if(t.nodes[u][6][n.clusterId].length>0&&t.nodes[u][6][n.clusterId][0]in n.paintCluster[n.clusterId].clusters){var l=o.color(n.paintCluster[n.clusterId].clusters[t.nodes[u][6][n.clusterId]].color).rgb();c="rgb("+l.r+", "+l.g+", "+l.b+")",f=[{callback:function(t){window.location.href="vis.html?view=cluster&nUuid="+n.stateManager.urlState.nUuid+"&subView=level2&subViewId="+t[0]},label:"Show connections to this user &raquo;"}]}n.tooltip(t.nodes[u],i[0]*n.canvasTransform.k+n.canvasTransform.x,i[1]*n.canvasTransform.k+n.canvasTransform.y,c,f),a=!0}})),a||n.container.selectAll("#tooltip").remove()})).call(o.zoom().scaleExtent([.1,8]).on("zoom",(function(){n.zoom(n)})));this.visNav=d.append("g").attr("id","network-nav"),[22,17,14,11,2].forEach((function(t,e){n.visNav.append("circle").attr("class","network-nav-circle network-nav-circle-"+(e+1)).attr("r",t)})),this.visNav.append("line").attr("x1",-40),this.visNav.append("text").attr("transform","translate(-44, 5)").attr("text-anchor","end").html(browser.i18n.getMessage("visNetworkToggleOff")),this.visNav.on("click",(function(){n.ixTooltipHide(),"single"===n.pointMode?(n.pointMode="cluster",n.visNav.classed("active",!0),n.visNav.select("text").html(browser.i18n.getMessage("visNetworkToggleOn"))):(n.pointMode="single",n.visNav.classed("active",!1),n.visNav.select("text").html(browser.i18n.getMessage("visNetworkToggleOff"))),n.glAnimate()})),this.proxyToggle=d.append("g").attr("id","cluster-vis-showProxies-toggle").on("click",(function(){n.showProxies?p.select("text").html(browser.i18n.getMessage("visProxiesToggleOff")):p.select("text").html(browser.i18n.getMessage("visProxiesToggleOn")),n.showProxies=!n.showProxies,n.proxyToggle.classed("active",n.showProxies),n.update(!1)}));var p=this.proxyToggle.append("g");p.append("image").attr("class","cluster-vis-showProxies-normal").attr("width",51).attr("height",33).attr("xlink:href","../assets/images/vis--cluster--showProxies-normal@2x.png"),p.append("image").attr("class","cluster-vis-showProxies-active").attr("width",51).attr("height",33).attr("xlink:href","../assets/images/vis--cluster--showProxies-active@2x.png"),p.append("text").attr("text-anchor","end").attr("transform","translate(-4, 23)").html(browser.i18n.getMessage("visProxiesToggleOff")),this.circleLegend(h,l),this.canvasTransform=o.zoomIdentity,this.regl=a(document.getElementById("overview-regl-canvas")),window.onbeforeunload=function(){n.regl.destroy()},this.reglDraw=this.regl({attributes:{color:r,position:i,size:s},count:r.length,frag:"\n        // set the precision of floating point numbers\n        precision highp float;\n        // this value is populated by the vertex shader\n        varying vec3 fragColor;\n        void main() {\n          float r = 0.0, delta = 0.0;\n          vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n          r = dot(cxy, cxy);\n          if (r > 1.0) {\n              discard;\n          }\n          // gl_FragColor is a special variable that holds the color of a pixel\n          gl_FragColor = vec4(fragColor, 1);\n        }\n      ",primitive:"points",uniforms:{offsetX:this.regl.prop("offsetX"),offsetY:this.regl.prop("offsetY"),scale:this.regl.prop("scale"),stageHeight:this.regl.prop("stageHeight"),stageWidth:this.regl.prop("stageWidth")},vert:"\n        // per vertex attributes\n        attribute float size;\n        attribute vec2 position;\n        attribute vec3 color;\n        // variables to send to the fragment shader\n        varying vec3 fragColor;\n        // values that are the same for all vertices\n        uniform float scale;\n        uniform float offsetX;\n        uniform float offsetY;\n        uniform float stageWidth;\n        uniform float stageHeight;\n        // helper function to transform from pixel space to normalized device coordinates (NDC)\n        // in NDC (0,0) is the middle, (-1, 1) is the top left and (1, -1) is the bottom right.\n        vec2 normalizeCoords(vec2 position) {\n          // read in the positions into x and y vars\n          float x = position[0] * scale + offsetX;\n          float y = position[1] * scale + offsetY;\n          return vec2(\n            2.0 * ((x / stageWidth) - 0.5),\n            // invert y to treat [0,0] as bottom left in pixel space\n            -(2.0 * ((y / stageHeight) - 0.5))\n          );\n        }\n        void main() {\n          // update the size of a point based on the prop pointWidth\n          gl_PointSize = size * scale;\n          // send color to the fragment shader\n          fragColor = color;\n          // scale to normalized device coordinates\n          // gl_Position is a special variable that holds the position of a vertex\n          gl_Position = vec4(normalizeCoords(position), 0.0, 1.0);\n        }\n      "}),this.reglDrawMultiPoint=this.regl({attributes:{color:u,position:c,size:f},count:u.length,frag:"\n        // set the precision of floating point numbers\n        precision highp float;\n        // this value is populated by the vertex shader\n        varying vec3 fragColor;\n        void main() {\n          float r = 0.0, delta = 0.0;\n          vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n          r = dot(cxy, cxy);\n          if (r > 1.0) {\n              discard;\n          }\n          // gl_FragColor is a special variable that holds the color of a pixel\n          gl_FragColor = vec4(fragColor, 1);\n        }\n      ",primitive:"points",uniforms:{offsetX:this.regl.prop("offsetX"),offsetY:this.regl.prop("offsetY"),scale:this.regl.prop("scale"),stageHeight:this.regl.prop("stageHeight"),stageWidth:this.regl.prop("stageWidth")},vert:"\n        // per vertex attributes\n        attribute float size;\n        attribute vec2 position;\n        attribute vec3 color;\n        // variables to send to the fragment shader\n        varying vec3 fragColor;\n        varying float tscale;\n        // values that are the same for all vertices\n        uniform float scale;\n        uniform float offsetX;\n        uniform float offsetY;\n        uniform float stageWidth;\n        uniform float stageHeight;\n        // helper function to transform from pixel space to normalized device coordinates (NDC)\n        // in NDC (0,0) is the middle, (-1, 1) is the top left and (1, -1) is the bottom right.\n        vec2 normalizeCoords(vec2 position) {\n          // read in the positions into x and y vars\n          float x = position[0] * scale + offsetX;\n          float y = position[1] * scale + offsetY;\n          return vec2(\n            2.0 * ((x / stageWidth) - 0.5),\n            // invert y to treat [0,0] as bottom left in pixel space\n            -(2.0 * ((y / stageHeight) - 0.5))\n          );\n        }\n        void main() {\n          // update the size of a point based on the prop pointWidth\n          tscale = scale;\n          if(tscale > 2.0) {\n            tscale = 2.0;\n          }\n          gl_PointSize = size * tscale;\n          // send color to the fragment shader\n          fragColor = color;\n          // scale to normalized device coordinates\n          // gl_Position is a special variable that holds the position of a vertex\n          gl_Position = vec4(normalizeCoords(position), 0.0, 1.0);\n        }\n      "}),this.reglDrawLine=this.regl({attributes:{position:i},blend:{color:[0,0,0,0],enable:!0,equation:{alpha:"add",rgb:"add"},func:{dstAlpha:1,dstRGB:"one minus src alpha",srcAlpha:1,srcRGB:"src alpha"}},depth:{enable:!1},elements:this.paintEdges,frag:"\n        precision mediump float;\n        uniform vec4 color;\n        void main() {\n          gl_FragColor = color;\n        }",lineWidth:1,primitive:"line",uniforms:{color:[0,0,0,.5],offsetX:this.regl.prop("offsetX"),offsetY:this.regl.prop("offsetY"),scale:this.regl.prop("scale"),stageHeight:this.regl.prop("stageHeight"),stageWidth:this.regl.prop("stageWidth")},vert:"\n        precision mediump float;\n        attribute vec2 position;\n        uniform float scale;\n        uniform float offsetX;\n        uniform float offsetY;\n        uniform float stageWidth;\n        uniform float stageHeight;\n        vec2 normalizeCoords(vec2 position) {\n          // read in the positions into x and y vars\n          float x = position[0] * scale + offsetX;\n          float y = position[1] * scale + offsetY;\n          return vec2(\n            2.0 * ((x / stageWidth) - 0.5),\n            // invert y to treat [0,0] as bottom left in pixel space\n            -(2.0 * ((y / stageHeight) - 0.5))\n          );\n        }\n        void main() {\n          gl_Position = vec4(normalizeCoords(position), 0.0, 1.0);\n        }"}),this.reglDrawProxyLine=this.regl({attributes:{position:i},blend:{color:[0,0,0,0],enable:!0,equation:{alpha:"add",rgb:"add"},func:{dstAlpha:1,dstRGB:"one minus src alpha",srcAlpha:1,srcRGB:"src alpha"}},depth:{enable:!1},elements:this.paintProxyEdges,frag:"\n        precision mediump float;\n        uniform vec4 color;\n        void main() {\n          gl_FragColor = color;\n        }",lineWidth:1,primitive:"line",uniforms:{color:[0,0,0,.5],offsetX:this.regl.prop("offsetX"),offsetY:this.regl.prop("offsetY"),scale:this.regl.prop("scale"),stageHeight:this.regl.prop("stageHeight"),stageWidth:this.regl.prop("stageWidth")},vert:"\n        precision mediump float;\n        attribute vec2 position;\n        uniform float scale;\n        uniform float offsetX;\n        uniform float offsetY;\n        uniform float stageWidth;\n        uniform float stageHeight;\n        vec2 normalizeCoords(vec2 position) {\n          // read in the positions into x and y vars\n          float x = position[0] * scale + offsetX;\n          float y = position[1] * scale + offsetY;\n          return vec2(\n            2.0 * ((x / stageWidth) - 0.5),\n            // invert y to treat [0,0] as bottom left in pixel space\n            -(2.0 * ((y / stageHeight) - 0.5))\n          );\n        }\n        void main() {\n          gl_Position = vec4(normalizeCoords(position), 0.0, 1.0);\n        }"}),this.time=1,this.update(!1),setTimeout((function(){n.update(!1)}),100)},e.prototype.glAnimate=function(){var t=this;this.frameLoop||(this.frameLoop=this.regl.frame((function(){t.regl.clear({color:[1,1,1,1],depth:1}),t.reglDrawLine({offsetX:t.canvasTransform.x,offsetY:t.canvasTransform.y,scale:t.canvasTransform.k,stageHeight:t.height,stageWidth:t.width}),t.showProxies&&t.reglDrawProxyLine({offsetX:t.canvasTransform.x,offsetY:t.canvasTransform.y,scale:t.canvasTransform.k,stageHeight:t.height,stageWidth:t.width}),"cluster"===t.pointMode?t.reglDrawMultiPoint({offsetX:t.canvasTransform.x,offsetY:t.canvasTransform.y,scale:t.canvasTransform.k,stageHeight:t.height,stageWidth:t.width}):t.reglDraw({offsetX:t.canvasTransform.x,offsetY:t.canvasTransform.y,scale:t.canvasTransform.k,stageHeight:t.height,stageWidth:t.width}),t.frameLoop.cancel(),t.frameLoop=!1})))},e.prototype.update=function(t){this.showIxTooltip&&this.ixTooltip(this.width-70,105),this.showIxMessage&&this.ixMessage(browser.i18n.getMessage("visNetworkIntro")),this.container.select("#overview-regl-canvas").style("width",this.width+"px").style("height",this.height+"px"),this.container.select("#overview-regl-canvas canvas").attr("width",2*this.width).attr("height",2*this.height).style("width",this.width+"px").style("height",this.height+"px"),this.visNav.attr("transform","translate("+(this.width-43)+", 80)"),this.proxyToggle.attr("transform","translate("+(this.width-73)+", 117)"),this.regl.poll(),this.glAnimate()},e}(n(83).Vis);e.NetworkVis=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.OverviewVis=void 0;var a=n(4),s=n(6),u=n(2),c=n(85),f=function(t){function e(e){var n=t.call(this,e)||this;return n.visType="overview",n.glNodes=[],n.clickNodes=[],n.time=1,n.scaleTarget=1,n.currentScale=0,n.lineTarget=0,n.frameLoop=!1,n.helpData=[browser.i18n.getMessage("helpOverview_1"),browser.i18n.getMessage("helpOverview_2"),browser.i18n.getMessage("helpOverview_3"),browser.i18n.getMessage("helpOverview_4"),browser.i18n.getMessage("helpOverview_5"),browser.i18n.getMessage("helpOverview_6"),browser.i18n.getMessage("helpOverview_7"),browser.i18n.getMessage("helpOverview_8")],n.handleResize=s.debounce((function(){n.resize(!0)}),200,!0),n.asyncGetIxState(),n}return i(e,t),e.prototype.destroyTooltip=function(){var t=this.container.selectAll("#tooltip");t.size()>0&&t.remove()},e.prototype.destroy=function(){this.destroyed=!0,this.destroyTooltip()},e.prototype.zoom=function(t){this.destroyTooltip(),t.canvasTransform=u.event.transform,t.paint()},e.prototype.circlePath=function(t,e,n,r){return"M"+t+","+e+"      m"+-n+", 0      a"+n+","+n+" 0 "+(r?"0":"1")+","+(r?"1":"0")+" "+2*n+",0      a"+n+","+n+" 0 "+(r?"0":"1")+","+(r?"1":"0")+" "+2*-n+",0Z"},e.prototype.build=function(t,e){var n=this,r=t.leafs.map((function(t){return[null,null,null,null,null,null,[[],[]],t[0],t[1],t[2]]}));this.paintNodes=o(t.nodes,t.proxies,r),this.clickNodes=o(t.nodes,t.proxies),this.paintCluster=t.cluster,this.resize(!1),u.select(window).on("resize",(function(){n.handleResize()}));this.container.append("div").style("width",this.width+"px").style("height",this.height+"px").attr("id","overview-regl-canvas");var i=this.container.append("svg").attr("id","overview-svg").style("z-index",2).on("click",(function(){var t=u.event.pageX,e=u.event.pageY,r=!1;n.clickNodes.forEach((function(i){if(Math.sqrt(Math.pow(t-(i[8]*n.scaleTarget+n.width/2),2)+Math.pow(e-(i[9]*n.scaleTarget+n.height/2),2))<=i[7]*n.scaleTarget){var o="#555555",a=[];if(i[6][n.clusterId].length>0&&i[6][n.clusterId][0]in n.paintCluster[n.clusterId].clusters){var s=u.color(n.paintCluster[n.clusterId].clusters[i[6][n.clusterId]].color).rgb();o="rgb("+s.r+", "+s.g+", "+s.b+")",a=[{callback:function(t){window.location.href="vis.html?view=cluster&nUuid="+n.stateManager.urlState.nUuid+"&subView=level2&subViewId="+t[0]},label:"Show connections to this user &raquo;"}]}n.tooltip(i,i[8]*n.scaleTarget+n.width/2,i[9]*n.scaleTarget+n.height/2,o,a),r=!0}})),r||n.container.selectAll("#tooltip").remove()})),s=u.max(t.nodes,(function(t){return Math.sqrt(Math.pow(t[8],2)+Math.pow(t[9],2))})),f=i.append("defs");f.append("path").attr("id","textPath").attr("d",this.circlePath(0,0,s+8,!0)),f.append("path").attr("id","reverseTextPath").attr("d",this.circlePath(0,0,s+17,!1));f.append("clipPath").attr("id","userClip").append("circle").attr("cx",24).attr("cy",24).attr("r",22).style("fill","black"),this.g=i.append("g"),this.svg=this.g.append("g").classed("centerGroup",!0),this.svg.append("text").append("textPath").attr("startOffset","25%").attr("xlink:href","#textPath").style("font-family","Helvetica, Arial, sans-serif").style("font-size","12px").style("text-anchor","middle").html("&darr;&nbsp;"+a.formatNumber(t.nodes.length,browser.i18n.getUILanguage())+" "+browser.i18n.getMessage("friends")),this.svg.append("text").append("textPath").attr("startOffset","25%").attr("xlink:href","#reverseTextPath").style("font-family","Helvetica, Arial, sans-serif").style("font-size","12px").style("text-anchor","middle").html("&darr;&nbsp;"+a.formatNumber(t.proxies.length,browser.i18n.getUILanguage())+" "+browser.i18n.getMessage("sharedFiendsOfFriends")),this.svg.append("image").attr("transform","translate(-24, -24)").attr("xlink:href",e.image).style("width",48).style("height",48).attr("clip-path","url(#userClip)"),this.svg.append("circle").attr("cx",0).attr("cy",0).attr("r",26).style("fill","transparent").style("stroke","rgba(0,0,0,0.2)");var l=[],h=[],d=[],p=Number.MAX_VALUE,g=0;this.paintNodes.forEach((function(t){var e=[85/255,85/255,85/255];if(t[6][n.clusterId].length>0&&t[6][n.clusterId][0]in n.paintCluster[n.clusterId].clusters){var r=u.color(n.paintCluster[n.clusterId].clusters[t[6][n.clusterId]].color).rgb();e=[r.r/255,r.g/255,r.b/255]}l.push(e),h.push([t[8],t[9]]),d.push(4*t[7]),t[5]>g&&(g=t[5]),t[5]<p&&(p=t[5])}));var v=this.container.append("div").attr("id","overview-navigation").append("svg");this.navData=[[t.nodes.length,"<strong>"+browser.i18n.getMessage("friends")+"</strong> "+a.formatNumber(t.nodes.length,browser.i18n.getUILanguage())],[t.proxies.length,"<strong>"+browser.i18n.getMessage("sharedFiendsOfFriends")+"</strong> "+a.formatNumber(t.proxies.length,browser.i18n.getUILanguage())],[r.length,"<strong>"+browser.i18n.getMessage("otherFriends")+"</strong> "+a.formatNumber(r.length,browser.i18n.getUILanguage())]],this.navLine=v.append("line").attr("transform","translate(110, 0)").attr("y1",this.navData[0][2]).style("stroke-width",5).style("stroke","white"),this.navPoints=v.append("g").selectAll("g").data(this.navData).enter().append("g").attr("class","overview-navigation-buttons");var m=u.scaleLinear().range([10,35]).domain(u.extent(this.navData,(function(t){return t[0]})));this.navData.forEach((function(t,e){t.push(m(t[0]));for(var r=0;e>0;)e-=1,r+=2*n.navData[e][2];t.push(r)})),this.navPoints.append("circle").attr("r",(function(t){return m(t[0])+5})).style("fill","white"),this.navPoints.append("circle").attr("r",(function(t){return m(t[0])})).style("fill","rgba(0,0,0,0.2)"),this.navPoints.append("circle").attr("r",(function(t,e){return 0===e?0:m(n.navData[e-1][0])})).style("fill","white"),this.navPoints.append("line").attr("x2",-14),this.navPoints.append("circle").attr("class","overview-navigation-indicator").attr("r",5),this.navPoints.append("foreignObject").attr("width","90").attr("height","45").attr("transform","translate(-108, -17)").html((function(t){return"<p>"+t[1]+"</p>"})),this.navActiveLine=v.append("line").style("pointer-events","none").attr("transform","translate(110, 15)").style("stroke-width",1).style("stroke","338498");var y=function(t){return Math.sqrt(Math.pow(t[8],2)+Math.pow(t[9],2))};this.navData[0].push(t.nodes.map((function(t){return y(t)})).sort((function(t,e){return e-t}))[0]),this.navData[1].push(y(t.proxies[t.proxies.length-1])),this.navData[2].push(y(r[r.length-1])),this.navPoints.on("click",(function(t,e){n.container.selectAll("#tooltip").remove(),n.currentScale=e,n.interpolation=u.interpolate(n.scaleTarget,t[5]),n.lineInterpolation=u.interpolate(n.lineTarget,n.navDist*e+t[3]+t[2]-5),n.time=0,n.update(!1),n.ixTooltipHide()})),this.circleLegend(p,g),this.regl=c(document.getElementById("overview-regl-canvas")),window.onbeforeunload=function(){n.regl.destroy()},this.reglDraw=this.regl({attributes:{color:l,position:h,size:d},count:l.length,frag:"\n        // set the precision of floating point numbers\n        precision highp float;\n        // this value is populated by the vertex shader\n        varying vec3 fragColor;\n        void main() {\n          float r = 0.0, delta = 0.0;\n          vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n          r = dot(cxy, cxy);\n          if (r > 1.0) {\n              discard;\n          }\n          // gl_FragColor is a special variable that holds the color of a pixel\n          gl_FragColor = vec4(fragColor, 1);\n        }\n      ",primitive:"points",uniforms:{scale:this.regl.prop("scale"),stageHeight:this.regl.prop("stageHeight"),stageWidth:this.regl.prop("stageWidth")},vert:"\n        // per vertex attributes\n        attribute float size;\n        attribute vec2 position;\n        attribute vec3 color;\n        // variables to send to the fragment shader\n        varying vec3 fragColor;\n        // values that are the same for all vertices\n        uniform float scale;\n        uniform float stageWidth;\n        uniform float stageHeight;\n        // helper function to transform from pixel space to normalized device coordinates (NDC)\n        // in NDC (0,0) is the middle, (-1, 1) is the top left and (1, -1) is the bottom right.\n        vec2 normalizeCoords(vec2 position) {\n          // read in the positions into x and y vars\n          float x = position[0] * scale + stageWidth / 2.0;\n          float y = position[1] * scale + stageHeight / 2.0;\n          return vec2(\n            2.0 * ((x / stageWidth) - 0.5),\n            // invert y to treat [0,0] as bottom left in pixel space\n            -(2.0 * ((y / stageHeight) - 0.5))\n          );\n        }\n        void main() {\n          // update the size of a point based on the prop pointWidth\n          gl_PointSize = size * scale;\n          // send color to the fragment shader\n          fragColor = color;\n          // scale to normalized device coordinates\n          // gl_Position is a special variable that holds the position of a vertex\n          gl_Position = vec4(normalizeCoords(position), 0.0, 1.0);\n        }\n      "}),this.time=1,this.update(!1),setTimeout((function(){n.update(!1)}),100)},e.prototype.glAnimate=function(){var t=this;this.frameLoop||(this.frameLoop=this.regl.frame((function(){t.regl.clear({color:[255,255,255,1],depth:1});var e=t.scaleTarget,n=t.lineTarget;t.time<1&&(n=t.lineInterpolation(u.easeCubic(t.time)),t.lineTarget=n,e=t.interpolation(u.easeCubic(t.time)),t.scaleTarget=e),t.navActiveLine.attr("y2",n),t.navPoints.classed("active",(function(e,r){return n>=t.navDist*r+e[3]})),t.svg.attr("transform","translate("+t.width/2+","+t.height/2+") scale("+t.scaleTarget+")"),t.reglDraw({scale:e,stageHeight:t.height,stageWidth:t.width}),t.frameLoop&&t.time>=1?(t.frameLoop.cancel(),t.frameLoop=!1):t.time+=.01})))},e.prototype.update=function(t){var e=this;this.navDist=(.5*this.height-10-this.navData.reduce((function(t,e){return t+2*e[2]}),0))/2,this.navPoints.attr("transform",(function(t,n){return"translate(110, "+(e.navDist*n+t[3]+t[2]+5)+")"})),this.showIxTooltip&&this.ixTooltip(this.width-50,this.height/2+1.5*this.navDist),this.showIxMessage&&this.ixMessage(browser.i18n.getMessage("visOverviewIntro")),this.navLine.attr("y2",2*this.navDist+this.navData[this.navData.length-1][3]+this.navData[this.navData.length-1][2]),this.svg.attr("transform","translate("+this.width/2+","+this.height/2+") scale("+this.scaleTarget+")"),this.container.select("#overview-regl-canvas").style("width",this.width+"px").style("height",this.height+"px"),this.container.select("#overview-regl-canvas canvas").attr("width",2*this.width).attr("height",2*this.height).style("width",this.width+"px").style("height",this.height+"px"),this.navData.forEach((function(t){var n=e.width/2/(t[4]+50),r=e.height/2/(t[4]+50),i=1;n<r&&n<1?i=n:r<1&&(i=r),t[5]=i})),this.regl.poll(),this.glAnimate()},e}(n(83).Vis);e.OverviewVis=f}]);